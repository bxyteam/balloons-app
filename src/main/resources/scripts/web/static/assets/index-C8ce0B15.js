var Xa=Object.defineProperty;var Za=(e,a,s)=>a in e?Xa(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s;var Me=(e,a,s)=>(Za(e,typeof a!="symbol"?a+"":a,s),s);import{r as h,j as t,R as L,t as Qa,c as _,V as as,a as os,b as ke,A as rs,C as ns,X as at,T as is,D as ds,P as eo,u as $e,N as pe,O as Tt,S as ze,d as to,L as Oe,e as ls,f as cs,g as us,h as so,i as ao,k as te,v as C,l as oo,m as ps,n as ro,o as no,p as io,q as lo,s as co,w as uo,x as fs,y as ms,I as po,z as hs,B as gs,E as xs,F as ys,G as fo,H as bs,J as mo,K as vs,M as Es,Q as ho,U as At,W as go,Y as ws,Z as xo,_ as yo,$ as bo,a0 as js,a1 as Cs,a2 as Ns,a3 as vo,a4 as Ss,a5 as Ts,a6 as As,a7 as Ds,a8 as ks,a9 as Eo,aa as Ms,ab as Is,ac as wo,ad as jo,ae as Rs,af as _s,ag as Ls,ah as Co,ai as No,aj as mt,ak as So,al as To,am as Ps,an as Ao,ao as Do,ap as qt,aq as ko,ar as Mo,as as Io,at as Ro,au as _o,av as Lo,aw as Po,ax as Oo,ay as Uo,az as $o,aA as ot,aB as Os,aC as rt,aD as Dt,aE as nt,aF as it,aG as Us,aH as Fo,aI as Go,aJ as $s,aK as zo,aL as Bo,aM as Ho,aN as Vo,aO as Wo,aP as Fs,aQ as Ko,aR as Jo,aS as Yo,aT as Gs,aU as qo,aV as Xo,aW as Zo,aX as Qo,aY as er,aZ as tr,a_ as sr,a$ as ar,b0 as zs,b1 as or,b2 as Bs,b3 as rr,b4 as nr,b5 as ir,b6 as dr,b7 as lr,b8 as cr,b9 as ur,ba as pr,bb as Ye,bc as qe,bd as fr,be as mr,bf as hr,bg as ie,bh as gr,bi as xr}from"./vendor-B-qHsaYt.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const yr={theme:"system",setTheme:()=>null},br=h.createContext(yr);function vr({children:e,defaultTheme:a="system",storageKey:s="vite-ui-theme",...r}){const[o,i]=h.useState(()=>localStorage.getItem(s)||a);h.useEffect(()=>{const d=window.document.documentElement;if(d.classList.remove("light","dark"),o==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";d.classList.add(l);return}d.classList.add(o)},[o]);const n={theme:o,setTheme:d=>{localStorage.setItem(s,d),i(d)}};return t.jsx(br.Provider,{...r,value:n,children:e})}const Er=1,wr=1e6;let ht=0;function jr(){return ht=(ht+1)%Number.MAX_SAFE_INTEGER,ht.toString()}const gt=new Map,Xt=e=>{if(gt.has(e))return;const a=setTimeout(()=>{gt.delete(e),Ve({type:"REMOVE_TOAST",toastId:e})},wr);gt.set(e,a)},Cr=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,Er)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?Xt(s):e.toasts.forEach(r=>{Xt(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==a.toastId)}}},Xe=[];let Ze={toasts:[]};function Ve(e){Ze=Cr(Ze,e),Xe.forEach(a=>{a(Ze)})}function Hs({...e}){const a=jr(),s=o=>Ve({type:"UPDATE_TOAST",toast:{...o,id:a}}),r=()=>Ve({type:"DISMISS_TOAST",toastId:a});return Ve({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:o=>{o||r()}}}),{id:a,dismiss:r,update:s}}function q(){const[e,a]=L.useState(Ze);return L.useEffect(()=>(Xe.push(a),()=>{const s=Xe.indexOf(a);s>-1&&Xe.splice(s,1)}),[e]),{...e,toast:Hs,dismiss:s=>Ve({type:"DISMISS_TOAST",toastId:s})}}const Y={AUTH_URL:"api/v1/auth",GET_SESSION:"/api/v1/getSession",GET_ALIAS:"/api/v1/getAlias",READ_FILE_URL:"/api/v1/readFile",UPLOAD_FILE_URL:"/api/v1/upload",GET_ASSET_FILE_URL:"/api/v1/getAsset?file=",DOWNLOAD_ASSET_FILE_URL:"/api/v1/downloadAsset?file=",COMPILER_SERVICE_URL:"/api/v1/compilerService",GDRIVE_SERVICE_URL:"/api/v1/gdriveService",DATABASE_MANAGEMENT_SERVICE_URL:"/api/v1/databaseManagement"};function S(...e){return Qa(_(e))}function Nr(e){const a=e.trim().split(`
`),s=a[0].split(",").map(o=>o.trim()),r=[];for(let o=1;o<a.length;o++){const i=a[o],n=Sr(i),d={};s.forEach((l,c)=>{d[l]=n[c]}),r.push(d)}return r}function Sr(e){const a=[];let s="",r=!1;for(let o=0;o<e.length;o++){const i=e[o];if(i==='"'&&(o===0||e[o-1]!=="\\")){r=!r;continue}if(i===","&&!r){a.push(s.trim()),s="";continue}s+=i}return a.push(s.trim()),a}const Tr=e=>{const a=Array.from(e,s=>String.fromCodePoint(s)).join("");return btoa(a)},ve=e=>Tr(new TextEncoder().encode(e)),Ar=({start:e,stop:a,step:s})=>Array.from({length:(a-e)/s+1},(r,o)=>e+o*s),kt=e=>{const a=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;return e.match(a)},W=()=>window.matchMedia("(max-width: 420px)").matches?"Mobile":window.matchMedia("(max-width: 850px)").matches?"Tablet":"Desktop",Vs=()=>window.matchMedia("(max-width: 768px)").matches,Ws=e=>{if(!e.trim())return"#0ea5e9";const a=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!a)return"#0ea5e9";const s=parseInt(a[1]);let r=parseInt(a[2]),o=parseInt(a[3]);r/=100,o/=100;const i=(1-Math.abs(2*o-1))*r,n=i*(1-Math.abs(s/60%2-1)),d=o-i/2;let l=0,c=0,g=0;s>=0&&s<60?(l=i,c=n,g=0):s>=60&&s<120?(l=n,c=i,g=0):s>=120&&s<180?(l=0,c=i,g=n):s>=180&&s<240?(l=0,c=n,g=i):s>=240&&s<300?(l=n,c=0,g=i):s>=300&&s<360&&(l=i,c=0,g=n),l=Math.round((l+d)*255),c=Math.round((c+d)*255),g=Math.round((g+d)*255);const u=f=>f.toString(16).padStart(2,"0");return`#${u(l)}${u(c)}${u(g)}`},Ue=e=>new Promise(a=>setTimeout(a,e)),Dr=async()=>{try{const e=await fetch(Y.AUTH_URL);return e.ok?(await e.json(),!0):!1}catch(e){return console.error(e),!1}},kr=eo,Ks=L.forwardRef(({className:e,...a},s)=>t.jsx(as,{ref:s,className:S("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...a}));Ks.displayName=as.displayName;const Mr=ke("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Js=L.forwardRef(({className:e,variant:a,...s},r)=>t.jsx(os,{ref:r,className:S(Mr({variant:a}),e),...s}));Js.displayName=os.displayName;const Ir=L.forwardRef(({className:e,...a},s)=>t.jsx(rs,{ref:s,className:S("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...a}));Ir.displayName=rs.displayName;const Ys=L.forwardRef(({className:e,...a},s)=>t.jsx(ns,{ref:s,className:S("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...a,children:t.jsx(at,{className:"h-4 w-4"})}));Ys.displayName=ns.displayName;const qs=L.forwardRef(({className:e,...a},s)=>t.jsx(is,{ref:s,className:S("text-sm font-semibold",e),...a}));qs.displayName=is.displayName;const Xs=L.forwardRef(({className:e,...a},s)=>t.jsx(ds,{ref:s,className:S("text-sm opacity-90",e),...a}));Xs.displayName=ds.displayName;function Rr(){const{toasts:e}=q();return t.jsxs(kr,{children:[e.map(function({id:a,title:s,description:r,action:o,...i}){return t.jsxs(Js,{...i,children:[t.jsxs("div",{className:"grid gap-1",children:[s&&t.jsx(qs,{children:s}),r&&t.jsx(Xs,{children:r})]}),o,t.jsx(Ys,{})]},a)}),t.jsx(Ks,{})]})}const Mt={projectCompositeId:null,outputAssetPage:{},projectConfig:null,projectOwner:null,currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,contextService:"http",dockerContainerStatus:"NOT_FOUND",socketProjectExecProps:{compileType:"",classToLoad:"",userCodePath:""},message:{text:"",type:"Unset",hasMessage:!1}},_r=(e=Mt,a)=>{var s;switch(a.type){case"SET_CONTEXT_SERVICE":return{...e,contextService:a.payload.contextService,socketProjectExecProps:a.payload.socketProjectExecProps,dockerContainerStatus:a.payload.dockerContainerStatus};case"SET_DOCKER_CONTAINER_STATUS":return{...e,dockerContainerStatus:a.payload.dockerContainerStatus};case"SET_PROJECT_COMPOSITE_ID":return window.projectId=a.payload.projectCompositeId,{...e,outputAssetPage:{},currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,message:{text:"",type:"Unset",hasMessage:!1},projectCompositeId:a.payload.projectCompositeId};case"SET_PROJECT_CONFIG":return{...e,outputAssetPage:{},currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,message:{text:"",type:"Unset",hasMessage:!1},projectConfig:a.payload.projectConfig};case"SET_PROJECT_OWNER":return{...e,outputAssetPage:{},currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,message:{text:"",type:"Unset",hasMessage:!1},projectOwner:a.payload.projectOwner};case"SET_PROJECT_ID_AND_OWNER":return window.projectId=a.payload.projectCompositeId,{...e,outputAssetPage:{},currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,message:{text:"",type:"Unset",hasMessage:!1},projectCompositeId:a.payload.projectCompositeId,projectOwner:a.payload.projectOwner};case"SET_COMPILER_RESULTS":return{...e,isLoading:!1,outputAssetPage:{...e.outputAssetPage,[e.activePageId]:{...e.outputAssetPage[e.activePageId],outputAsset:a.payload.outputAssetRecord.outputAsset}}};case"CLEAR_COMPILER_RESULTS":return{...e,isLoading:!1,outputAssetPage:{...e.outputAssetPage,[a.payload.outputAssetRecord.pageId]:{pageId:a.payload.outputAssetRecord.pageId,extraProps:{},outputAsset:null}}};case"SET_CURRENT_RUNNING":return{...e,isLoading:a.payload.manualLoader!==void 0?a.payload.manualLoader:!0,currentRunning:a.payload.currentRunning,activePageId:a.payload.outputAssetRecord.pageId,outputAssetPage:{...e.outputAssetPage,[a.payload.outputAssetRecord.pageId]:{...[a.payload.outputAssetRecord.pageId],pageId:a.payload.outputAssetRecord.pageId,extraProps:((s=a.payload.outputAssetRecord)==null?void 0:s.extraProps)||{},outputAsset:null}}};case"CLEAR_CURRENT_RUNNING":return{...e,currentRunning:"NULL_NILL"};case"SET_COMPILER_MESSAGE":return{...e,isLoading:!1,message:a.payload.message};case"CLEAR_COMPILER_STATE":return{...e,outputAssetPage:{},currentRunning:"NULL_NILL",activePageId:"NULL_NILL",isLoading:!1,message:{text:"",type:"Unset",hasMessage:!1}};case"SET_IS_LOADING":return{...e,isLoading:a.payload.isLoading};default:return e}},Zs=h.createContext({compilerState:Mt,compilerDispatch:()=>{}}),Lr=e=>{const[a,s]=h.useReducer(_r,Mt);return t.jsx(Zs.Provider,{value:{compilerState:a,compilerDispatch:s},children:e.children})},J=()=>{const e=h.useContext(Zs);if(!e)throw new Error("useCompiler Hook must be used within the compiler Provider");return e},Pr=()=>{const{compilerState:e}=J(),[a,s]=h.useState(!1);return h.useEffect(()=>{s(e.isLoading)},[e.isLoading]),a?t.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center gap-2 bg-black bg-opacity-50 z-[900]",children:[t.jsx("div",{className:"w-20 h-20 border-4 border-t-transparent border-orange-500 rounded-full animate-spin"}),t.jsx("p",{className:"font-boldl text-orange-500 text-center",children:"Loading..."})]}):null},Or=()=>$e().pathname==="/"?t.jsx(pe,{to:`/${window.__config.entryPoint}`,relative:"path"}):t.jsxs("div",{children:[t.jsx("main",{className:"container",children:t.jsx(Tt,{})}),t.jsx(Rr,{}),t.jsx(Pr,{})]}),Qs=ke("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=L.forwardRef(({className:e,variant:a,size:s,asChild:r=!1,...o},i)=>{const n=r?ze:"button";return t.jsx(n,{className:S(Qs({variant:a,size:s,className:e})),ref:i,...o})});V.displayName="Button";const Ur=()=>{const e=`${window.location.origin}`,a=$e(),{state:s}=a;return h.useEffect(()=>{document.title="Error"},[]),t.jsxs("div",{className:"flex flex-col justify-start my-8 ml-3 p-3 gap-7",children:[t.jsx("h2",{className:"text-xl font-bold md:text-3xl lg:text-4xl text-red-600",children:"Error!"}),t.jsxs("h2",{className:"flex items-center gap-5 text-red-500 text-xl font-bold md:text-3xl lg:text-4xl",children:[t.jsx(to,{className:"h-10 w-10 stroke-red-500"}),t.jsx("span",{children:"Something went wrong!"})]}),t.jsxs("span",{children:[" ",s?s.message:""]}),t.jsx(V,{variant:"default",className:"w-fit",children:t.jsxs(Oe,{to:e,className:"flex items-center justify-center gap-1",children:[t.jsx(ls,{}),"Back to Home Page"]})})]})},$r=()=>{const e=`${window.location.origin}`;return h.useEffect(()=>{document.title="404 - Not Found"},[]),t.jsxs("div",{className:"flex flex-col justify-start my-8 ml-3 p-3 gap-7",children:[t.jsx("h5",{className:"text-lg text-primary",children:"404"}),t.jsx("h2",{className:"text-xl font-bold md:text-3xl lg:text-4xl",children:"Page not found"}),t.jsx("p",{children:"Sorry, we couldn’t find the page you’re looking for."}),t.jsx(V,{variant:"default",className:"w-fit",children:t.jsxs(Oe,{to:e,className:"flex items-center justify-center gap-1",children:[t.jsx(ls,{}),"Back to Home page"]})})]})},ea=h.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:S("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));ea.displayName="Card";const Fr=h.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:S("flex flex-col space-y-1.5 p-6",e),...a}));Fr.displayName="CardHeader";const ta=h.forwardRef(({className:e,...a},s)=>t.jsx("h3",{ref:s,className:S("text-2xl font-semibold leading-none tracking-tight",e),...a}));ta.displayName="CardTitle";const Gr=h.forwardRef(({className:e,...a},s)=>t.jsx("p",{ref:s,className:S("text-sm text-muted-foreground",e),...a}));Gr.displayName="CardDescription";const sa=h.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:S("p-6 pt-0",e),...a}));sa.displayName="CardContent";const zr=h.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:S("flex items-center p-6 pt-0",e),...a}));zr.displayName="CardFooter";const Q=L.forwardRef(({className:e,type:a,...s},r)=>t.jsx("input",{type:a,className:S("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));Q.displayName="Input";var ss;const It=((ss=window==null?void 0:window.__user__)==null?void 0:ss.info)||null,Br=e=>{window.__user__===null?window.__user__={info:null}:(window.__user__=null,window.__user__={info:null}),window.__user__.info=e,Object.freeze(window.__user__.info)},Hr=(e=It,a)=>{switch(a.type){case"SET_USER_LOGGED_IN":return Br(a.payload),{...e,...a.payload};case"SET_USER_LOGGED_OUT":return window.__user__=null,null;default:return e}},aa=h.createContext({userState:It,userDispatch:()=>{}}),Vr=e=>{const[a,s]=h.useReducer(Hr,It);return t.jsx(aa.Provider,{value:{userState:a,userDispatch:s},children:e.children})},de=()=>{const e=h.useContext(aa);if(!e)throw new Error("useUser Hook must be used within the user Provider");return e},Wr=ke("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),se=L.forwardRef(({className:e,...a},s)=>t.jsx(cs,{ref:s,className:S(Wr(),e),...a}));se.displayName=cs.displayName;const We=L.forwardRef(({className:e,orientation:a="horizontal",decorative:s=!0,...r},o)=>t.jsx(us,{ref:o,decorative:s,orientation:a,className:S("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));We.displayName=us.displayName;const Kr=ke("flex-col items-center justify-center",{variants:{show:{true:"flex",false:"hidden"}},defaultVariants:{show:!0}}),Jr=ke("animate-spin text-primary",{variants:{size:{small:"size-6",medium:"size-8",large:"size-12"}},defaultVariants:{size:"medium"}});function Ae({size:e,show:a,children:s,className:r}){return t.jsxs("span",{className:Kr({show:a}),children:[t.jsx(so,{className:S(Jr({size:e}),r)}),s]})}const Yr=()=>{const{userState:e,userDispatch:a}=de(),[s,r]=h.useState({email:"",password:"",error:null}),[o,i]=h.useState(!1),n=$e(),d=n.state&&n.state.lastLocation?n.state.lastLocation:null;h.useEffect(()=>{document.title="Login"},[]);const l=()=>d?t.jsx(pe,{to:d}):t.jsx(pe,{to:"/"});if(e)return l();const c=async()=>{const{email:g,password:u}=s;if(g.trim()===""||u.trim()===""||!kt(g)){r(f=>({...f,error:"email or password are incorrect"}));return}try{i(!0);const f={email:g.trim(),password:u.trim()},m=await fetch(Y.AUTH_URL,{method:"POST",body:JSON.stringify(f),headers:{"Content-type":"application/json; charset=UTF-8"}});if(m.status!==200){const{message:w}=await m.json();r(T=>({...T,error:w}));return}const{message:p,statusCode:x,user:v}=await m.json();if(x>=300){r(w=>({...w,error:p}));return}return a({type:"SET_USER_LOGGED_IN",payload:{id:v.id,email:v.email,isAdmin:v.isAdmin}}),l()}catch(f){console.error(f),r(m=>({...m,error:"An error occurred when trying to make the request. Please try again later. Thank you."}))}finally{i(!1)}};return t.jsx("div",{children:t.jsxs(ea,{className:"absolute shadow-md top-2/4 left-1/2 translate-x-[-50%] translate-y-[-50%] p-2 w-[95%] lg:w-[500px]",children:[t.jsx(ta,{children:t.jsx("h2",{className:"text-center",children:"Login"})}),t.jsx(We,{className:"my-2 w-[80%] mx-auto"}),t.jsxs(sa,{children:[t.jsx("h2",{className:"py-2 text-muted-foreground text-center font-bold",children:"Signin with Email and Password"}),t.jsxs("div",{className:"mt-2 mb-3 flex flex-col gap-3",children:[s.error&&t.jsx("p",{className:"text-red-800 p-1 text-center",children:s.error}),t.jsx(se,{htmlFor:"email",className:"text-muted-foreground",children:"Email:"}),t.jsx(Q,{id:"email",type:"email",placeholder:"myEmail@domain.com",value:s.email,onChange:g=>r(u=>({...u,email:g.target.value})),onFocus:()=>r(g=>({...g,error:null})),onKeyUp:g=>{g.key==="Enter"&&c()}}),t.jsx(se,{htmlFor:"password",className:"text-muted-foreground",children:"Password:"}),t.jsx(Q,{id:"password",type:"password",placeholder:"password",value:s.password,onChange:g=>r(u=>({...u,password:g.target.value})),onFocus:()=>r(g=>({...g,error:null})),onKeyUp:g=>{g.key==="Enter"&&c()}}),t.jsx(V,{variant:"default",className:"mt-2 bg-emerald-600 text-white hover:bg-emerald-700 cursor-pointer",onClick:c,disabled:o,children:t.jsxs("span",{className:"flex items-center justify-center gap-1",children:[o&&t.jsx(Ae,{size:"small",className:"text-white"}),"Login"]})})]})]})]})})},qr=()=>{const{userState:e,userDispatch:a}=de(),[s,r]=h.useState(!0),o=h.useCallback(async()=>{try{await(await fetch(Y.AUTH_URL)).json(),a({type:"SET_USER_LOGGED_OUT",payload:null}),console.log("Logged out successfully"),await Ue(1e3)}catch(i){console.error(i)}finally{r(!1)}},[a]);return h.useEffect(()=>{if(!e){r(!1);return}o()},[e,o]),s?t.jsx("div",{className:"absolute top-1/2 left-2/4",children:t.jsx(Ae,{size:"large",className:"size-8 stroke-orange-600"})}):t.jsx(pe,{to:`/${X.LOGIN}`,replace:!0})},Xr=({message:e})=>{const a="Unauthorized Access Sorry, you do not have permission to access this resource. Please contact your administrator or try accessing a different page.",s=`${window.location.origin}/${window.__config.entryPoint}`;return h.useEffect(()=>{document.title="Unauthorized"},[]),t.jsxs("section",{className:"w-full h-[90%] md:max-w-md flex flex-col gap-6 items-center justify-center my-4 mx-auto",children:[t.jsx(ao,{className:"w-10 h-10 stroke-primary"}),t.jsx("h2",{className:"font-bold text-lg md:text-2xl lg:text-3xl",children:"Unauthorized Access"}),t.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e||a}),t.jsx(V,{variant:"default",children:t.jsx(Oe,{to:s,children:"Go to Home"})})]})},oa=async({file:e,path:a})=>{try{return await(a?await fetch(`${Y.READ_FILE_URL}?file=${e}&path=${a}`):await fetch(`${Y.READ_FILE_URL}?file=${e}`)).json()}catch(s){return console.error(s),{statusCode:500,content:"",message:"Internal error"}}},Zr="controller",Qr="builderPages",Rt={elements:[{content:[],id:"__body",name:"Body",styles:{Desktop:{height:"100dvh",scrollBehavior:"smooth"},Tablet:{height:"100dvh",scrollBehavior:"smooth"},Mobile:{height:"100dvh",scrollBehavior:"smooth"}},type:"__body",canDelete:!1,index:0}],selectedElement:{id:"",content:[],name:"",styles:{Desktop:{},Tablet:{},Mobile:{}},canDelete:!1,type:null},hoveredElement:{id:"",content:[],name:"",styles:{Desktop:{},Tablet:{},Mobile:{}},canDelete:!1,type:null},dataSource:{mode:"dynamic",type:"json",data:{result:[]},rawData:""},device:"Desktop",previewMode:!1,liveMode:!1,pageId:"",index:0,showDrawer:!1},en={history:[Rt],currentIndex:0},_t={editor:Rt,history:en,pages:[]},ra=(e,a)=>{if(a.type!=="ADD_ELEMENT")throw Error("You sent the wrong action type to the Add Element web-editor State");return e.map(s=>s.id===a.payload.containerId&&Array.isArray(s.content)?{...s,content:[...s.content,a.payload.elementDetails]}:s.content&&Array.isArray(s.content)?{...s,content:ra(s.content,a)}:s)},na=(e,a)=>{if(a.type!=="UPDATE_ELEMENT")throw Error("You sent the wrong action type to the update Element State");return e.map(s=>s.id===a.payload.elementDetails.id?{...s,...a.payload.elementDetails}:s.content&&Array.isArray(s.content)?{...s,content:na(s.content,a)}:s)},ia=(e,a)=>{if(a.type!=="DELETE_ELEMENT")throw Error("You sent the wrong action type to the Delete Element editor State");return e.filter(s=>s.id===a.payload.elementDetails.id?!1:(s.content&&Array.isArray(s.content)&&(s.content=ia(s.content,a)),!0))},bt=(e,a,s)=>{const r=e.findIndex(o=>o.id===a);if(r!==-1)return s==="UP"&&r>0?([e[r-1],e[r]]=[e[r],e[r-1]],!0):s==="DOWN"&&r<e.length-1?([e[r],e[r+1]]=[e[r+1],e[r]],!0):!1;for(const o of e)if(Array.isArray(o.content)){if(bt(o.content,a,s))return!0}else if(o.content&&typeof o.content=="object"){for(const i in o.content)if(Array.isArray(o.content[i])&&bt(o.content[i],a,s))return!0}return!1},tn=(e=_t,a)=>{switch(a.type){case"ADD_ELEMENT":const s={...e.editor,elements:ra(e.editor.elements,a),index:e.editor.index+1},r=[...e.history.history.slice(0,e.history.currentIndex+1),{...s}];return{...e,editor:s,history:{...e.history,history:r,currentIndex:r.length-1}};case"UPDATE_ELEMENT":const i=na(e.editor.elements,a),n=e.editor.selectedElement.id===a.payload.elementDetails.id,d={...e.editor,elements:i,selectedElement:n?a.payload.elementDetails:{id:"",content:[],name:"",styles:{Desktop:{},Tablet:{},Mobile:{}},type:null,canDelete:!1}},l=[...e.history.history.slice(0,e.history.currentIndex+1),{...d}];return{...e,editor:d,history:{...e.history,history:l,currentIndex:l.length-1}};case"DELETE_ELEMENT":const g=ia(e.editor.elements,a),u={...e.editor,elements:g},f=[...e.history.history.slice(0,e.history.currentIndex+1),{...u}];return{...e,editor:u,history:{...e.history,history:f,currentIndex:f.length-1}};case"MOVE_ELEMENT":const{elementId:p,direction:x}=a.payload,v=JSON.parse(JSON.stringify(e));return bt(v.editor.elements,p,x),v;case"CHANGE_CLICKED_ELEMENT":return{...e,editor:{...e.editor,selectedElement:a.payload.elementDetails||{id:"",content:[],name:"",styles:{Desktop:{},Tablet:{},Mobile:{}},type:null,canDelete:!1},showDrawer:!0},history:{...e.history,history:[...e.history.history.slice(0,e.history.currentIndex+1),{...e.editor}],currentIndex:e.history.currentIndex+1}};case"REDO":if(e.history.currentIndex<e.history.history.length-1){const E=e.history.currentIndex+1,A={...e.history.history[E]};return{...e,editor:A,history:{...e.history,currentIndex:E}}}return e;case"UNDO":if(e.history.currentIndex>0){const E=e.history.currentIndex-1,A={...e.history.history[E]};return{...e,editor:A,history:{...e.history,currentIndex:E}}}return e;case"CHANGE_DEVICE":return{...e,editor:{...e.editor,device:a.payload.device}};case"TOGGLE_PREVIEW_MODE":return{...e,editor:{...e.editor,previewMode:!e.editor.previewMode}};case"TOGGLE_LIVE_MODE":return{...e,editor:{...e.editor,liveMode:a.payload?a.payload.value:!e.editor.liveMode}};case"LOAD_DATA":return{...e,editor:{...e.editor,elements:a.payload.elements||Rt.elements,liveMode:!!a.payload.withLive,index:a.payload.elements&&a.payload.elements.length>0&&a.payload.elements[0].index||0},pages:a.payload.pages};case"SET_PAGE_ID":return{...e,editor:{...e.editor,pageId:a.payload.pageId}};case"CHANGE_HOVERED_ELEMENT":return{...e,editor:{...e.editor,hoveredElement:a.payload.elementDetails||{id:"",content:[],name:"",styles:{Desktop:{},Tablet:{},Mobile:{}},type:null,canDelete:!1}}};case"FETCH_DATA_SOURCE":return{...e,editor:{...e.editor,dataSource:a.payload.dataSource}};case"TOGGLE_DRAWER_SETTINGS":return{...e,editor:{...e.editor,showDrawer:a.payload.showDrawer}};default:return e}},da=h.createContext({state:_t,dispatch:()=>{},pageId:""}),sn=e=>{const[a,s]=h.useReducer(tn,_t);return t.jsx(da.Provider,{value:{state:a,dispatch:s,pageId:e.pageId},children:e.children})},H=()=>{const e=h.useContext(da);if(!e)throw new Error("useWebEditor Hook must be used within the editor Provider");return e},y={backgroundPosition:"center",objectFit:"cover",backgroundRepeat:"no-repeat",textAlign:"left",opacity:"100%"},Ee="alias_shared__dir__name",Zt="alien-container-drive@gdrive-alien-containers.iam.gserviceaccount.com",Be=(e,a)=>{for(const s of e){if(s.id===a)return s;if(Array.isArray(s.content)){const r=Be(s.content,a);if(r)return r}}},an=e=>{switch(e){case"inputText":return"textInput";case"inputNumber":return"numberInput";case"inputDate":return"dateInput";case"inputTextarea":return"textareaInput";case"combobox":return"selectInput";case"inputColor":return"colorInput";default:return null}},on=({state:e,method:a,dispatch:s,componentToControl:r})=>{switch(a.name){case"toggleDisplay":rn({state:e,method:a,dispatch:s,componentToControl:r});break;case"backgroundColor":nn({state:e,method:a,dispatch:s,componentToControl:r});break;case"color":dn({state:e,method:a,dispatch:s,componentToControl:r});break;case"changeValue":case"clearValue":ln({state:e,method:a,dispatch:s,componentToControl:r});break;case"changeImage":cn({state:e,method:a,dispatch:s,componentToControl:r});break}},rn=({state:e,dispatch:a,componentToControl:s,method:r})=>{var l;const o=Be(e.editor.elements,s.id);if(!o)return;const i=((l=o.styles[e.editor.device])==null?void 0:l.display)||"block",n=r.value.trim()!==""?r.value:"block",d={...o,styles:{...o.styles,[e.editor.device]:{...o.styles[e.editor.device],display:i==="none"?n:"none"}}};Ke({dispatch:a,elementDetails:d})},nn=({state:e,dispatch:a,componentToControl:s,method:r})=>{const o=Be(e.editor.elements,s.id);if(!o)return;const i=document.documentElement,n=getComputedStyle(i).getPropertyValue("--background"),d=Ws(`hsl(${n.trim().split(" ").join(",")})`),l=r.value.trim()!==""?r.value:d,c={...o,styles:{...o.styles,[e.editor.device]:{...o.styles[e.editor.device],backgroundColor:l}}};Ke({dispatch:a,elementDetails:c})},dn=({state:e,dispatch:a,componentToControl:s,method:r})=>{const o=Be(e.editor.elements,s.id);if(!o)return;const i=document.documentElement,n=getComputedStyle(i).getPropertyValue("--foreground"),d=Ws(`hsl(${n.trim().split(" ").join(",")})`),l=r.value.trim()!==""?r.value:d,c={...o,styles:{...o.styles,[e.editor.device]:{...o.styles[e.editor.device],color:l}}};Ke({dispatch:a,elementDetails:c})},ln=({state:e,dispatch:a,method:s,componentToControl:r})=>{const o=Be(e.editor.elements,r.id);if(!o)return;const i=an(r.type);if(!i)return;const n=o.content[i],d=s.name==="clearValue"?"":s.value,l={...o,content:{...o.content,[i]:{...n,value:d,fireChange:!0}}};Ke({dispatch:a,elementDetails:l})},cn=({state:e,method:a,dispatch:s,componentToControl:r})=>{const o=Be(e.editor.elements,r.id);if(!o)return;const i={...o,content:{...o.content,image:{...o.content.image,src:a.value}}};Ke({dispatch:s,elementDetails:i})},Ke=({dispatch:e,elementDetails:a})=>{e({type:"UPDATE_ELEMENT",payload:{elementDetails:a}})},Ie=class Ie{constructor(){Me(this,"socket",null);Me(this,"messageListeners",new Map)}static getInstance(){return Ie.instance||(Ie.instance=new Ie),Ie.instance}connect(a){return this.socket?(console.warn("WebSocket is already connected"),Promise.reject(new Error("WebSocket is already connected"))):new Promise((s,r)=>{this.socket=new WebSocket(a),this.socket.onopen=()=>{console.info("WebSocket connected"),s()},this.socket.onerror=o=>{console.error("WebSocket error:",o),r(o)},this.socket.onmessage=o=>{var d;const i=JSON.parse(o.data),{type:n}=i;n&&this.messageListeners.has(n)?(d=this.messageListeners.get(n))==null||d(i):console.warn(`No listener for message type: ${n}`)},this.socket.onclose=()=>{console.log("WebSocket closed"),this.socket=null}})}sendMessage(a,s){if(this.socket&&this.socket.readyState===WebSocket.OPEN){const r=JSON.stringify({type:a,payload:JSON.stringify(s)});this.socket.send(r)}else console.error("WebSocket is not connected")}onMessage(a,s){this.messageListeners.set(a,s)}removeMessageListener(a){this.messageListeners.delete(a)}};Me(Ie,"instance");let vt=Ie;const et=vt.getInstance(),Re=class Re{constructor(a){Me(this,"baseUrl");this.baseUrl=a}static getInstance(a){return Re.instance||(Re.instance=new Re(a)),Re.instance}async get(a){const s=new URL(this.baseUrl,window.location.origin);return a&&Object.keys(a).forEach(o=>s.searchParams.append(o,a[o])),await(await fetch(s.toString(),{method:"GET",headers:{"Content-Type":"application/json"}})).json()}async post(a,s){const r=JSON.stringify({type:a,payload:JSON.stringify(s)});return await(await fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:r})).json()}};Me(Re,"instance");let Et=Re;const un=Et.getInstance(Y.COMPILER_SERVICE_URL),_e=class _e{constructor(){}static getInstance(){return _e.instance||(_e.instance=new _e),_e.instance}execute({contextService:a,payloadService:s,dispatch:r}){a==="websocket"?this.executeWebsocketService({dispatch:r,payloadService:s}):this.executeHTTPService({dispatch:r,payloadService:s})}executeWebsocketService({payloadService:a,dispatch:s}){et.onMessage(a.typeMessage,r=>{const o=JSON.parse(r.payload);let i=o;o.statusCode!==200&&(o.error||(i={statusCode:o.statusCode,error:{message:o.message}})),typeof o.data=="string"&&(i={statusCode:200,...JSON.parse(o.data)}),s({type:"SET_COMPILER_RESULTS",payload:{outputAssetRecord:{outputAsset:i}}})}),et.sendMessage(a.typeMessage,{method:a.method,arguments:JSON.stringify([a.args]),...a.socketProjectExecProps})}async executeHTTPService({dispatch:a,payloadService:s}){const r=s.type,o={method:s.method,arguments:JSON.stringify([s.args]),...s.socketProjectExecProps},i=await un.post(r,o),n=JSON.parse(i.payload);let d=n;n.statusCode!==200&&(n.error||(d={statusCode:n.statusCode,error:{message:n.message}})),typeof n.data=="string"&&(d={statusCode:200,...JSON.parse(n.data)}),a({type:"SET_COMPILER_RESULTS",payload:{outputAssetRecord:{outputAsset:d}}})}};Me(_e,"instance");let wt=_e;const De=wt.getInstance(),pn=({element:e,extraProps:a})=>{const{pageId:s}=te(),{compilerState:r,compilerDispatch:o}=J(),{dispatch:i,state:n}=H(),[d,l]=h.useState(void 0),c=n.editor.liveMode?W():n.editor.device,g=e.styles[c],u=e.content.button,f=(E,A)=>{E.dataTransfer.setData("componentType",A)},m=E=>{E.stopPropagation(),i({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},p=()=>{if(!n.editor.liveMode)return;const E=(g==null?void 0:g.background)||(g==null?void 0:g.backgroundColor);E&&(l(E),g.background=v(E))},x=()=>{if(!n.editor.liveMode)return;((g==null?void 0:g.background)||(g==null?void 0:g.backgroundColor))&&d&&(g.background=d,l(void 0))},v=E=>{const A=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(E),U=A?{r:parseInt(A[1],16),g:parseInt(A[2],16),b:parseInt(A[3],16)}:null;return`rgba(${(U==null?void 0:U.r)??0}, ${(U==null?void 0:U.g)??0}, ${(U==null?void 0:U.b)??0}, ${.9})`},w=n.editor.liveMode&&!(u!=null&&u.visibility)?{display:"none"}:u!=null&&u.visibility?{}:{opacity:"0.5"},T=E=>{if(E.preventDefault(),!!n.editor.liveMode){if(a){a.onClicked(E,{action:u.action||""});return}switch(u.action){case"COMPONENT_CONTROL":on({state:n,dispatch:i,method:u.method,componentToControl:{id:u.componentToControl.id,type:u.componentToControl.type}});break;case"SUBMIT":N();break}}},N=()=>{const E=b(u.submitValues),A=ve(JSON.stringify({tokens:E,[Ee]:window.__BUILDER__PAGE.alias}));o({type:"SET_CURRENT_RUNNING",payload:{currentRunning:u.path,outputAssetRecord:{pageId:s}}}),De.execute({contextService:r.contextService,dispatch:o,payloadService:{projectCompositeId:r.projectCompositeId,method:u.path,args:A,socketProjectExecProps:r.socketProjectExecProps,typeMessage:`${s}_${u.path}`}})},b=E=>{const A=/"([^"]*)"|(\S+)/g,U=[];let G;for(;(G=A.exec(E))!==null;)G[1]?U.push(G[1]):G[2]&&U.push(G[2]);return U},j=()=>t.jsxs(V,{style:{...g,...w},className:_({[`${e==null?void 0:e.animation}`]:n.editor.liveMode&&(e==null?void 0:e.animation)}),variant:(u==null?void 0:u.variant)||"default",size:(u==null?void 0:u.size)||"default",onClick:T,onMouseEnter:p,onMouseLeave:x,children:[(u==null?void 0:u.icon)&&(u==null?void 0:u.icon.trim())!==""&&t.jsx("img",{src:u.icon,alt:"icon not found"}),u.innerText.trim()!==""&&t.jsx("span",{children:u.innerText})]});return n.editor.liveMode?j():t.jsx("div",{style:w,draggable:!1,onDragStart:E=>f(E,"button"),onMouseEnter:()=>i({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:m,className:_("m-[5px] w-fit h-fit relative text-[16px] transition-all",{"p-[2px]":!n.editor.liveMode,"!border-2px] !border-blue-500 z-[300]":n.editor.selectedElement.id===e.id&&!n.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!n.editor.liveMode&&n.editor.hoveredElement.id===e.id,"!border-solid":n.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!n.editor.liveMode}),children:!Array.isArray(e.content)&&j()})},fn=({content:e,customData:a,extraProps:s})=>Array.isArray(e)?e.map(r=>t.jsx(ee,{element:r,customData:a,extraProps:s},r.id)):null,mn=({type:e,content:a,customData:s,extraProps:r})=>e===null?null:t.jsx(fn,{content:a,customData:s,extraProps:r}),hn=(e,a)=>({containerId:e,elementDetails:{content:[],id:C(),name:`Container ${a}`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",customProps:{assetFileName:""},canDelete:!0}}),gn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!0},{content:[],id:C(),name:`Container ${a}.2`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!0}],id:C(),name:`Two Columns ${a}`,styles:{Desktop:{...y,display:"flex",width:"100%"},Tablet:{...y,display:"flex",width:"100%"},Mobile:{...y,display:"flex",width:"100%"}},animation:"",type:"2Col",canDelete:!0}}),xn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!0},{content:[],id:C(),name:`Container ${a}.2`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!0},{content:[],id:C(),name:`Container ${a}.3`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!0}],id:C(),name:`Three Columns ${a}`,styles:{Desktop:{...y,display:"flex",width:"100%"},Tablet:{...y,display:"flex",width:"100%"},Mobile:{...y,display:"flex",width:"100%"}},animation:"",type:"3Col",canDelete:!0}}),yn=(e,a)=>({containerId:e,elementDetails:{content:{textPlain:{type:"textPlain",id:C(),as:"p",innerText:"Add your text here",key:""}},id:C(),name:`Text ${a}`,styles:{Desktop:{color:"#000000",...y},Tablet:{color:"#000000",...y},Mobile:{color:"#000000",...y}},animation:"",type:"text",canDelete:!0}}),bn=(e,a)=>({containerId:e,elementDetails:{content:{textInput:{subType:"text",id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Enter value...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1}},id:C(),name:`Input Text ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputText",canDelete:!0}}),vn=(e,a)=>({containerId:e,elementDetails:{content:{link:{type:"link",id:C(),href:"",innerText:"add link text here",customUrl:!1,key:"myLink"}},id:C(),name:`Link ${a}`,styles:{Desktop:{color:"blue",textDecoration:"underline",...y},Tablet:{color:"blue",textDecoration:"underline",...y},Mobile:{color:"blue",textDecoration:"underline",...y}},animation:"",type:"link",canDelete:!0}}),En=(e,a,s)=>({containerId:e,elementDetails:{content:{table:{id:C(),title:"My Table",columns:[{isEditable:!1,key:"id",name:"id",meta:{format:"text",options:[],isSelectable:!1}}],primaryKey:"",dataSourceMode:"dynamic",dataSourceType:"json",value:[],connectData:{path:"findMany",key:"data"},isEditable:!1,enableSelection:!1,search:{enabled:!1,searchCriteria:[]},pagination:{enabled:!0,pageSize:15,offset:0,orderBy:[],key:"rows"},actions:{details:{path:"findOne",key:"data",enable:!0,access:"public",redirect:""},insert:{path:"createOrUpdate",key:"data",enable:!0,access:"private"},update:{path:"createOrUpdate",key:"data",enable:!0,access:"private"},remove:{path:"remove",key:"data",enable:!0,access:"private"},sync:{path:"",key:"",enable:!0,access:"private",source:{from:"GOOGLE_SHEET",sheetId:"",sheetName:"",range:""},tableName:"",columns:[]}},hidddenColumns:[]}},id:C(),name:`Table ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"table",canDelete:!0}}),wn=(e,a)=>({containerId:e,elementDetails:{content:{button:{type:"button",id:C(),innerText:"Button",path:"",action:"",visibility:!0,submitValues:"",componentToControl:{id:"",type:""},method:{name:"",value:""},icon:"",variant:"default",size:"default"}},id:C(),name:`Button ${a}`,styles:{Desktop:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",...y},Tablet:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",...y},Mobile:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",...y}},animation:"",type:"button",canDelete:!0}}),jn=(e,a)=>({containerId:e,elementDetails:{content:{json:{id:C(),value:{results:[{id:1,name:"test",age:40},{id:2,name:"test-2",age:30}],limit:10,offset:0},dataSourceMode:"static",dataSourceType:"json"}},id:C(),name:`Json ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"json",canDelete:!0}}),Cn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!1},{content:[{content:{button:{type:"button",id:C(),innerText:"Run",action:"RUN",path:"",visibility:!0,icon:"",variant:"default",size:"default"}},id:C(),name:`Button ${a}.2`,styles:{Desktop:{backgroundColor:"#059669",backgroundPosition:"center",objectFit:"cover",backgroundRepeat:"no-repeat",textAlign:"center",opacity:"100%"},Tablet:{backgroundColor:"#059669",backgroundPosition:"center",objectFit:"cover",backgroundRepeat:"no-repeat",textAlign:"center",opacity:"100%"},Mobile:{backgroundColor:"#059669",backgroundPosition:"center",objectFit:"cover",backgroundRepeat:"no-repeat",textAlign:"center",opacity:"100%"}},animation:"",type:"button",canDelete:!1}],id:C(),name:`Container ${a}.4`,styles:{Desktop:{...y,width:"fit-content",display:"flex",marginTop:"0px",marginBottom:"0px",marginLeft:"auto",marginRight:"auto"},Tablet:{...y,width:"fit-content",display:"flex",marginTop:"0px",marginBottom:"0px",marginLeft:"auto",marginRight:"auto"},Mobile:{...y,width:"fit-content",display:"flex",marginTop:"0px",marginBottom:"0px",marginLeft:"auto",marginRight:"auto"}},animation:"",type:"container",canDelete:!1}],specialContent:{formGroup:{submit:"",fileNameKey:"file__names"}},id:C(),name:`Form ${a}`,styles:{Desktop:{...y,display:"flex",flexDirection:"column",gap:"5px"},Tablet:{...y,display:"flex",flexDirection:"column",gap:"5px"},Mobile:{...y,display:"flex",flexDirection:"column",gap:"5px"}},animation:"",type:"formGroup",canDelete:!0}}),Nn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!1}],specialContent:{customSourceContent:{path:"",key:"data",value:[],message:""}},id:C(),name:`Custom Source ${a}`,styles:{Desktop:{...y,display:"flex",flexDirection:"column",gap:"5px"},Tablet:{...y,display:"flex",flexDirection:"column",gap:"5px"},Mobile:{...y,display:"flex",flexDirection:"column",gap:"5px"}},animation:"",type:"customSourceContent",canDelete:!0}}),Sn=(e,a)=>({containerId:e,elementDetails:{content:{image:{type:"image",id:C(),src:"",alt:"Image not Found",key:"",fromBrowxy:!1,sourceType:"ASSETS",enableExpand:!1,cachedImage:{url:"",updated:null}}},id:C(),name:`Image ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"image",canDelete:!0}}),Tn=(e,a)=>({containerId:e,elementDetails:{content:{textareaInput:{id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Enter value...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,rows:10,cols:20,customPlaceholderValue:""}},id:C(),name:`Input Textarea ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputTextarea",canDelete:!0}}),An=(e,a)=>({containerId:e,elementDetails:{content:[{content:[{content:{textInput:{subType:"email",id:C(),name:"subject",value:"",label:{id:C(),type:"label",value:"subject",hidden:!1},placeholder:"add subject to email",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1}},id:C(),name:`Input Text ${a}.1`,styles:{Desktop:{textAlign:"left",opacity:"100%"},Tablet:{textAlign:"left",opacity:"100%"},Mobile:{textAlign:"left",opacity:"100%"}},animation:"",type:"inputText",canDelete:!1},{content:{textareaInput:{id:C(),name:"message",value:"",label:{id:C(),type:"label",value:"message",hidden:!1},placeholder:"write email message",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,rows:2,cols:20}},id:C(),name:`Input Textarea ${a}.2`,styles:{Desktop:{textAlign:"left",opacity:"100%"},Tablet:{textAlign:"left",opacity:"100%"},Mobile:{textAlign:"left",opacity:"100%"}},animation:"",type:"inputTextarea",canDelete:!1},{content:{button:{type:"button",id:C(),innerText:"Send Email",action:"NONE",path:"",visibility:!0,icon:"",variant:"default",size:"default"}},id:C(),name:`Button ${a}.3`,styles:{Desktop:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"},Tablet:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"},Mobile:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"}},animation:"",type:"button",canDelete:!1}],id:C(),name:`Container ${a}.4`,styles:{Desktop:{...y,width:"100%",display:"flex",flexDirection:"column"},Tablet:{...y,width:"100%",display:"flex",flexDirection:"column"},Mobile:{...y,width:"100%",display:"flex",flexDirection:"column"}},type:"container",canDelete:!1}],specialContent:{email:{title:"Contact us",subTitle:"Send an email",myMail:"",dialog:!1}},id:C(),name:`Mail ${a}`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"email",canDelete:!0}}),Dn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[{content:{textareaInput:{id:C(),name:"message",value:"",label:{id:C(),type:"label",value:"Message",hidden:!1},placeholder:"write message",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,rows:2,cols:20}},id:C(),name:`Input Textarea ${a}.1`,styles:{Desktop:{textAlign:"left",opacity:"100%"},Tablet:{textAlign:"left",opacity:"100%"},Mobile:{textAlign:"left",opacity:"100%"}},animation:"",type:"inputTextarea",canDelete:!1},{content:{button:{type:"button",id:C(),innerText:"Send Whatsapp",action:"NONE",path:"",visibility:!0,icon:"",variant:"default",size:"default"}},id:C(),name:`Button ${a}.2`,styles:{Desktop:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"},Tablet:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"},Mobile:{backgroundColor:"#0d9488",textAlign:"left",opacity:"100%"}},animation:"",type:"button",canDelete:!1}],id:C(),name:`Container ${a}.3`,styles:{Desktop:{...y,width:"100%",display:"flex",flexDirection:"column"},Tablet:{...y,width:"100%",display:"flex",flexDirection:"column"},Mobile:{...y,width:"100%",display:"flex",flexDirection:"column"}},animation:"",type:"container",canDelete:!1}],specialContent:{whatsapp:{title:"Contact us",subTitle:"Send a whatsapp",phoneNumber:"",dialog:!1}},id:C(),name:`Whatsapp ${a}`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"whatsapp",canDelete:!0}}),kn=(e,a)=>({containerId:e,elementDetails:{content:{selectInput:{id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Choose value...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,options:[],key:"",interactions:{filters:{}}}},id:C(),name:`Combobox ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"combobox",canDelete:!0}}),Mn=(e,a)=>({containerId:e,elementDetails:{content:{dateInput:{subType:"date",id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Select date...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,key:""}},id:C(),name:`Input Date ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputDate",canDelete:!0}}),In=(e,a)=>({containerId:e,elementDetails:{content:{numberInput:{subType:"number",id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Enter value...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1,min:"",max:"",step:1}},id:C(),name:`Input Number ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputNumber",canDelete:!0}}),Rn=(e,a)=>({containerId:e,elementDetails:{content:{fileInput:{id:C(),name:"",value:"",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Add file...",validationMessage:"",hidden:!1,selectionType:"SINGLE",fileTypes:{},maxFiles:1,maxSize:4,prefixText:"",compilerUploadId:C()}},id:C(),name:`Input File ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputFile",canDelete:!0}}),xt={width:"100dvw",height:"100dvh",paddingTop:"0px",paddingBottom:"0px",paddingLeft:"0px",paddingRight:"0px",marginTop:"0px",marginBottom:"0px",marginLeft:"0px",marginRight:"0px"},_n=(e,a)=>({containerId:e,elementDetails:{content:{iframe:{id:C(),disabled:!1,sourceType:"URL",source:"https://www.browxy.com",fullscreen:!0,sharedFolder:!1}},id:C(),name:`Iframe ${a}`,styles:{Desktop:{...y,...xt},Tablet:{...y,...xt},Mobile:{...y,...xt}},animation:"",type:"iframe",canDelete:!0}}),Ln=(e,a)=>{const s=C();return{containerId:e,elementDetails:{content:[{content:[{canDelete:!0,id:C(),name:`Text ${a}.1`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!1,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.2`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.2`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.3`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.3`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.4`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.4`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.5`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.5`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.6`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.6`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.7`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.7`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.8`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.8`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}},{content:[{canDelete:!0,id:C(),name:`Text ${a}.9`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${a}.9`,styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:s}}],specialContent:{grid:{columns:{Desktop:{cols:3,widths:["1fr"],widthType:"repeat"},Tablet:{cols:2,widths:["1fr"],widthType:"repeat"},Mobile:{cols:1,widths:["1fr"],widthType:"repeat"}}}},id:s,name:`Grid ${a}`,styles:{Desktop:{...y,width:"100%",display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"10px"},Tablet:{...y,width:"100%",display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},Mobile:{...y,width:"100%",display:"grid",gridTemplateColumns:"repeat(1, 1fr)",gap:"10px"}},animation:"",type:"grid",canDelete:!0}}},Pn=(e,a)=>({containerId:e,elementDetails:{content:{downloadLink:{id:C(),href:"",key:"data.assetLink",innerText:"Download",variant:"link",showIcon:!0,iconVariant:"download"}},id:C(),name:`Download ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"downloadLink",canDelete:!0}}),On=(e,a)=>({containerId:e,elementDetails:{content:{separator:{id:C(),orientation:"horizontal"}},id:C(),name:`Separator ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"separator",canDelete:!0}}),Un=(e,a)=>({containerId:e,elementDetails:{content:[{canDelete:!1,id:C(),name:`Image ${a}.1`,styles:{Desktop:{...y,width:"40px"},Tablet:{...y,width:"30px"},Mobile:{...y,width:"20px"}},type:"image",content:{image:{alt:"logo not found",disabled:!1,id:C(),key:"",src:"",fromBrowxy:!1,sourceType:"ASSETS",enableExpand:!1,cachedImage:{url:"",updated:null}}}},{canDelete:!1,id:C(),name:`Text ${a}.2`,styles:{Desktop:{...y,paddingLeft:"5px"},Tablet:{...y,paddingLeft:"5px"},Mobile:{...y}},type:"text",content:{textPlain:{as:"h5",disabled:!1,id:C(),innerText:"Title",key:""}}}],specialContent:{navbar:{id:C(),menuItems:[],position:"right",logo:!0,title:!0,hashNavigation:!1}},id:C(),name:`Navbar ${a}`,styles:{Desktop:{...y,display:"flex",alignItems:"center",height:"60px",paddingLeft:"5px",paddingRight:"5px",width:"100%",zIndex:"15"},Tablet:{...y,display:"flex",alignItems:"center",height:"50px",paddingLeft:"4px",paddingRight:"4px",width:"100%",zIndex:"15"},Mobile:{...y,display:"flex",alignItems:"center",height:"40px",paddingLeft:"2px",paddingRight:"2px",width:"100%",zIndex:"15"}},animation:"",type:"navbar",canDelete:!0}}),$n=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Container ${a}.1`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!1},{content:[],id:C(),name:`Container ${a}.2`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!1},{content:[],id:C(),name:`Container ${a}.3`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"container",canDelete:!1}],specialContent:{tabs:{id:C(),items:[{label:"Tab 1",access:"public",disabled:!1},{label:"Tab 2",access:"public",disabled:!1},{label:"Tab 3",access:"public",disabled:!1}],default:"Tab 1"}},id:C(),name:`Tabs ${a}`,styles:{Desktop:{...y,width:"100%"},Tablet:{...y,width:"100%"},Mobile:{...y,width:"100%"}},animation:"",type:"tabs",canDelete:!0}}),Fn=(e,a)=>({containerId:e,elementDetails:{content:{colorInput:{subType:"color",id:C(),name:"",value:"#000000",label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"Enter value...",validationMessage:"",disabled:!1,readOnly:!1,hidden:!1}},id:C(),name:`Input Color ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"inputColor",canDelete:!0}}),Gn=(e,a)=>({containerId:e,elementDetails:{content:{video:{type:"video",id:C(),src:"",key:"",loop:!1,autoplay:!1,muted:!0,fromBrowxy:!1,sourceType:"CUSTOM"}},id:C(),name:`Video ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"video",canDelete:!0}}),zn=(e,a)=>({containerId:e,elementDetails:{content:{audio:{type:"audio",id:C(),src:"",key:"",loop:!1,autoplay:!1,muted:!0,fromBrowxy:!1,sourceType:"CUSTOM"}},id:C(),name:`Audio ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"audio",canDelete:!0}}),Bn=(e,a)=>({containerId:e,elementDetails:{content:{checkbox:{id:C(),name:"",value:!1,label:{id:C(),type:"label",value:"Label",hidden:!1},placeholder:"",validationMessage:"",disabled:!1,hidden:!1,variant:"checkbox"}},id:C(),name:`Checkbox ${a}`,styles:{Desktop:{...y},Tablet:{...y},Mobile:{...y}},animation:"",type:"checkbox",canDelete:!0}}),Hn=(e,a)=>({containerId:e,elementDetails:{content:{emailButton:{type:"emailButton",id:C(),variant:"rounded",email:"",subject:"",body:""}},id:C(),name:`Email Button ${a}`,styles:{Desktop:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y},Tablet:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y},Mobile:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y}},animation:"",type:"emailButton",canDelete:!0}}),Vn=(e,a)=>({containerId:e,elementDetails:{content:{whatsappButton:{type:"whatsappButton",id:C(),variant:"rounded",phoneNumber:"",message:""}},id:C(),name:`Whatsapp Btn ${a}`,styles:{Desktop:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y},Tablet:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y},Mobile:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",width:"50px",height:"50px",borderRadius:"50%",padding:"5px",...y}},animation:"",type:"whatsappButton",canDelete:!0}}),Wn=(e,a)=>({containerId:e,elementDetails:{content:[{content:[],id:C(),name:`Bg-Image ${a}.1`,styles:{Desktop:{backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",position:"absolute",top:"0",left:"0",height:"100%",zIndex:"1",objectFit:"cover",backgroundRepeat:"no-repeat",width:"100%",backgroundImage:""},Tablet:{backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",position:"absolute",top:"0",left:"0",height:"100%",zIndex:"1",objectFit:"cover",backgroundRepeat:"no-repeat",width:"100%",backgroundImage:""},Mobile:{backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",position:"absolute",top:"0",left:"0",height:"100%",zIndex:"1",objectFit:"cover",backgroundRepeat:"no-repeat",width:"100%",backgroundImage:""}},type:"container",customProps:{assetFileName:"",parallaxBg:!0,cachedImage:{url:"",updated:null}},canDelete:!0},{content:[],id:C(),name:`Container ${a}.2`,styles:{Desktop:{opacity:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flexDirection:"column",zIndex:"3"},Tablet:{opacity:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flexDirection:"column",zIndex:"3"},Mobile:{opacity:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",flexDirection:"column",zIndex:"3"}},type:"container",customProps:{assetFileName:""},canDelete:!0}],id:C(),name:`Parallax ${a}`,styles:{Desktop:{width:"100%",height:"100vh",overflow:"hidden",display:"flex",alignItems:"center",justifyItems:"center",flexDirection:"column",justifyContent:"center"},Tablet:{width:"100%",height:"100vh",overflow:"hidden",display:"flex",alignItems:"center",justifyItems:"center",flexDirection:"column",justifyContent:"center"},Mobile:{width:"100%",height:"100vh",overflow:"hidden",display:"flex",alignItems:"center",justifyItems:"center",flexDirection:"column",justifyContent:"center"}},animation:"",type:"container",customProps:{assetFileName:""},canDelete:!0}}),Kn=(e,a)=>({containerId:e,elementDetails:{content:{gallery:{type:"gallery",id:C(),src:"",sourceType:"ASSETS",enableExpand:!1,images:[],cachedImage:{urls:[],updated:null}}},id:C(),name:`Gallery ${a}`,styles:{Desktop:{maxWidth:"512px"},Tablet:{maxWidth:"420px"},Mobile:{maxWidth:"360px"}},animation:"",type:"gallery",canDelete:!0}}),Jn=({id:e,type:a,index:s,contextService:r})=>{switch(a){case"container":return hn(e,s);case"2Col":return gn(e,s);case"3Col":return xn(e,s);case"grid":return Ln(e,s);case"text":return yn(e,s);case"inputText":return bn(e,s);case"inputDate":return Mn(e,s);case"inputTextarea":return Tn(e,s);case"combobox":return kn(e,s);case"checkbox":return Bn(e,s);case"inputNumber":return In(e,s);case"inputColor":return Fn(e,s);case"inputFile":return Rn(e,s);case"table":return En(e,s);case"customSourceContent":return Nn(e,s);case"json":return jn(e,s);case"link":return vn(e,s);case"downloadLink":return Pn(e,s);case"button":return wn(e,s);case"formGroup":return Cn(e,s);case"image":return Sn(e,s);case"video":return Gn(e,s);case"audio":return zn(e,s);case"email":return An(e,s);case"whatsapp":return Dn(e,s);case"iframe":return _n(e,s);case"separator":return On(e,s);case"navbar":return Un(e,s);case"tabs":return $n(e,s);case"emailButton":return Hn(e,s);case"whatsappButton":return Vn(e,s);case"parallax":return Wn(e,s);case"gallery":return Kn(e,s)}},Yn=({id:e,dispatch:a,type:s,index:r,contextService:o})=>{const i=Jn({id:e,type:s,index:r,contextService:o});a({type:"ADD_ELEMENT",payload:i})},qn=async({assetUrl:e,onprogress:a,failureCallback:s})=>{var o;let r=!1;try{const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);const n=(o=i.body)==null?void 0:o.getReader(),d=i.headers.get("Content-Length");let l=0;const c=[];for(;;){const{done:x,value:v}=n&&n.read?await n.read():{done:!0,value:""};if(x)break;c.push(v),l+=v.length,d?a(l/+d*100):r||(r=!0,a(-1))}const g=new Blob(c,{type:i.headers.get("Content-Type")||void 0}),u=Zn(i.headers.get("Content-Disposition")),f=Qn(i.headers.get("Content-Type")),m=await Xn(g,f.readAs),p=window.URL.createObjectURL(g);return{dataUrl:m,objectURL:p,fileName:u,readAs:f.readAs,type:f.type,error:null,statusCode:i.status}}catch(i){return s(i)}},Xn=(e,a)=>new Promise((s,r)=>{const o=new FileReader;o.onloadend=()=>s(o.result),o.onerror=r,a==="readAsText"?o.readAsText(e):o.readAsDataURL(e)}),fe=async({assetOutputType:e,assetUrl:a})=>{const o=await qn({assetUrl:a,onprogress:c=>{},failureCallback:c=>(console.error("download failure",c.message),{statusCode:400,error:c.message,dataUrl:null})}),{dataUrl:i,statusCode:n,error:d}=o,l=n<300?i:"";switch(e.toLowerCase()){case"image":case"video":case"audio":return{statusCode:n,data:l,error:d};case"json":return{statusCode:n,data:JSON.parse(l),error:d};default:return{statusCode:n,data:l,error:d}}},Zn=e=>{if(e&&e.indexOf("attachment")!==-1){const s=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e);if(s!=null&&s[1])return s[1].replace(/['"]/g,"")}return null},Qn=e=>{const[a,s]=e?e.split("/"):["",""];switch(a){case"image":case"video":case"audio":return{readAs:"readAsDataURL",category:a,type:s};default:return{readAs:"readAsText",category:a,type:s}}},la=h.createContext({data:{},isOpen:!1,setOpen:()=>{},setClose:()=>{}}),ei=({children:e})=>{const[a,s]=h.useState(!1),[r,o]=h.useState({}),[i,n]=h.useState(null),[d,l]=h.useState(!1);h.useEffect(()=>{l(!0)},[]);const c=async(u,f)=>{u&&(f&&o({...r,...await f()}),n(u),s(!0))},g=()=>{s(!1),o({})};return d?t.jsxs(la.Provider,{value:{data:r,setOpen:c,setClose:g,isOpen:a},children:[e,i]}):null},me=()=>{const e=h.useContext(la);if(!e)throw new Error("useModal must be used within the modal provider");return e},ti=({element:e,customData:a,extraProps:s})=>{const{id:r,content:o,styles:i,type:n}=e,{compilerState:d}=J(),{dispatch:l,state:c}=H(),{setOpen:g,setClose:u}=me();q();const[f,m]=h.useState(!1),{ref:p,inView:x}=oo({threshold:.2,triggerOnce:!0}),[v,w]=h.useState(null),T=c.editor.liveMode?W():c.editor.device,N=i[T];h.useEffect(()=>{var I,O,B,R,$,K,xe,Fe,le,re,ne;if(n==="container")if(e.customProps&&e.customProps.assetFileName&&e.customProps.assetFileName.trim()!==""){if(!c.editor.liveMode&&(O=(I=e.customProps)==null?void 0:I.cachedImage)!=null&&O.url&&((R=(B=e.customProps)==null?void 0:B.cachedImage)==null?void 0:R.url)!==""&&(K=($=e.customProps)==null?void 0:$.cachedImage)!=null&&K.updated&&j((Fe=(xe=e.customProps)==null?void 0:xe.cachedImage)==null?void 0:Fe.updated)){w(((le=e.customProps)==null?void 0:le.cachedImage).url);return}if(v!==null){if(!c.editor.liveMode&&!((ne=(re=e.customProps)==null?void 0:re.cachedImage)!=null&&ne.updated)){b({url:v,updated:Date.now(),waiting:!0});return}return}(je=>{(async()=>{const Je=await fe({assetOutputType:"image",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(`data/assets/${je}`)}`});b({url:Je.data,updated:Date.now(),waiting:!1}),w(Je.data),await Ue(500)})()})(e.customProps.assetFileName)}else"customProps"in e&&"assetFileName"in e.customProps&&e.customProps.assetFileName.trim()===""&&v!==null&&w(null)},[N,d.projectCompositeId,n,v,e==null?void 0:e.customProps,e,c.editor.liveMode]);const b=async({url:I,updated:O,waiting:B})=>{l({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,customProps:{...e.customProps,cachedImage:{url:I||"",updated:O}}}}}),B&&await Ue(500)},j=I=>!(Date.now()-(I||1)>36e5),M=(I,O)=>{if(c.editor.liveMode)return;const B=I.dataTransfer.getData("componentType");I.stopPropagation(),m(!1),z(B)},E=I=>{I.preventDefault(),!c.editor.liveMode&&["container","2Col","3Col","grid","parallax","__body"].includes(e.type||"")&&m(!0)},A=I=>{I.preventDefault(),!c.editor.liveMode&&["container","2Col","3Col","grid","parallax","__body"].includes(e.type||"")&&m(!1)},U=(I,O)=>{c.editor.liveMode||(I.dataTransfer.effectAllowed="move",I.dataTransfer.setData("componentType",O))},G=I=>{c.editor.liveMode||(I.stopPropagation(),l({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}}))},z=I=>{switch(I){case"container":case"2Col":case"3Col":case"grid":case"parallax":case"text":case"inputText":case"inputNumber":case"inputDate":case"inputTextarea":case"inputColor":case"combobox":case"checkbox":case"inputFile":case"table":case"customSourceContent":case"json":case"link":case"button":case"downloadLink":case"formGroup":case"email":case"whatsapp":case"image":case"gallery":case"video":case"audio":case"iframe":case"separator":case"navbar":case"tabs":case"emailButton":case"whatsappButton":Yn({id:r,type:I,dispatch:l,index:c.editor.index+1,contextService:d.contextService});break}},k=()=>{if(n!=="container")return{...N};const I=N==null?void 0:N.background,O=I==null?void 0:I.includes("gradient"),B=!!(v&&v!==""),R={...N};(O||B)&&delete R.background;let $;return O&&B?$=`${I}, url("${v}")`:O?$=I:B&&($=`url("${v}")`),c.editor.liveMode?{...R,...$?{backgroundImage:$}:{}}:!c.editor.liveMode&&N.position&&N.position==="fixed"?{...R,...$?{backgroundImage:$}:{},position:"absolute",overflow:"visible"}:!c.editor.liveMode&&N.backgroundImage||!c.editor.liveMode&&N.backgroundImage===""?{...R,width:"calc(100% - 20px)",...$?{backgroundImage:$}:{}}:{...R,...$?{backgroundImage:$}:{},...R.overflow?R.overflow==="hidden"?{overflow:"visible"}:{overflow:"hidden"}:{}}};return t.jsx("div",{ref:p,id:r,style:{...k()},className:_("relative transition-all group",{"p-4":!c.editor.liveMode,"py-12":!c.editor.liveMode&&n==="__body","w-full":n==="container"||n==="2Col"||n==="3Col"||n==="grid"||n==="parallax","h-fit":n==="container","h-[100dvh] overflow-scroll":n==="__body","flex flex-col md:!flex-row":n==="2Col"||n==="3Col","!border-[2px] !border-blue-500  z-[300]":c.editor.selectedElement.id===r&&!c.editor.liveMode&&c.editor.selectedElement.type!=="__body"&&!f,"hover:!border-[3px] hover:!border-emerald-600":!c.editor.liveMode&&c.editor.hoveredElement.id===e.id,"!border-yellow-400 !border-4":c.editor.selectedElement.id===r&&!c.editor.liveMode&&c.editor.selectedElement.type==="__body","!border-solid":c.editor.selectedElement.id===r&&!c.editor.liveMode,"border-dashed border-[1px] border-muted-foreground":!c.editor.liveMode,"!border-dotted border-[3px] !border-orange-500":f&&!c.editor.liveMode,"opacity-0":c.editor.liveMode&&!x,[`${e==null?void 0:e.animation}`]:c.editor.liveMode&&(e==null?void 0:e.animation)&&x}),onDragStart:I=>U(I,"container"),onDragOver:E,onDragLeave:A,onDrop:I=>M(I),onMouseEnter:()=>{c.editor.liveMode||l({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}})},onMouseOut:()=>{c.editor.liveMode||m(!1)},onClick:G,draggable:!1,children:t.jsx(mn,{content:o,type:e.type,customData:a,extraProps:s})})},ca=h.createContext(void 0),si=({children:e})=>{const[a,s]=h.useState({}),r=h.useRef(null),[o,i]=h.useState(0),[n,d]=h.useState(""),l=({id:p,key:x,value:v})=>{d(p),s(w=>{const N=(w[p]||[{id:p,key:x,value:v}]).map(b=>b.id===p?{...b,value:v}:b);return{...w,[p]:N}})},c=p=>{s(x=>({...x,[p.id]:[...x[p.id]||[],p]}))},g=(p,x)=>{s(v=>({...v,[x]:(v[x]||[]).filter(w=>w.id!==x)}))},u=p=>{r.current=p},f=p=>{i(p)},m=()=>{s({}),r.current=null};return t.jsx(ca.Provider,{value:{values:a,formFileRef:r.current,uploadPercentage:o,onUploadProgress:f,handleFormContextChange:l,addInput:c,handleFormFileRef:u,lastComponentUpdated:n,removeInput:g,resetForm:m},children:e})},he=()=>{const e=h.useContext(ca);if(!e)throw new Error("useFormContext must be used within a FormProvider");return e},ai=e=>{switch(e){case"inputText":return"textInput";case"inputNumber":return"numberInput";case"inputDate":return"dateInput";case"inputTextarea":return"textareaInput";case"combobox":return"selectInput";case"inputColor":return"colorInput";case"checkbox":return"checkbox";default:return""}},oi=(e,a)=>{var s;return((s=e[a])==null?void 0:s.name)||null},Qt=(e,a)=>{const s=[];try{const r=(o,i)=>{var l;const n=ai(o.type||"");let d="";switch(o.type){case"inputText":case"inputNumber":case"inputDate":case"inputTextarea":case"combobox":case"inputColor":if(d=oi(o.content,n),d===null||d.trim()===""){if(a)throw new Error("You must provide a valid name input");Array.isArray(o.content)?o.content.forEach(c=>r(c,i)):r(o,i)}i.push({id:o.content[n].id,key:d?d.trim():"",value:((l=o.content[n])==null?void 0:l.value.toString())||"",type:o.type});break;default:break}Array.isArray(o.content)&&o.content.forEach(c=>r(c,i))};e.forEach(o=>r(o,s))}catch{return null}return s},ua=({form:e,url:a,onUploadError:s,onUploadSuccess:r,onProgress:o,xhrFields:i,props:n})=>{const d=new FormData(e),l=new XMLHttpRequest;l.open("POST",a,!0),i!=null&&i.withCredentials&&(l.withCredentials=!0),l.upload.onprogress=c=>{if(c.lengthComputable){const g=Math.round(c.loaded/c.total*100);o(g)}},l.onload=()=>{l.status===200?r({message:l.responseText,data:n}):s(l.statusText)},l.onerror=()=>{s("Error during upload")},l.send(d)},ri=({element:e})=>{var M;const{toast:a}=q(),{pageId:s}=te(),{dispatch:r,state:o}=H(),{compilerState:i,compilerDispatch:n}=J(),{addInput:d,formFileRef:l,onUploadProgress:c}=he(),g=e.styles,u=(M=e.specialContent)==null?void 0:M.formGroup;h.useEffect(()=>{const E=Qt(Array.isArray(e.content)?e.content:[],!1);E!==null&&E.forEach(A=>{d(A)})},[]);const f=(E,A)=>{E.dataTransfer.setData("componentType",A)},m=E=>{E.stopPropagation(),r({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},p=E=>{console.error(E),a({title:"Error",description:E,variant:"destructive"})},x=E=>{c(E)},v=({data:E})=>{const{jsonEncoded:A,submitPath:U,projectCompositeId:G,pageId:z,socketProjectExecProps:k,typeMessage:D}=E;n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:U,outputAssetRecord:{pageId:z}}}),De.execute({contextService:i.contextService,dispatch:n,payloadService:{hasExecutionId:!0,projectCompositeId:G,method:U,args:A,socketProjectExecProps:k,typeMessage:D}})},w=async({jsonEncoded:E,submitPath:A,projectCompositeId:U,pageId:G,socketProjectExecProps:z,typeMessage:k})=>{ua({form:l,url:Y.UPLOAD_FILE_URL,onProgress:x,onUploadError:p,onUploadSuccess:v,props:{jsonEncoded:E,submitPath:A,projectCompositeId:U,pageId:G,socketProjectExecProps:z,typeMessage:k}})},T=E=>{if(E.preventDefault(),!!o.editor.liveMode&&(u==null?void 0:u.submit.trim())!=="")try{const A=u==null?void 0:u.submit;if(!A||A.trim()===""){a({title:"Error",description:"You must provide a submit path",variant:"destructive"});return}const U=Qt(Array.isArray(e.content)?e.content:[],!0);if((U===null||!U.length)&&l===null){a({title:"Error",description:"You must provide a valid name input",variant:"destructive"});return}const G={};if(U)for(let D=0;D<U.length;D++)G[U[D].key.replace(/"/g,"")]=U[D].value;const z=[];if(l){const{alias:D,isShared:I}=window.__BUILDER__PAGE,O=new FormData(l);for(const B of O.entries()){const R=I?`${D}/${B[0]}`:B[0];z.push(R)}if(z.length>0){const B=(u==null?void 0:u.fileNameKey)||"file__names";G[B]=z.join(",")}}const k=ve(JSON.stringify({form:G,[Ee]:window.__BUILDER__PAGE.alias}));z.length>0?w({jsonEncoded:k,submitPath:A,projectCompositeId:i.projectCompositeId,pageId:s,socketProjectExecProps:i.socketProjectExecProps,typeMessage:`${s}_${A}`}):(n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:A,outputAssetRecord:{pageId:s}}}),De.execute({contextService:i.contextService,dispatch:n,payloadService:{projectCompositeId:i.projectCompositeId,method:A,args:k,socketProjectExecProps:i.socketProjectExecProps,typeMessage:`${s}_${A}`}}))}catch(A){console.error(A)}},N=E=>{E.preventDefault(),o.editor.liveMode},b=(E,{action:A})=>{switch(A){case"RUN":T(E);break;case"STOP":N(E);break;default:console.error(`Function ${A} not found.`)}};return t.jsx("form",{style:{...g,display:"flex",gap:"5px",flexDirection:"column"},className:_("w-full transition-all",{"p-4":!o.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode,[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),draggable:!1,onDragStart:E=>f(E,"formGroup"),onMouseEnter:()=>{o.editor.liveMode||r({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}})},onClick:m,children:Array.isArray(e.content)&&e.content.map(E=>t.jsx(ee,{element:E,extraProps:{onClicked:b}},E.id))})},ni=ke("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ge({className:e,variant:a,...s}){return t.jsx("div",{className:S(ni({variant:a}),e),...s})}const pa=ro,fa=no,ma=io,Lt=L.forwardRef(({className:e,sideOffset:a=4,...s},r)=>t.jsx(ps,{ref:r,sideOffset:a,className:S("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));Lt.displayName=ps.displayName;const Le=({title:e,children:a})=>t.jsx(pa,{children:t.jsxs(fa,{children:[t.jsx(ma,{asChild:!0,children:a}),t.jsx(Lt,{children:t.jsx("p",{children:e})})]})}),we=({element:e})=>{const{state:a,dispatch:s}=H(),{toast:r}=q(),o=a.editor.elements[0].content.length,i=a.editor.elements[0].content.findIndex(u=>u.id===e.id),n=()=>{s({type:"DELETE_ELEMENT",payload:{elementDetails:e}})},d=u=>{s({type:"MOVE_ELEMENT",payload:{direction:u,elementId:e.id}})},l=u=>{if(Array.isArray(u))return u.map(f=>l(f));if(typeof u=="object"&&u!==null){const f={...u};"id"in f&&(f.id=C());for(const m in f)typeof f[m]=="object"&&(f[m]=l(f[m]));return f}return u},c=async()=>{const u=window.structuredClone(e),f=l(u);await navigator.clipboard.writeText(JSON.stringify({componentClipboard:f})),g("Component copy to the clipboard.","default")},g=(u,f)=>{r({title:u,variant:f,duration:3e3})};return t.jsx("div",{className:_("absolute bg-primary px-2.5 py-1 text-xs font-bold  -top-[25px] -right-[1px] rounded-none rounded-t-lg",{hidden:!a.editor.selectedElement.canDelete}),children:t.jsxs("div",{className:"flex gap-3",children:[i>=0&&t.jsx(Le,{children:t.jsx(lo,{size:16,className:"stroke-white cursor-pointer",onClick:c}),title:"Copy component"}),i>0&&t.jsx(Le,{children:t.jsx(co,{size:16,className:"stroke-white cursor-pointer",onClick:()=>d("UP")}),title:"Move Up"}),i>-1&&i<o-1&&t.jsx(Le,{children:t.jsx(uo,{size:16,className:"stroke-white cursor-pointer",onClick:()=>d("DOWN")}),title:"Move Down"}),a.editor.selectedElement.canDelete&&t.jsx(Le,{children:t.jsx(fs,{size:16,className:"stroke-white cursor-pointer",onClick:n}),title:"Remove"})]})})},ii=({element:e})=>{const{dispatch:a,state:s}=H(),{handleFormContextChange:r}=he(),o=s.editor.liveMode?W():s.editor.device,i=e.styles[o],n=e.content.textInput,[d,l]=h.useState(n.value||"");h.useEffect(()=>{n.fireChange&&u({target:{value:n.value}})},[n.fireChange]);const c=(f,m)=>{f.dataTransfer.setData("componentType",m)},g=f=>{f.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function u(f){l(f.target.value),r({id:n.id,key:n.name,value:f.target.value}),a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,textInput:{...n,value:f.target.value,fireChange:!1}}}}})}return t.jsxs("div",{draggable:"false",onDragStart:f=>c(f,"inputText"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:g,className:_(`m-[5px] relative text-[16px] transition-all ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"w-full p-1",style:i,children:[t.jsx("label",{htmlFor:n.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:n.label.hidden}),children:n.label.value}),t.jsx(Q,{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",type:n.hidden?"hidden":"text",id:n.id,name:n.name,placeholder:n.placeholder?n.placeholder:"Enter value...",disabled:n.disabled||!1,value:d,onChange:f=>u(f),readOnly:n.readOnly||!1})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},di=({element:e})=>{const{toast:a}=q(),{dispatch:s,state:r}=H(),o=r.editor.liveMode?W():r.editor.device,i=e.styles[o],n=e.content.json,d=(g,u)=>{g.dataTransfer.setData("componentType",u)},l=g=>{g.stopPropagation(),s({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},c=()=>{try{return n.dataSourceMode==="static"?n.dataSourceType==="json"?JSON.stringify(n.value,null,2):typeof n.value=="string"?JSON.stringify(Nr(n.value),null,2):JSON.stringify(n.value,null,2):null}catch(g){return a({title:"Error",description:g.message,variant:"destructive"}),null}};return t.jsxs("div",{draggable:!1,onDragStart:g=>d(g,"json"),onMouseEnter:()=>s({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:l,className:_(`w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center ${!r.editor.liveMode&&r.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!r.editor.liveMode,"!border-blue-500":r.editor.selectedElement.id===e.id,"!border-solid":r.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!r.editor.liveMode}),children:[r.editor.selectedElement.id===e.id&&!r.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:r.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsx("div",{className:"w-full",style:i,children:t.jsx("pre",{children:c()||"{}"})}),r.editor.selectedElement.id===e.id&&!r.editor.liveMode&&t.jsx(we,{element:e})]})},li=({element:e,customData:a})=>{const{projectId:s}=te(),{dispatch:r,state:o}=H(),i=(m,p)=>{m.dataTransfer.setData("componentType",p)},n=m=>{m.stopPropagation(),r({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},d=o.editor.liveMode?W():o.editor.device,l=e.styles[d],c=e.content.link,g=()=>{if(a)if(c.key&&typeof c.key=="string"){const p=a[c.key];return u(p)?p:`/${p}`}else return c.href;return c.customUrl?c.href:`/${c.href}`},u=m=>{try{return new URL(m),!0}catch{return!1}};return o.editor.liveMode?c.href.startsWith("#")?t.jsx("a",{href:c.href,style:l,className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:c.innerText}):t.jsx(Oe,{to:`${g()}`||"#",style:l,className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:c.innerText}):t.jsx("div",{style:l,draggable:!1,onDragStart:m=>i(m,"link"),onMouseEnter:()=>r({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:n,className:_("w-fit h-fit m-[5px] relative text-[16px] transition-all",{"p-[2px]":!o.editor.liveMode,"w-full":!o.editor.liveMode&&c.innerText.trim()==="","!border-[2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode}),children:!o.editor.previewMode&&!o.editor.liveMode&&t.jsx("span",{contentEditable:!o.editor.liveMode,onBlur:m=>{const p=m.target;r({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...c,link:{innerText:p.innerText,href:c.href||"#"}}}}})},suppressContentEditableWarning:!0,children:!Array.isArray(e.content)&&c.innerText})})},ha=h.forwardRef(({className:e,...a},s)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:s,className:S("w-full caption-bottom text-sm",e),...a})}));ha.displayName="Table";const ga=h.forwardRef(({className:e,...a},s)=>t.jsx("thead",{ref:s,className:S("[&_tr]:border-b",e),...a}));ga.displayName="TableHeader";const xa=h.forwardRef(({className:e,...a},s)=>t.jsx("tbody",{ref:s,className:S("[&_tr:last-child]:border-0",e),...a}));xa.displayName="TableBody";const ci=h.forwardRef(({className:e,...a},s)=>t.jsx("tfoot",{ref:s,className:S("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a}));ci.displayName="TableFooter";const Qe=h.forwardRef(({className:e,...a},s)=>t.jsx("tr",{ref:s,className:S("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));Qe.displayName="TableRow";const ya=h.forwardRef(({className:e,...a},s)=>t.jsx("th",{ref:s,className:S("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));ya.displayName="TableHead";const jt=h.forwardRef(({className:e,...a},s)=>t.jsx("td",{ref:s,className:S("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));jt.displayName="TableCell";const ui=h.forwardRef(({className:e,...a},s)=>t.jsx("caption",{ref:s,className:S("mt-4 text-sm text-muted-foreground",e),...a}));ui.displayName="TableCaption";const Ne=xo,Pe=bo,Se=yo,ye=L.forwardRef(({className:e,children:a,...s},r)=>t.jsxs(ms,{ref:r,className:S("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,t.jsx(po,{asChild:!0,children:t.jsx(hs,{className:"h-4 w-4 opacity-50"})})]}));ye.displayName=ms.displayName;const ba=L.forwardRef(({className:e,...a},s)=>t.jsx(gs,{ref:s,className:S("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(xs,{className:"h-4 w-4"})}));ba.displayName=gs.displayName;const va=L.forwardRef(({className:e,...a},s)=>t.jsx(ys,{ref:s,className:S("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(hs,{className:"h-4 w-4"})}));va.displayName=ys.displayName;const be=L.forwardRef(({className:e,children:a,position:s="popper",...r},o)=>t.jsx(fo,{children:t.jsxs(bs,{ref:o,className:S("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[t.jsx(ba,{}),t.jsx(mo,{className:S("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(va,{})]})}));be.displayName=bs.displayName;const Te=L.forwardRef(({className:e,...a},s)=>t.jsx(vs,{ref:s,className:S("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a}));Te.displayName=vs.displayName;const ue=L.forwardRef(({className:e,children:a,...s},r)=>t.jsxs(Es,{ref:r,className:S("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(ho,{children:t.jsx(At,{className:"h-4 w-4"})})}),t.jsx(go,{children:a})]}));ue.displayName=Es.displayName;const pi=L.forwardRef(({className:e,...a},s)=>t.jsx(ws,{ref:s,className:S("-mx-1 my-1 h-px bg-muted",e),...a}));pi.displayName=ws.displayName;const Ea=wo,wa=jo,fi=L.forwardRef(({className:e,inset:a,children:s,...r},o)=>t.jsxs(js,{ref:o,className:S("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",e),...r,children:[s,t.jsx(Cs,{className:"ml-auto h-4 w-4"})]}));fi.displayName=js.displayName;const mi=L.forwardRef(({className:e,...a},s)=>t.jsx(Ns,{ref:s,className:S("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}));mi.displayName=Ns.displayName;const Pt=L.forwardRef(({className:e,sideOffset:a=4,...s},r)=>t.jsx(vo,{children:t.jsx(Ss,{ref:r,sideOffset:a,className:S("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Pt.displayName=Ss.displayName;const ja=L.forwardRef(({className:e,inset:a,...s},r)=>t.jsx(Ts,{ref:r,className:S("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",e),...s}));ja.displayName=Ts.displayName;const Ca=L.forwardRef(({className:e,children:a,checked:s,...r},o)=>t.jsxs(As,{ref:o,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Ds,{children:t.jsx(At,{className:"h-4 w-4"})})}),a]}));Ca.displayName=As.displayName;const hi=L.forwardRef(({className:e,children:a,...s},r)=>t.jsxs(ks,{ref:r,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(Ds,{children:t.jsx(Eo,{className:"h-2 w-2 fill-current"})})}),a]}));hi.displayName=ks.displayName;const gi=L.forwardRef(({className:e,inset:a,...s},r)=>t.jsx(Ms,{ref:r,className:S("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...s}));gi.displayName=Ms.displayName;const xi=L.forwardRef(({className:e,...a},s)=>t.jsx(Is,{ref:s,className:S("-mx-1 my-1 h-px bg-muted",e),...a}));xi.displayName=Is.displayName;const yi=({header:e})=>e.column.getCanResize()===!1?t.jsx(t.Fragment,{}):t.jsx("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"absolute top-0 right-0 cursor-col-resize w-px h-full bg-gray-800 hover:bg-gray-700 hover:w-2",style:{userSelect:"none",touchAction:"none"}}),dt=h.forwardRef(({className:e,...a},s)=>t.jsx("textarea",{className:S("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));dt.displayName="Textarea";const bi=({column:e,handleInputChange:a,formValues:s})=>{switch(e.meta.format){case"select":return t.jsxs(Ne,{value:s[e.key]||"",onValueChange:r=>a({target:{value:r,name:`ADD_${e.key}`}}),children:[t.jsx(ye,{className:"w-[97%] m-auto text-black",children:t.jsx(Se,{placeholder:"Choose an option"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select..."}),e.meta.options.map((r,o)=>t.jsx(ue,{value:r.value,children:r.text},`${o}_${r.value}`))]})})]});case"textarea":return t.jsx(dt,{id:`ADD_${e.key}`,name:`ADD_${e.key}`,value:s[e.key]||"",onChange:r=>a(r),className:"mt-1",rows:5});default:return t.jsx(Q,{id:`ADD_${e.key}`,name:`ADD_${e.key}`,type:e.meta.format,value:s[e.key]||"",onChange:r=>a(r),className:"mt-1"})}},vi=({table:e,tabChange:a})=>{const s=e.options.meta,r=s.actions.insert,{toast:o}=q(),{compilerState:i,compilerDispatch:n}=J(),[d,l]=h.useState(null),[c,g]=h.useState(!1),[u,f]=h.useState([]),[m,p]=h.useState({}),{pageId:x}=te();h.useEffect(()=>{v()},[]),h.useEffect(()=>{var j,M;if(i.currentRunning!==`INSERT_${r.path}`||d!==null)return;const b=i.outputAssetPage[x||""];if(x&&b&&b.outputAsset!==null&&"error"in b.outputAsset){o({title:"Error",description:((M=(j=b.outputAsset)==null?void 0:j.error)==null?void 0:M.messagee)||"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:x}}});return}if(x&&b&&b.outputAsset!==null&&r.key in b.outputAsset){if(b.outputAsset[r.key].id===null){o({title:"Error",description:"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:x}}});return}x&&b&&b.outputAsset!==null&&r.key in b.outputAsset&&(l(b.outputAsset[r.key]),s.addRow(b.outputAsset[r.key].id,m),a(""),g(!1),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:x}}}))}},[i.outputAssetPage,i.currentRunning,r.key,r.path,l,d,m,s,n,o,x,a]);const v=()=>{l(null);const b=Object.values(e.options.columns.filter(j=>j.id!=="#_Actions"&&j.id!=="#_Select").reduce((j,M)=>{const E=M.accessorKey;return j[E]={key:E,header:M.header,meta:M.meta},j},{}));p(b.reduce((j,M)=>(j[M.key]=M.key!=="id"?"":null,j),{})),g(!0),f(b)},w=()=>{l(null);const b=ve(JSON.stringify({rows:m,[Ee]:window.__BUILDER__PAGE.alias}));n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`INSERT_${r.path}`,outputAssetRecord:{pageId:x}}}),De.execute({contextService:i.contextService,dispatch:n,payloadService:{projectCompositeId:i.projectCompositeId,method:r.path,args:b,socketProjectExecProps:i.socketProjectExecProps,typeMessage:`${x}_${r.path}`}})},T=b=>{const[,j]=b.target.name.split("_");p(M=>({...M,[j]:b.target.value}))},N=b=>{if(!e.getHeaderGroups().length)return"auto";const j=e.getHeaderGroups()[0].headers.find(M=>M.id===b);return(j==null?void 0:j.getSize())||"auto"};return t.jsx("section",{className:"mt-4",children:c&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-col overflow-x-auto",children:t.jsx("div",{className:"flex gap-1 my-2",style:{width:e.getTotalSize(),minWidth:"100%"},children:u.filter(b=>b.key!=="id").map(b=>t.jsxs(se,{style:{width:N(b.key)},children:[b.header,t.jsx(bi,{handleInputChange:T,column:b,formValues:m})]},b.key))})}),t.jsxs("div",{className:"flex my-3 ml-auto mr-3 items-center justify-end w-fit gap-3",children:[t.jsx(V,{onClick:()=>{a(""),g(!1)},className:"w-20 text-red-700 hover:bg-red-700 hover:text-white",variant:"outline",children:"Cancel"}),t.jsx(V,{onClick:w,className:"w-20 bg-emerald-600 hover:bg-emerald-700",children:"Add"})]})]})})},Na=Co,Ot=L.forwardRef(({className:e,...a},s)=>t.jsx(Rs,{ref:s,className:S("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));Ot.displayName=Rs.displayName;const tt=L.forwardRef(({className:e,...a},s)=>t.jsx(_s,{ref:s,className:S("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));tt.displayName=_s.displayName;const st=L.forwardRef(({className:e,...a},s)=>t.jsx(Ls,{ref:s,className:S("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));st.displayName=Ls.displayName;const Sa=h.createContext(null),Ut=()=>{const e=h.useContext(Sa);if(!e)throw new Error("useFileUpload must be used within a FileUploaderProvider");return e},$t=h.forwardRef(({className:e,dropzoneOptions:a,value:s,onValueChange:r,reSelect:o,orientation:i="vertical",children:n,dir:d,...l},c)=>{const[g,u]=h.useState(!1),[f,m]=h.useState(!1),[p,x]=h.useState(-1),{accept:v={"image/*":[".jpg",".jpeg",".png",".gif",".webp"],"application/pdf":[".pdf"],"application/zip":[".zip"],"audio/*":[".mp3",".wav",".ogg"],"video/*":[".mp4",".webm",".mov"],"application/json":[".json"],"application/msword":[".doc",".docx"],"application/vnd.ms-excel":[".xls",".xlsx"],"application/vnd.ms-powerpoint":[".ppt",".pptx"]},maxFiles:w=1,maxSize:T=4*1024*1024,multiple:N=!1}=a,b=w===1?!0:o,j=d==="rtl"?"rtl":"ltr",M=h.useCallback(z=>{if(!s)return;const k=s.filter((D,I)=>I!==z);r(k)},[s,r]),E=h.useCallback(z=>{var B;if(z.preventDefault(),z.stopPropagation(),!s)return;const k=()=>{const R=p+1;x(R>s.length-1?0:R)},D=()=>{const R=p-1;x(R<0?s.length-1:R)},I=i==="horizontal"?j==="ltr"?"ArrowLeft":"ArrowRight":"ArrowUp",O=i==="horizontal"?j==="ltr"?"ArrowRight":"ArrowLeft":"ArrowDown";if(z.key===O)k();else if(z.key===I)D();else if(z.key==="Enter"||z.key==="Space")p===-1&&((B=G.inputRef.current)==null||B.click());else if(z.key==="Delete"||z.key==="Backspace"){if(p!==-1){if(M(p),s.length-1===0){x(-1);return}D()}}else z.key==="Escape"&&x(-1)},[s,p,M]),A=h.useCallback((z,k)=>{var O,B;const D=z;if(!D){mt.error("file error , probably too big");return}const I=s?[...s]:[];if(b&&I.splice(0,I.length),D.forEach(R=>{I.length<w&&I.push(R)}),r(I),k.length>0)for(let R=0;R<k.length;R++){if(((O=k[R].errors[0])==null?void 0:O.code)==="file-too-large"){mt.error(`File is too large. Max size is ${T/1024/1024}MB`);break}if((B=k[R].errors[0])!=null&&B.message){mt.error(k[R].errors[0].message);break}}},[b,s]);h.useEffect(()=>{if(s){if(s.length===w){m(!0);return}m(!1)}},[s,w]);const G=No({...a||{accept:v,maxFiles:w,maxSize:T,multiple:N},onDrop:A,onDropRejected:()=>u(!0),onDropAccepted:()=>u(!1)});return t.jsx(Sa.Provider,{value:{dropzoneState:G,isLOF:f,isFileTooBig:g,removeFileFromSet:M,activeIndex:p,setActiveIndex:x,orientation:i,direction:j},children:t.jsx("div",{ref:c,tabIndex:0,onKeyDownCapture:E,className:S("grid w-full focus:outline-none overflow-hidden ",e,{"gap-2":s&&s.length>0}),dir:d,...l,children:n})})});$t.displayName="FileUploader";const Ft=h.forwardRef(({children:e,className:a,...s},r)=>{const{orientation:o}=Ut(),i=h.useRef(null);return t.jsx("div",{className:S("w-full px-1"),ref:i,"aria-description":"content file holder",children:t.jsx("div",{...s,ref:r,className:S("flex rounded-xl gap-1",o==="horizontal"?"flex-raw flex-wrap":"flex-col",a),children:e})})});Ft.displayName="FileUploaderContent";const Gt=h.forwardRef(({className:e,index:a,children:s,...r},o)=>{const{removeFileFromSet:i,activeIndex:n,direction:d}=Ut(),l=a===n;return t.jsxs("div",{ref:o,className:S(Qs({variant:"ghost"}),"h-6 p-1 justify-between cursor-pointer relative",e,l?"bg-muted":""),...r,children:[t.jsx("div",{className:"font-medium leading-none tracking-tight flex items-center gap-1.5 h-full w-full",children:s}),t.jsxs("button",{type:"button",className:S("absolute",d==="rtl"?"top-1 left-1":"top-1 right-1"),onClick:()=>i(a),children:[t.jsxs("span",{className:"sr-only",children:["remove item ",a]}),t.jsx(fs,{className:"w-4 h-4 hover:stroke-destructive duration-200 ease-in-out"})]})]})});Gt.displayName="FileUploaderItem";const zt=h.forwardRef(({className:e,inputName:a,inputId:s,children:r,...o},i)=>{const{dropzoneState:n,isFileTooBig:d,isLOF:l}=Ut(),c=l?{}:n.getRootProps();return t.jsxs("div",{ref:i,...o,className:`relative w-full ${l?"opacity-50 cursor-not-allowed ":"cursor-pointer "}`,children:[t.jsx("div",{className:S(`w-full rounded-lg duration-300 ease-in-out
         ${n.isDragAccept?"border-green-500":n.isDragReject||d?"border-red-500":"border-gray-300"}`,e),...c,children:r}),t.jsx(Q,{ref:n.inputRef,disabled:l,...n.getInputProps(),className:`${l?"cursor-not-allowed":""}`,name:a,id:s})]})});zt.displayName="FileInput";const Bt=L.forwardRef(({className:e,valueClassName:a,value:s,position:r="end",label:o,...i},n)=>{const d=S("absolute -top-0.5 left-0 h-fit px-4 w-full items-center hidden"),l=()=>t.jsx("span",{className:S("hidden",r==="start-outside"&&"block text-primary",r==="follow"&&S(d,"flex justify-end text-primary-foreground"),r==="start"&&S(d,"flex justify-start text-primary-foreground"),r==="end"&&S(d,"flex justify-end text-primary"),r==="end-outside"&&"block text-primary",a),children:typeof o=="function"?o(s):`${s}%`});return t.jsxs("div",{className:"flex items-center gap-2",children:[r==="start-outside"&&t.jsx(l,{}),t.jsxs(So,{ref:n,className:S("relative h-5 w-full overflow-hidden rounded-full bg-secondary",e),...i,children:[t.jsx(To,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`},children:r==="follow"&&t.jsx(l,{})}),(r==="start"||r==="end")&&t.jsx(l,{})]}),r==="end-outside"&&t.jsx(l,{})]})});Bt.displayName="ProgressWithValue";const Ei=({tabChange:e,actionContent:a})=>{const{pageId:s}=te();h.useRef(null);const[r,o]=h.useState(null),[i,n]=h.useState(0),[d,l]=h.useState({uploading:!1,synchronizing:!1}),{compilerState:c,compilerDispatch:g}=J();q();const u={maxFiles:1,maxSize:1024*1024*4,multiple:!1,accept:{"text/*":[".csv"]}};return t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-center my-2",children:"Sync csv file"}),t.jsxs("div",{className:"flex flex-col gap-2 my-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Table"}),t.jsx(Q,{readOnly:!0,value:a.tableName,className:"w-[97%] m-auto"})]}),t.jsxs("div",{className:"flex flex-col gap-2 my-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Columns"}),t.jsx(Q,{readOnly:!0,value:a.columns.reduce((f,m)=>`${f===""?f:`${f}, `}${m}`,""),className:"w-[97%] m-auto"})]}),t.jsx(se,{className:_("px-2 text-sm py-2 text-muted-foreground",{}),children:"File csv"}),t.jsxs($t,{value:r,onValueChange:o,dropzoneOptions:u,className:"relative bg-background rounded-lg p-2",children:[t.jsx(zt,{className:"outline-dashed outline-1 outline-primary",inputName:"syncTableFile",inputId:"syncTableFile",children:t.jsx("div",{className:"flex items-center justify-center flex-col pt-3 pb-4 w-full"})}),t.jsx(Ft,{children:r&&r.length>0&&r.map((f,m)=>t.jsxs(Gt,{index:m,children:[t.jsx(Ps,{className:"h-4 w-4 stroke-current"}),t.jsx("span",{children:f.name})]},m))})]}),t.jsx("div",{className:_("w-full space-y-2 px-10",{hidden:!d.synchronizing}),children:t.jsx(Bt,{value:i,position:"follow"},"follow")}),t.jsx("div",{children:t.jsxs("div",{className:"flex my-3 ml-auto mr-3 items-center justify-end w-fit gap-3",children:[t.jsx(V,{onClick:()=>{e("")},className:"w-20 text-red-700 hover:bg-red-700 hover:text-white",variant:"outline",disabled:d.uploading,children:"Cancel"}),t.jsx(V,{className:"w-20 bg-emerald-600 hover:bg-emerald-700",disabled:d.uploading,children:"Sync"})]})})]})},wi=({tabChange:e,actionContent:a})=>{const{compilerState:s,compilerDispatch:r}=J(),{pageId:o}=te(),{toast:i}=q(),[n,d]=h.useState([]);h.useEffect(()=>{var u;const c=(u=s.projectConfig)==null?void 0:u.model.tables.find(f=>f.name===a.tableName),g=c?c.columns.map(f=>f.name):[];d(g)},[s.projectConfig,a.tableName]),h.useEffect(()=>{var u,f;if(s.currentRunning==="NULL_NILL"||s.currentRunning!==`SYNC_${a.path}`)return;const c=s.outputAssetPage[o||""];if(!c||!c.outputAsset)return;const g=c.outputAsset.statusCode;if(g===400){i({title:"Error",description:((f=(u=c.outputAsset)==null?void 0:u.error)==null?void 0:f.message)||"An unexpected error has occurred",variant:"destructive"});return}if(g===200){i({title:"Sync Completed",description:""}),r({type:"SET_COMPILER_RESULTS",payload:{outputAssetRecord:{outputAsset:null}}}),e("");return}},[s.outputAssetPage,o,a.path,i]);const l=async c=>{c.preventDefault();const g=ve(JSON.stringify({spreadsheetId:a.source.sheetId,range:`${a.source.sheetName}!${a.source.range}`,tableName:a.tableName,columns:n,[Ee]:window.__BUILDER__PAGE.alias}));r({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`SYNC_${a.path}`,outputAssetRecord:{pageId:o}}}),De.execute({contextService:s.contextService,dispatch:r,payloadService:{projectCompositeId:s.projectCompositeId,method:a.path,args:g,socketProjectExecProps:s.socketProjectExecProps,typeMessage:`${o}_SYNCG_${a.path}`}})};return t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-center my-2",children:"Sync google sheet"}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Table"}),t.jsx(Q,{readOnly:!0,value:a.tableName,className:"w-[97%] m-auto"})]}),t.jsxs("div",{className:"flex flex-col gap-2 items-center justify-center",children:[t.jsx(se,{className:"self-start text-muted-foreground ml-4",children:"Columns"}),t.jsx("div",{className:"flex items-center gap-2 justify-start rounded-md border border-input bg-background p-2 flex-wrap w-[97%]",children:n.map((c,g)=>t.jsx(ge,{variant:"secondary",children:c},`syncCol_${c}_${g}`))})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Google Sheet ID"}),t.jsx(Q,{readOnly:!0,value:a.source.sheetId,className:"w-[97%] m-auto"})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Sheet Name"}),t.jsx(Q,{readOnly:!0,value:a.source.sheetName,className:"w-[97%] m-auto"})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(se,{className:"text-muted-foreground ml-4",children:"Sheet Range"}),t.jsx(Q,{readOnly:!0,value:a.source.range,className:"w-[97%] m-auto"})]})]}),t.jsx("div",{children:t.jsxs("div",{className:"flex my-3 ml-auto mr-3 items-center justify-end w-fit gap-3",children:[t.jsx(V,{onClick:()=>{e("")},className:"w-20 text-red-700 hover:bg-red-700 hover:text-white",variant:"outline",children:"Cancel"}),t.jsx(V,{onClick:l,className:"w-20 bg-emerald-600 hover:bg-emerald-700",children:"Sync"})]})})]})},ji=({tabChange:e,syncAction:a})=>{switch(a==null?void 0:a.source.from){case"FILE":return t.jsx(Ei,{tabChange:e,actionContent:a});case"GOOGLE_SHEET":return t.jsx(wi,{tabChange:e,actionContent:a});default:return null}},He=({table:e,tabs:a})=>{var d,l;const s=h.useRef(null),[r,o]=h.useState(""),i=c=>{o(c),setTimeout(()=>{n()},200)},n=()=>{!s||!s.current||s.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"end"})};return t.jsxs(Na,{value:r,onValueChange:i,className:"w-[100%] my-1",children:[t.jsxs(Ot,{className:"grid w-full grid-cols-2",children:[t.jsxs(tt,{value:"newCell",disabled:!a.newCell.enable,children:["New Cell ",a.newCell.enable?"":"(disabled)"]}),t.jsxs(tt,{value:"syncTable",disabled:!((d=a==null?void 0:a.sync)!=null&&d.enable),children:["Sync ",(l=a==null?void 0:a.sync)!=null&&l.enable?"":"(disabled)"]})]}),t.jsx(st,{value:"newCell",children:t.jsx(vi,{table:e,tabChange:i})}),t.jsx(st,{value:"syncTable",children:t.jsx("div",{ref:s,children:t.jsx(ji,{table:e,tabChange:i,syncAction:a.sync||{}})})})]})};function Ci({styles:e,title:a,columns:s,dataSource:r,rowsPerPage:o,currentPage:i,totalRows:n,hiddenColumns:d,handleChangePage:l,enableSearch:c,searchCreteria:g,enablePagination:u,actions:f,orderBy:m,setOrderBy:p,orderByCols:x}){var Jt,Yt;const{pageId:v}=te(),[w,T]=L.useState([]),[N,b]=L.useState([]),[j,M]=L.useState(d||{}),[E,A]=h.useState([]),[U,G]=h.useState([]),[z,k]=h.useState([]),[D,I]=h.useState({}),[O,B]=h.useState({}),[R,$]=h.useState(g.length?g[0]:"id"),[K,xe]=h.useState({}),[Fe,le]=h.useState({pageIndex:i-1,pageSize:o}),{userState:re}=de(),{state:ne}=H(),{compilerState:Ge}=J(),je=h.useRef(Object.keys(m)[0]),Ce=h.useRef("ASC"),[Je,Ka]=h.useState(je.current),[Ja,Ya]=h.useState(Ce.current);h.useEffect(()=>{r.length&&(A([...r]),k([...r]),le(P=>({...P,pageIndex:i-1})))},[r]);const ae=Ao({data:E,columns:s,pageCount:Math.ceil(n/o),rowCount:o,manualPagination:!0,manualFiltering:!1,getCoreRowModel:$o(),getPaginationRowModel:Uo(),onPaginationChange:le,onSortingChange:T,getSortedRowModel:Oo(),onColumnFiltersChange:b,getFilteredRowModel:Po(),onColumnVisibilityChange:M,enableColumnResizing:!0,columnResizeMode:"onChange",onColumnSizingChange:xe,getRowId:(P,F)=>{var Z;return((Z=P==null?void 0:P.id)==null?void 0:Z.toString())||F},autoResetPageIndex:!1,enableRowSelection:!0,state:{sorting:w,columnFilters:N,columnVisibility:j,columnSizing:K,pagination:Fe},meta:{editedRows:D,setEditedRows:I,validRows:O,setValidRows:B,actions:f,revertData:P=>{A(F=>F.map(Z=>{if(P.toString()===Z.id.toString()){const oe=z.find(ce=>ce.id.toString()===P.toString());return oe||Z}return Z}))},updateRow:P=>{k(F=>F.map(Z=>{if(P.toString()===Z.id.toString()){const oe=E.find(ce=>ce.id.toString()===P.toString());return oe||Z}return Z}))},updateData:(P,F,Z,oe)=>{A(ce=>ce.map(ft=>P.toString()===ft.id.toString()?{...ft,[F]:Z}:ft)),B(ce=>({...ce,[P.toString()]:{...ce[P.toString()],[F]:oe}}))},addRow:(P,F)=>{const Z={...F,id:P},oe=ce=>[...ce,Z];A(oe),k(oe)},removeRow:P=>{G(E);const F=Z=>Z.filter(oe=>oe.id.toString()!==P.toString());A(F),k(F)},restoreBackupRow:()=>{A(U),k(U)},removeSelectedRows:P=>{P.forEach(F=>{console.log("deleteRow-selected",E[F].id)})}}}),qa=P=>{if(!ne.editor.liveMode||ne.editor.previewMode)return t.jsx(He,{table:P,tabs:{newCell:f.insert,sync:f.sync}});const F=ne.pages.find(Z=>Z.page.name===v);if(f.insert.enable||f.sync.enable){if(f.insert.access==="public"||f.sync.access==="public")return t.jsx(He,{table:P,tabs:{newCell:f.insert,sync:f.sync}});if(!F)return null;if(F.page.accessType==="public"&&re&&Ge.projectOwner&&re.email===Ge.projectOwner.email)return t.jsx(He,{table:P,tabs:{newCell:f.insert,sync:f.sync}});if(re&&Ge.projectOwner&&re.email===Ge.projectOwner.email)return t.jsx(He,{table:P,tabs:{newCell:f.insert,sync:f.sync}});if(F.page.allowed.length>0&&re){const Z=F.page.allowed.find(oe=>oe.user.email===re.email);if(Z&&!Z.readonly)return t.jsx(He,{table:P,tabs:{newCell:f.insert,sync:f.sync}})}}return null};return t.jsxs("div",{className:"border px-2 w-full",children:[t.jsx("h3",{className:"w-full text-left text-3xl py-2",children:a}),t.jsxs("div",{className:"flex items-center justify-between py-4",children:[c&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx(Q,{type:"text",placeholder:`Search by ${R}...`,value:((Jt=ae.getColumn(R))==null?void 0:Jt.getFilterValue())??"",onChange:P=>{var F;return(F=ae.getColumn(R))==null?void 0:F.setFilterValue(P.target.value)},className:"max-w-sm"}),g.length>0&&t.jsx("div",{className:"flex self-end gap-2",children:t.jsxs(Ne,{value:R,onValueChange:P=>$(P),children:[t.jsx(ye,{className:"w-[180px] m-auto text-black",children:t.jsx(Se,{placeholder:"Choose search criteria"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select Criteria..."}),g.map((P,F)=>t.jsx(ue,{value:P,children:P},`${F}_${P}`))]})})]})})]}),u&&x.length>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"flex self-end flex-col gap-2",children:[t.jsx(se,{className:"text-xs text-muted-foreground",children:"Order By"}),t.jsxs(Ne,{value:Je,onValueChange:P=>{je.current=P,Ka(P),p(()=>({[P]:Ce.current}))},children:[t.jsx(ye,{className:"w-[180px] m-auto text-black",children:t.jsx(Se,{placeholder:"Choose order by"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select order by..."}),x.map((P,F)=>t.jsx(ue,{value:P,children:P},`${F}_${P}`))]})})]})]}),t.jsxs("div",{className:"flex self-end flex-col gap-2",children:[t.jsx(se,{className:"text-xs text-muted-foreground",children:"Asc/Desc"}),t.jsxs(Ne,{value:Ja,onValueChange:P=>{Ce.current=P,Ya(P),p(()=>({[je.current]:P}))},children:[t.jsx(ye,{className:"w-[180px] m-auto text-black",children:t.jsx(Se,{placeholder:"Choose direction order"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select order direction..."}),t.jsx(ue,{value:"ASC",children:"ASC"}),t.jsx(ue,{value:"DESC",children:"DESC"})]})})]})]})]}),t.jsx("div",{className:"flex self-end gap-2",children:t.jsxs(Ea,{children:[t.jsx(wa,{asChild:!0,children:t.jsxs(V,{variant:"outline",className:"ml-auto",children:[t.jsx(Do,{className:"mr-2 h-4 w-4"}),"Columns"]})}),t.jsx(Pt,{align:"end",children:ae.getAllColumns().filter(P=>P.getCanHide()).map(P=>P.id==="#_Actions"&&!(f.details.enable||f.insert.enable||f.remove.enable||f.update.enable)?null:t.jsx(Ca,{className:"capitalize",checked:P.getIsVisible(),onCheckedChange:F=>P.toggleVisibility(!!F),children:P.id},P.id))})]})})]}),t.jsx("div",{className:"rounded-md border",children:t.jsxs(ha,{style:{...e,width:ae.getTotalSize(),minWidth:"100%"},children:[t.jsx(ga,{children:ae.getHeaderGroups().map(P=>t.jsx(Qe,{children:P.headers.map(F=>t.jsxs(ya,{colSpan:F.colSpan,className:"relative",style:{width:F.getSize()},children:[F.isPlaceholder?null:t.jsxs("div",{className:F.column.getCanSort()?"cursor-pointer select-none flex items-center justify-between":"",onClick:F.column.getToggleSortingHandler(),children:[qt(F.column.columnDef.header,F.getContext()),{asc:t.jsx("span",{children:t.jsx(Mo,{})}),desc:t.jsx("span",{children:t.jsx(ko,{})})}[F.column.getIsSorted()]??(F.column.getCanSort()?t.jsx(Io,{className:"h-4 w-4 ml-1 stroke-muted-foreground"}):null)]}),t.jsx(yi,{header:F})]},F.id))},P.id))}),t.jsx(xa,{children:(Yt=ae.getRowModel().rows)!=null&&Yt.length?ae.getRowModel().rows.map(P=>t.jsx(Qe,{"data-state":P.getIsSelected()&&"selected",children:P.getVisibleCells().map(F=>t.jsx(jt,{children:qt(F.column.columnDef.cell,F.getContext())},F.id))},P.id)):t.jsx(Qe,{children:t.jsx(jt,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),u&&t.jsxs("div",{className:"flex items-center justify-between p-2",children:[t.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["showing"," ",(i-1)*o+Math.min(o,n-(i-1)*o)," ","of ",n," row(s) ."]}),t.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("p",{className:"text-sm font-medium",children:"Pages"}),t.jsxs(Ne,{value:`${i}`,onValueChange:P=>{l(Number(P))},children:[t.jsx(ye,{className:"h-8 w-[70px]",children:t.jsx(Se,{placeholder:i})}),t.jsx(be,{side:"top",children:Ar({start:1,stop:Math.ceil(n/o),step:1}).map(P=>t.jsx(ue,{value:`${P}`,children:P},P))})]})]}),t.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",ae.getState().pagination.pageIndex+1," of"," ",ae.getPageCount()]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(V,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>l(1),disabled:!ae.getCanPreviousPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to first page"}),t.jsx(Ro,{className:"h-4 w-4"})]}),t.jsxs(V,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l(i-1),disabled:!ae.getCanPreviousPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to previous page"}),t.jsx(_o,{className:"h-4 w-4"})]}),t.jsxs(V,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l(i+1),disabled:!ae.getCanNextPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to next page"}),t.jsx(Cs,{className:"h-4 w-4"})]}),t.jsxs(V,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>l(ae.getPageCount()),disabled:!ae.getCanNextPage(),children:[t.jsx("span",{className:"sr-only",children:"Go to last page"}),t.jsx(Lo,{className:"h-4 w-4"})]})]})]})]}),qa(ae)]})}const Ni=({getValue:e,row:a,column:s,table:r})=>{var p;const o=e(),i=s.columnDef.meta,n=r.options.meta,[d,l]=h.useState(()=>o),[c,g]=h.useState("");h.useEffect(()=>{l(o)},[o]);const u=x=>{m(x),n==null||n.updateData(a.id,s.id,d,x.target.validity.valid)},f=x=>{m(x),l(x.target.value),n==null||n.updateData(a.id,s.id,x.target.value,x.target.validity.valid)},m=x=>{i!=null&&i.validate?i.validate(x.target.value)?(x.target.setCustomValidity(""),g("")):(x.target.setCustomValidity(i.validationMessage),g(i.validationMessage)):x.target.validity.valid?g(""):g(x.target.validationMessage)};if(n!=null&&n.editedRows[a.id])switch(i==null?void 0:i.format){case"select":return t.jsxs(Ne,{value:d,onValueChange:x=>f({target:{value:x,validity:{valid:!0}}}),children:[t.jsx(ye,{className:"w-[97%] m-auto text-black",children:t.jsx(Se,{placeholder:"Choose an option"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select..."}),(p=i==null?void 0:i.options)==null?void 0:p.map((x,v)=>t.jsx(ue,{value:x.value,children:x.text},`${v}_${x.value}`))]})})]});case"text":case"number":case"range":case"date":case"color":case"password":case"email":case"time":return t.jsx(Q,{value:d,onChange:x=>l(x.target.value),onBlur:u,type:(i==null?void 0:i.type)||"text",required:i==null?void 0:i.required,pattern:i==null?void 0:i.pattern,title:c,disabled:i==null?void 0:i.disabled});case"textarea":return t.jsx(dt,{value:d,onChange:x=>l(x.target.value),onBlur:u,required:i==null?void 0:i.required,title:c,disabled:i==null?void 0:i.disabled});default:return t.jsx("span",{children:d})}return t.jsx("div",{className:"max-h-40 overflow-y-auto",children:d})},Si=({getValue:e})=>t.jsx("span",{children:e()}),Ht=Us,Ta=Fo,Ti=Os,Aa=Dt,Da=L.forwardRef(({className:e,...a},s)=>t.jsx(ot,{ref:s,className:S("fixed inset-0 z-[85] bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));Da.displayName=ot.displayName;const lt=L.forwardRef(({className:e,children:a,...s},r)=>t.jsxs(Ti,{children:[t.jsx(Da,{}),t.jsxs(rt,{ref:r,className:S("fixed left-[50%] top-[50%] z-[85] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,t.jsxs(Dt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(at,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lt.displayName=rt.displayName;const ct=({className:e,...a})=>t.jsx("div",{className:S("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});ct.displayName="DialogHeader";const Vt=({className:e,...a})=>t.jsx("div",{className:S("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});Vt.displayName="DialogFooter";const Wt=L.forwardRef(({className:e,...a},s)=>t.jsx(nt,{ref:s,className:S("text-lg font-semibold leading-none tracking-tight",e),...a}));Wt.displayName=nt.displayName;const ut=L.forwardRef(({className:e,...a},s)=>t.jsx(it,{ref:s,className:S("text-sm text-muted-foreground",e),...a}));ut.displayName=it.displayName;const ka=({children:e,defaultOpen:a,subheading:s,title:r,executeOnClose:o,styles:i})=>{const{isOpen:n,setClose:d}=me();return t.jsx(Ht,{open:n||a,onOpenChange:()=>{d(),o&&o()},children:t.jsx(lt,{className:_("overflow-auto md:max-h-[700px] md:h-fit h-screen bg-card"),onInteractOutside:l=>{l.preventDefault()},style:i||{},children:t.jsxs(ct,{className:"pt-8 text-left",children:[t.jsx(Go,{className:"text-2xl font-bold",children:r}),t.jsx(ut,{children:s}),e]})})})},Ai=({row:e,table:a})=>{var k;const{setOpen:s,setClose:r}=me(),{toast:o}=q(),{compilerState:i,compilerDispatch:n}=J(),{userState:d}=de(),{state:l}=H(),{pageId:c}=te(),[g,u]=h.useState(null),f=$s(),m=a.options.meta,p=m.actions,x=p.update,v=p.remove,w=p.details,T=m==null?void 0:m.validRows[e.id],N=T?(k=Object.values(T))==null?void 0:k.some(D=>!D):!1,b=D=>{const I=D.currentTarget.dataset.name;m==null||m.setEditedRows(O=>({...O,[e.id.toString()]:!O[e.id.toString()]})),I!=="edit"&&(D.currentTarget.dataset.name==="cancel"?m==null||m.revertData(e.id):j())},j=()=>{const D={};for(const[O,B]of Object.entries(e.original))D[O]=B;const I=ve(JSON.stringify({rows:D,[Ee]:window.__BUILDER__PAGE.alias}));n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`UPDATE_${x.path}`,outputAssetRecord:{pageId:c||`${l.editor.pageId}`}}}),U({method:x.path,jsonEncoded:I,action:"UPDATE"})},M=()=>{const D=ve(JSON.stringify({id:e.original.id,[Ee]:window.__BUILDER__PAGE.alias}));n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`DETAILS_${w.path}`,outputAssetRecord:{pageId:`${w.redirect}`,extraProps:{actions:w}}}}),U({method:w.path,jsonEncoded:D,action:"DETAILS"})},E=()=>{m==null||m.removeRow(e.original.id);const D=ve(JSON.stringify({id:e.original.id,[Ee]:window.__BUILDER__PAGE.alias}));n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`REMOVE_${v.path}`,outputAssetRecord:{pageId:c||`${l.editor.pageId}`}}}),U({method:v.path,jsonEncoded:D,action:"REMOVE"}),r()};h.useEffect(()=>{var I,O;if(i.currentRunning!==`UPDATE_${x.path}`)return;const D=i.outputAssetPage[c||""];if(c&&D&&D.outputAsset!==null&&"error"in D.outputAsset){o({title:"Error",description:((O=(I=D.outputAsset)==null?void 0:I.error)==null?void 0:O.message)||"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.revertData(e.id);return}if(c&&D&&D.outputAsset!==null&&x.key in D.outputAsset){if(D.outputAsset[x.key].id===null){o({title:"Error",description:"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.revertData(e.id);return}n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.updateRow(D.outputAsset[x.key].id)}},[i.outputAssetPage,i.currentRunning,x.key,x.path,m,n,o,e.id,c]),h.useEffect(()=>{var I,O;if(i.currentRunning!==`REMOVE_${v.path}`)return;const D=i.outputAssetPage[c||""];if(c&&D&&D.outputAsset!==null&&"error"in D.outputAsset){o({title:"Error",description:((O=(I=D.outputAsset)==null?void 0:I.error)==null?void 0:O.message)||"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.restoreBackupRow();return}if(c&&D&&D.outputAsset!==null&&v.key in D.outputAsset){if(D.outputAsset[v.key].id===null){o({title:"Error",description:"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.restoreBackupRow();return}n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:c}}}),m==null||m.removeRow(D.outputAsset[v.key].id)}},[i.outputAssetPage,i.currentRunning,v.key,v.path,m,n,o,c]);const A=h.useCallback(()=>{const D=w.redirect;if(!D){o({title:"Error",description:"An error has occurred and you will not be redirected - [ unrecognized project ]",variant:"destructive"});return}const I=`/${D}`;f(I,{relative:"path",replace:!0})},[w.redirect,o,f]);h.useEffect(()=>{var I,O;if(g!=="DETAILS"||i.currentRunning!==`DETAILS_${w.path}`)return;const D=i.outputAssetPage[w.redirect||""];if(D&&D.outputAsset!==null&&"error"in D.outputAsset){o({title:"Error",description:((O=(I=D.outputAsset)==null?void 0:I.error)==null?void 0:O.message)||"An error was occured",variant:"destructive"}),n({type:"CLEAR_COMPILER_RESULTS",payload:{outputAssetRecord:{pageId:w.redirect}}});return}D&&D.outputAsset!==null&&A()},[i.outputAssetPage,i.currentRunning,n,o,w.redirect,w.path,A,g]);const U=({method:D,jsonEncoded:I,action:O})=>{De.execute({contextService:i.contextService,dispatch:n,payloadService:{projectCompositeId:i.projectCompositeId,method:D,args:I,socketProjectExecProps:i.socketProjectExecProps,typeMessage:`${c}_${O}_${D}`}})},G=D=>D==="EDIT"?t.jsx(V,{onClick:b,"data-name":"edit",size:"icon",variant:"ghost",className:"hover:bg-sky-200",children:t.jsx(Ho,{className:" stroke-sky-600"})}):D==="DETAILS"?t.jsx(V,{onClick:()=>{u("DETAILS"),M()},"data-name":"details",size:"icon",variant:"ghost",className:"hover:bg-slate-200",children:t.jsx(Vo,{className:"stroke-slate-600"})}):t.jsx(V,{"data-name":"remove",size:"icon",variant:"ghost",className:"hover:bg-red-200",onClick:()=>{s(t.jsx(ka,{title:"Remove Row?",subheading:"Be careful, this action is irreversible.",children:t.jsxs("div",{className:"my-2 flex flex-col",children:[t.jsxs("p",{className:"p-2",children:["Are you sure you want to delete the row"," ",t.jsxs("span",{className:"text-red-600 font-bold italic",children:["'",e.original.id,"'"]})," ","?"]}),t.jsx(V,{className:"my-1 ml-auto",variant:"destructive",onClick:()=>E(),children:"Accept"})]})}))},children:t.jsx(Wo,{className:" stroke-red-600"})}),z=D=>{const I=D==="EDIT"?"update":D==="REMOVE"?"remove":"details";if(!l.editor.liveMode||l.editor.previewMode)return G(D);const O=l.pages.find(B=>B.page.name===c);if(p[I].enable){if(p[I].access==="public")return G(D);if(!O)return null;if(O.page.accessType==="public"&&d&&i.projectOwner&&d.email===i.projectOwner.email||d&&i.projectOwner&&d.email===i.projectOwner.email)return G(D);if(O.page.allowed.length>0&&d){const B=O.page.allowed.find(R=>R.user.email===d.email);if(B&&!B.readonly)return G(D)}}return null};return t.jsxs("div",{className:"flex items-center justify-center gap-1",children:[z("DETAILS"),m!=null&&m.editedRows[e.id]?t.jsxs("div",{className:"flex gap-2",children:[t.jsx(V,{onClick:b,"data-name":"cancel",size:"icon",variant:"ghost",className:"hover:bg-red-200",children:t.jsx(zo,{className:"stroke-red-600"})}),t.jsx(V,{onClick:b,"data-name":"done",disabled:N,size:"icon",variant:"ghost",className:"hover:bg-emerald-200",children:t.jsx(Bo,{className:"stroke-emerald-600"})})]}):t.jsxs("div",{children:[z("EDIT"),z("REMOVE")]})]})},Kt=L.forwardRef(({className:e,...a},s)=>t.jsx(Fs,{ref:s,className:S("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:t.jsx(Ko,{className:S("flex items-center justify-center text-current"),children:t.jsx(At,{className:"h-4 w-4"})})}));Kt.displayName=Fs.displayName;const Di=({table:e})=>t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(Kt,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>e.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",title:"Select all"})}),ki=({row:e})=>t.jsx("div",{className:"flex items-center justify-center",children:t.jsx(Kt,{checked:e.getIsSelected(),onCheckedChange:e.getToggleSelectedHandler(),"aria-label":"Select",title:"Select"})}),yt=Jo(),Mi=({columns:e,enableSelect:a})=>{const s=[];return a&&s.push(yt.display({id:"#_Select",header:Di,cell:ki,enableSorting:!1})),e.forEach(r=>{s.push(yt.accessor(r.key,{header:r.name,cell:r.name!=="id"?Ni:Si,meta:r.meta}))}),s.push(yt.display({id:"#_Actions",header:"Actions",cell:Ai,enableSorting:!1})),s},Ii=({element:e})=>{var M;const{pageId:a}=te(),{compilerState:s,compilerDispatch:r}=J(),{state:o,dispatch:i}=H(),n=o.editor.liveMode?W():o.editor.device,d=e.styles[n],l=e.content.table,[c,g]=h.useState(0),[u,f]=h.useState(1),[m]=h.useState(l.pagination.pageSize),[p,x]=h.useState((M=l.pagination)!=null&&M.orderBy&&l.pagination.orderBy.length>0?{[l.pagination.orderBy[0]]:"ASC"}:{}),[v,w]=h.useState(null);h.useEffect(()=>{var U,G;if(s.currentRunning==="NULL_NILL")return;const E=s.outputAssetPage[a||""];if(!E||!E.outputAsset)return;const A=E.outputAsset.statusCode;if(A===400){Hs({title:"Error",description:((G=(U=E.outputAsset)==null?void 0:U.error)==null?void 0:G.message)||"An unexpected error has occurred",variant:"destructive"});return}if(A===200){if(!Array.isArray(E.outputAsset[l.connectData.key]))return;if(w(E.outputAsset[l.connectData.key]),l.pagination.key in E.outputAsset&&(g(E.outputAsset[l.pagination.key]),"limit"in E.outputAsset&&"offset"in E.outputAsset)){const z=E.outputAsset.limit,k=E.outputAsset.offset;if(z>=0){const D=Math.floor(k/z)+1;f(D)}}}},[s.currentRunning,s.outputAssetPage,v,l.connectData,l.pagination.key,a,s]),h.useEffect(()=>{if(!o.editor.liveMode||s.currentRunning.startsWith("DETAILS_")||s.currentRunning.startsWith("UPDATE_")||s.currentRunning.startsWith("REMOVE_")||s.currentRunning.startsWith("INSERT_")||s.currentRunning.startsWith("SYNC_"))return;const E=ve(JSON.stringify({limit:l.pagination.pageSize,offset:(u-1)*l.pagination.pageSize,orderBy:p,[Ee]:window.__BUILDER__PAGE.alias}));r({type:"SET_CURRENT_RUNNING",payload:{currentRunning:l.connectData.path,outputAssetRecord:{pageId:a}}}),De.execute({contextService:s.contextService,dispatch:r,payloadService:{projectCompositeId:s.projectCompositeId,method:l.connectData.path,args:E,socketProjectExecProps:s.socketProjectExecProps,typeMessage:`${a}_${l.connectData.path}`}})},[f,u,r,l.pagination,l.connectData,s.projectCompositeId,s.currentRunning,o.editor.liveMode,a,p]);const T=(E,A)=>{E.dataTransfer.setData("componentType",A)},N=E=>{E.stopPropagation(),i({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},b=E=>{r({type:"CLEAR_CURRENT_RUNNING",payload:{currentRunning:"NULL_NILL"}}),f(E)};return(()=>{var E;return t.jsx("div",{id:e.id,draggable:!1,onDragStart:A=>T(A,"table"),onMouseEnter:()=>i({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:N,className:_(" w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-[2px]":!o.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode,[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:!Array.isArray(e.content)&&t.jsx(Ci,{styles:d,title:l.title,columns:Mi({columns:l.columns,isEditable:l.isEditable,enableSelect:l.enableSelection}),dataSource:l.dataSourceMode==="static"?l.value:v||[],rowsPerPage:m,totalRows:c,hiddenColumns:{"#_Actions":!1},currentPage:u,handleChangePage:b,enableSearch:l.search.enabled,searchCreteria:l.search.searchCriteria,enablePagination:l.pagination.enabled,actions:l.actions,orderBy:p,setOrderBy:x,orderByCols:((E=l.pagination)==null?void 0:E.orderBy)||[]})})})()},Ri=({as:e,style:a,children:s,...r})=>{const o=e||"p",i={style:a};return t.jsx(o,{...r,...i,children:s})},_i=({element:e,customData:a})=>{const{dispatch:s,state:r}=H(),{compilerState:o}=J(),{pageId:i}=te(),{toast:n}=q(),d=r.editor.liveMode?W():r.editor.device,l=e.styles[d],c=e.content.textPlain,[g,u]=h.useState("");h.useEffect(()=>{var v,w;if(a){c.key&&typeof c.key=="string"?u(a[c.key]):u(c.innerText);return}u(c.innerText);const p=o.outputAssetPage[i||""];if(!p||!p.outputAsset)return;const x=p.outputAsset.statusCode;if(x===400){n({title:"Error",description:((w=(v=p.outputAsset)==null?void 0:v.error)==null?void 0:w.message)||"An unexpected error has occurred",variant:"destructive"});return}if(x===200&&c.key&&typeof c.key=="string"){if(c.key in p.outputAsset)u(p.outputAsset[c.key]);else if(c.key.split(".").reduce((T,N)=>T&&T[N],p.outputAsset)){const T=c.key.split(".").reduce((N,b)=>N&&N[b],p.outputAsset);u((T==null?void 0:T.toString())||"")}}},[u,o.outputAssetPage,c==null?void 0:c.key,c==null?void 0:c.innerText,c,i,n,a]);const f=p=>{p.stopPropagation(),!r.editor.liveMode&&s({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return t.jsx(Ri,{style:l,className:_("transition-all ",{"text-6xl":c.as==="h1","text-5xl":c.as==="h2","text-4xl":c.as==="h3","text-3xl":c.as==="h4","text-2xl":c.as==="h5","text-xl":c.as==="h6","text-lg":c.as==="p","text-base":c.as==="span","p-[4px] min-w-5":!r.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":r.editor.selectedElement.id===e.id&&!r.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!r.editor.liveMode&&r.editor.hoveredElement.id===e.id,"!border-solid":r.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!r.editor.liveMode,[`${e==null?void 0:e.animation}`]:r.editor.liveMode&&(e==null?void 0:e.animation)}),as:c.as||"p",contentEditable:!r.editor.liveMode,onClick:f,onMouseEnter:()=>{r.editor.liveMode||s({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}})},onBlur:p=>{if(r.editor.liveMode)return;const x=p.target;u(x.innerText),s({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{textPlain:{...c,innerText:x.innerText}}}}})},suppressContentEditableWarning:!0,children:!Array.isArray(e.content)&&g})},Li=({element:e})=>{const{toast:a}=q(),{pageId:s}=te(),{compilerState:r}=J(),{dispatch:o,state:i}=H(),[n,d]=h.useState([]),l=i.editor.liveMode?W():i.editor.device,c=e.styles[l],g=e.specialContent.customSourceContent;h.useEffect(()=>{var w,T;if(r.currentRunning==="NULL_NILL")return;const p=r.outputAssetPage[s||""];if(!p||!p.outputAsset)return;const x=p.outputAsset.statusCode;if(x===400){a({title:"Error",description:((T=(w=p.outputAsset)==null?void 0:w.error)==null?void 0:T.message)||"An unexpected error has occurred",variant:"destructive"});return}const v=(g==null?void 0:g.key)||"data";x===200&&d(p.outputAsset[v])},[r.currentRunning,r.outputAssetPage,n,s,r,a,g==null?void 0:g.key]);const u=(p,x)=>{p.dataTransfer.setData("componentType",x)},f=p=>{p.stopPropagation(),o({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return t.jsx("section",{style:{display:"flex",width:"100%",gap:"5px",flexDirection:"column",...c},draggable:!1,onDragStart:p=>u(p,"customSourceContent"),onMouseEnter:()=>{i.editor.liveMode||o({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}})},onClick:f,className:_("w-full min-h-2 m-[5px] relative transition-all",{"!p-[10px]":!i.editor.liveMode,"!border-2px] !border-blue-500 z-[300]":i.editor.selectedElement.id===e.id&&!i.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!i.editor.liveMode&&i.editor.hoveredElement.id===e.id,"!border-solid":i.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!i.editor.liveMode,[`${e==null?void 0:e.animation}`]:i.editor.liveMode&&(e==null?void 0:e.animation)}),children:!i.editor.liveMode||i.editor.previewMode?Array.isArray(e.content)&&e.content.map(p=>t.jsx(ee,{element:p},p.id)):Array.isArray(n)?n.length?n.map(p=>Array.isArray(e.content)&&e.content.map(x=>t.jsx(ee,{element:x,customData:p},x.id))):t.jsx("h2",{className:"text-center p-3 md:text-xl lg:text-2xl text-primary",children:g==null?void 0:g.message}):Array.isArray(e.content)&&e.content.map(p=>t.jsx(ee,{element:p,customData:n},p.id))})},Ma=({src:e,alt:a,styles:s,enableExpand:r,animation:o})=>{const[i,n]=h.useState(!1),[d,l]=h.useState({width:0,height:0}),c=h.useRef(null),[g,u]=h.useState(!1),f=()=>{const p=new Image;p.src=e,p.onload=()=>{l({width:p.naturalWidth,height:p.naturalHeight}),n(!0)}},m=()=>n(!1);return r?t.jsxs("div",{className:"w-fit h-fit",children:[t.jsxs("div",{className:"relative group w-fit h-fit",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[t.jsx("img",{src:e,alt:a,className:`w-full h-full object-cover overflow-hidden ${o&&o}`,style:s?{...s}:{}}),r&&t.jsx("button",{className:_("absolute top-2/4 left-2/4 -translate-x-1/2 -translate-y-1/2  w-8 h-8 bg-black/40 rounded-sm opacity-0  transition-opacity",{"group-hover:opacity-100":g}),onClick:()=>f(),children:t.jsx(Yo,{className:"w-6 h-6 absolute top-2/4 left-2/4 -translate-x-1/2 -translate-y-1/2 stroke-white"})})]}),i&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,overflow:"auto"},onClick:m,children:t.jsx("div",{style:{backgroundColor:"transparent",width:`${d.width}`,height:`calc(${d.height} - 40px)`,overflow:"auto"},children:t.jsx("img",{src:e,alt:a,style:{width:"calc(100% - 40px)",height:"calc(100% - 40px)",display:"block",margin:"0 auto"},ref:c})})})]}):t.jsx("img",{src:e,alt:a,className:"w-full h-full object-cover overflow-hidden",style:s?{...s}:{}})},Pi=({element:e,customData:a})=>{const{pageId:s,projectId:r}=te(),{setOpen:o,setClose:i}=me(),{toast:n}=q(),d=e.content.image,{compilerState:l}=J(),{state:c,dispatch:g}=H(),u=c.editor.liveMode?W():c.editor.device,f=e.styles[u],[m,p]=h.useState("");h.useEffect(()=>{if(d.sourceType==="ASSETS"){if(d.src.trim()===""){p(`${window.baseUrl}/assets/images/noImageAvailable.png`);return}if(!c.editor.liveMode&&d.cachedImage.url&&d.cachedImage.url!==""&&d.cachedImage.updated&&x(d.cachedImage.updated)){p(d.cachedImage.url);return}(()=>{(async()=>{const j=await fe({assetOutputType:"image",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(`data/assets/${d.src}`)}`});g({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{image:{...e.content.image,cachedImage:{url:j.data,updated:Date.now()}}}}}}),p(j.data),await Ue(500)})()})();return}},[d.sourceType,l.projectCompositeId,d.src,c.editor.liveMode,d.cachedImage,e,g]),h.useEffect(()=>{var j,M;if(d.sourceType==="ASSETS"||!d.fromBrowxy)return;const N=l.outputAssetPage[s||""];if(!N||!N.outputAsset)return;const b=N.outputAsset.statusCode;if(b===400){n({title:"Error",description:((M=(j=N.outputAsset)==null?void 0:j.error)==null?void 0:M.message)||"An unexpected error has occurred",variant:"destructive",duration:4e3});return}if(b===200){let E="";d.key&&typeof d.key=="string"&&(d.key in N.outputAsset?E=N.outputAsset[d.key]:d.key.split(".").reduce((A,U)=>A&&A[U],N.outputAsset)&&(E=d.key.split(".").reduce((A,U)=>A&&A[U],N.outputAsset))),E!==""&&(async()=>{const G=await fe({assetOutputType:"image",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(E)}`});p(G.data)})()}},[l.outputAssetPage,l.projectCompositeId,d.key,s,n,d.fromBrowxy,d.src,d.sourceType]),h.useEffect(()=>{var j,M;if(d.sourceType==="ASSETS"||d.fromBrowxy)return;if(a){d.key&&typeof d.key=="string"?p(a[d.key]):p(d.src);return}p(d.src);const N=l.outputAssetPage[s||""];if(!N||!N.outputAsset)return;const b=N.outputAsset.statusCode;if(b===400){n({title:"Error",description:((M=(j=N.outputAsset)==null?void 0:j.error)==null?void 0:M.message)||"An unexpected error has occurred",variant:"destructive"});return}if(b===200&&d.key&&typeof d.key=="string"){if(d.key in N.outputAsset)p(N.outputAsset[d.key]);else if(d.key.split(".").reduce((E,A)=>E&&E[A],N.outputAsset)){const E=d.key.split(".").reduce((A,U)=>A&&A[U],N.outputAsset);p((E==null?void 0:E.toString())||"")}}},[p,l.outputAssetPage,d.key,d.src,s,n,a,d.fromBrowxy,d.sourceType]);const x=N=>!(Date.now()-(N||1)>36e5),v=(N,b)=>{N.dataTransfer.setData("componentType",b)},w=N=>{N.stopPropagation(),g({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return c.editor.liveMode?t.jsx(Ma,{src:m,alt:d.alt,styles:f,enableExpand:d.enableExpand,animation:e==null?void 0:e.animation}):t.jsx("div",{draggable:!1,onDragStart:N=>v(N,"image"),onMouseEnter:()=>g({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:w,className:_(`m-[5px] ${!c.editor.liveMode&&m===""?"w-full h-[50px]":"w-fit h-fit"} relative text-[16px] transition-all flex items-center justify-center`,{"!border-2px] !border-blue-500 z-[300]":c.editor.selectedElement.id===e.id&&!c.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!c.editor.liveMode&&c.editor.hoveredElement.id===e.id,"!border-solid":c.editor.selectedElement.id===e.id,"p-[2px] border-dashed border-[1px] border-muted-foreground":!c.editor.liveMode,"p-[10px] w-full":!c.editor.liveMode&&d.src.trim()===""&&d.sourceType==="CUSTOM"}),children:l.isLoading?t.jsx(t.Fragment,{}):!Array.isArray(e.content)&&t.jsx("div",{className:"relative group w-fit h-fit",children:t.jsx("img",{src:m,alt:d.alt,className:"w-full h-full object-cover overflow-hidden",style:f})})})},Oi=({element:e,customData:a})=>{const{dispatch:s,state:r}=H(),{handleFormContextChange:o}=he(),i=r.editor.liveMode?W():r.editor.device,n=e.styles[i],d=e.content.textareaInput,[l,c]=h.useState(d.value||"");h.useEffect(()=>{d.fireChange&&f({target:{value:d.value}})},[d.fireChange]),h.useEffect(()=>{if(a){let p=d.customPlaceholderValue;Object.keys(a).forEach(x=>{p=p.replace("{{"+x+"}}",a[x])}),c(p),o({id:d.id,key:d.name,value:p}),s({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,textareaInput:{...d,value:p,fireChange:!1}}}}})}},[a,d.value,d.id,d.name]);const g=(p,x)=>{p.dataTransfer.setData("componentType",x)},u=p=>{p.stopPropagation(),s({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function f(p){c(p.target.value),o({id:d.id,key:d.name,value:p.target.value}),s({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,textareaInput:{...d,value:p.target.value,fireChange:!1}}}}})}return(()=>{var p;return t.jsx("div",{style:n,draggable:"false",onDragStart:x=>g(x,"inputTextarea"),onMouseEnter:()=>s({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:u,className:_("m-[5px] relative text-[16px] transition-all",{"p-[2px]":!r.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":r.editor.selectedElement.id===e.id&&!r.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!r.editor.liveMode&&r.editor.hoveredElement.id===e.id,"!border-solid":r.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!r.editor.liveMode}),children:!Array.isArray(e.content)&&t.jsxs("div",{className:_("p-1",{[`${e==null?void 0:e.animation}`]:r.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsx("label",{htmlFor:d.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:(p=d.label)==null?void 0:p.hidden}),children:d.label.value}),t.jsx(dt,{className:"flex  w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",id:d.id,name:d.name,placeholder:d.placeholder?d.placeholder:"Enter value...",readOnly:d.readOnly||!1,value:l,onChange:x=>f(x),rows:d.rows,cols:d.cols,spellCheck:!1,autoComplete:"false",autoCapitalize:"false"})]})})})()},Ui=({element:e,customData:a})=>{const{toast:s}=q(),{compilerState:r}=J(),{dispatch:o,state:i}=H(),[n,d]=h.useState(!1),l=[],c=i.editor.liveMode?W():i.editor.device,g=e.styles[c],u=e.specialContent.email,f=b=>{var j,M;for(const E of b){let A=null;switch(E.type){case"inputText":A="textInput";break;case"inputTextarea":A="textareaInput";break}A&&(E.content[A],l.push({key:((j=E.content[A])==null?void 0:j.name.toString())||'""',value:((M=E.content[A])==null?void 0:M.value.toString())||'""'})),Array.isArray(E.content)&&f(E.content)}},m=(b,j)=>{b.dataTransfer.setData("componentType",j)},p=b=>{b.stopPropagation(),o({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},x=()=>{if(!kt((u==null?void 0:u.myEmail)||"")){s({title:"Error",description:"The owner of the page did not provide a valid email",variant:"destructive"});return}f(Array.isArray(e.content)?e.content:[]);const b={};for(let E=0;E<l.length;E++)b[l[E].key.replace(/"/g,"")]=l[E].value;let j=`mailto:${u.myEmail}?subject=${encodeURIComponent(l[0].value)}&body=${encodeURIComponent(l[1].value)}`;Vs()||(j=`https://mail.google.com/mail/?ui=2&view=cm&fs=1&tf=1&to=${u.myEmail}&su=${encodeURIComponent(l[0].value)}&body=${encodeURIComponent(l[1].value)} `);const M=document.createElement("a");M.href=j,M.setAttribute("target","_blank"),M.click(),d(!1)},v=()=>{var M;let b={},j="Send Email";if(Array.isArray(e.content)&&Array.isArray(e.content[0].content)){const E=e.content[0].content.find(A=>A.type==="button");E&&(b=E.styles[c],j=((M=E.content.button)==null?void 0:M.innerText)||"Email")}return t.jsxs(V,{variant:"default",style:{...b},onClick:()=>d(E=>!E),children:[t.jsx(Gs,{}),t.jsx("span",{children:j})]})},w=()=>t.jsxs(Ht,{open:n,onOpenChange:d,children:[t.jsx(Ta,{asChild:!0,children:v()}),t.jsxs(lt,{className:_("sm:max-w-[425px]",{[`${e==null?void 0:e.animation}`]:i.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsxs(ct,{children:[t.jsx(Wt,{children:u.title}),t.jsx(ut,{children:u.subTitle})]}),t.jsx("div",{className:"grid gap-4 py-4",children:Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type!=="button"?t.jsx(ee,{element:j,customData:a},j.id):null))}),t.jsx(Vt,{children:t.jsx(Aa,{children:Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type==="button"?t.jsx(ee,{element:j,extraProps:{onClicked:x}},j.id):null))})})]})]}),T=()=>t.jsxs("div",{style:{...g},className:_({[`${e==null?void 0:e.animation}`]:i.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsx("h3",{className:"text-xl",children:u==null?void 0:u.title}),t.jsx("h5",{className:"text-xs",children:u==null?void 0:u.subTitle}),Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type!=="button"?t.jsx(ee,{element:j,customData:a},j.id):t.jsx(ee,{element:j,extraProps:{onClicked:x}},j.id)))]});return t.jsx("div",{style:{width:"100%"},draggable:!1,onDragStart:b=>m(b,"email"),onMouseEnter:()=>o({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:p,className:_(" w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-[2px]":!i.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":i.editor.selectedElement.id===e.id&&!i.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!i.editor.liveMode&&i.editor.hoveredElement.id===e.id,"!border-solid":i.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!i.editor.liveMode}),children:i.editor.liveMode?t.jsx(t.Fragment,{children:r.isLoading?t.jsx(t.Fragment,{}):u!=null&&u.dialog?w():T()}):t.jsxs("div",{style:{...g},children:[t.jsx("h3",{className:"text-xl",children:u==null?void 0:u.title}),t.jsx("h5",{className:"text-xs",children:u==null?void 0:u.subTitle}),Array.isArray(e.content)&&e.content.map(b=>t.jsx(ee,{element:b},b.id))]})})},$i=({element:e,customData:a})=>{const{compilerState:s}=J(),{dispatch:r,state:o}=H(),{toast:i}=q(),[n,d]=h.useState(!1),l=[],c=o.editor.liveMode?W():o.editor.device,g=e.styles[c],u=e.specialContent.whatsapp,f=b=>{var j,M;for(const E of b){let A=null;switch(E.type){case"inputText":A="textInput";break;case"inputTextarea":A="textareaInput";break}A&&(E.content[A],l.push({key:((j=E.content[A])==null?void 0:j.name.toString())||'""',value:((M=E.content[A])==null?void 0:M.value.toString())||'""'})),Array.isArray(E.content)&&f(E.content)}},m=(b,j)=>{b.dataTransfer.setData("componentType",j)},p=b=>{b.stopPropagation(),r({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},x=()=>{if(u.phoneNumber===""){i({title:"Error",description:"The owner of the page did not provide a valid phone number",variant:"destructive"});return}f(Array.isArray(e.content)?e.content:[]);const b={};for(let M=0;M<l.length;M++)b[l[M].key.replace(/"/g,"")]=l[M].value;const j=document.createElement("a");j.href=`https://api.whatsapp.com/send?phone=+${u==null?void 0:u.phoneNumber}&text=${encodeURIComponent(l[0].value)}`,j.setAttribute("target","_blank"),j.click(),d(!1)},v=()=>{var M;let b={},j="Send Whatsapp";if(Array.isArray(e.content)&&Array.isArray(e.content[0].content)){const E=e.content[0].content.find(A=>A.type==="button");E&&(b=E.styles[c],j=((M=E.content.button)==null?void 0:M.innerText)||"Whatsapp")}return t.jsxs(V,{variant:"default",style:{...b},onClick:()=>d(E=>!E),children:[t.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"})}),t.jsx("span",{children:j})]})},w=()=>t.jsxs(Ht,{open:n,onOpenChange:d,children:[t.jsx(Ta,{asChild:!0,children:v()}),t.jsxs(lt,{className:_("sm:w-max-[425px]",{[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsxs(ct,{children:[t.jsx(Wt,{children:u.title}),t.jsx(ut,{children:u.subTitle})]}),t.jsx("div",{className:"grid gap-4 py-4",children:Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type!=="button"?t.jsx(ee,{element:j,customData:a},j.id):null))}),t.jsx(Vt,{children:t.jsx(Aa,{children:Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type==="button"?t.jsx(ee,{element:j,extraProps:{onClicked:x}},j.id):null))})})]})]}),T=()=>t.jsxs("div",{style:{...g},className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsx("h3",{className:"text-xl",children:u==null?void 0:u.title}),t.jsx("h5",{className:"text-xs",children:u==null?void 0:u.subTitle}),Array.isArray(e.content)&&e.content.map(b=>Array.isArray(b.content)&&b.content.map(j=>j.type!=="button"?t.jsx(ee,{element:j,customData:a},j.id):t.jsx(ee,{element:j,extraProps:{onClicked:x}},j.id)))]});return t.jsx("div",{style:{width:"100%"},draggable:!1,onDragStart:b=>m(b,"whatsapp"),onMouseEnter:()=>r({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:p,className:_("w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-[2px]":!o.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode}),children:o.editor.liveMode?t.jsx(t.Fragment,{children:s.isLoading?t.jsx(t.Fragment,{}):u!=null&&u.dialog?w():T()}):t.jsxs("div",{style:{width:"100%",...g},className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsx("h3",{className:"text-xl",children:u==null?void 0:u.title}),t.jsx("h5",{className:"text-xs",children:u==null?void 0:u.subTitle}),Array.isArray(e.content)&&e.content.map(b=>t.jsx(ee,{element:b},b.id))]})})};function Fi(e,a,s){const r=a.find(o=>o.pattern.test(String(e)));return r?r.optionsToShow:s}const Gi=({element:e})=>{var v;const{dispatch:a,state:s}=H(),{values:r,handleFormContextChange:o,lastComponentUpdated:i}=he(),n=s.editor.liveMode?W():s.editor.device,d=e.styles[n],l=e.content.selectInput,[c,g]=h.useState(l.options||[]),[u,f]=h.useState(l.value||"");h.useEffect(()=>{if(!Object.keys(l.interactions.filters).length){s.editor.liveMode||g(l.options);return}const w=l.interactions.filters;if(!w||!w[i]){s.editor.liveMode||g(l.options);return}const T=w[i],N=r[T.inputId],b=N.length>0?N[0].value:"",j=T.criteria.map(E=>({pattern:new RegExp(E.pattern),optionsToShow:E.optionsToShow})),M=Fi(b,j,l.options);g(M)},[l.interactions.filters,r,i,l.options,s.editor.liveMode]),h.useEffect(()=>{l.fireChange&&x(l.value)},[l.fireChange]);const m=(w,T)=>{w.dataTransfer.setData("componentType",T)},p=w=>{w.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function x(w){f(w),o({id:l.id,key:l.name,value:w}),a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,selectInput:{...l,value:w,fireChange:!1}}}}})}return t.jsxs("div",{draggable:"false",onDragStart:w=>m(w,"combobox"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:p,className:_(`w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"w-full p-1",children:[t.jsx("label",{htmlFor:l.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:(v=l.label)==null?void 0:v.hidden}),children:l.label.value}),t.jsxs(Ne,{name:l.name,value:u,onValueChange:w=>x(w),disabled:l.disabled,children:[t.jsx(ye,{className:"w-[97%] m-auto",style:{...d},children:t.jsx(Se,{placeholder:l.placeholder,className:"mb-1"})}),t.jsx(be,{className:"z-[101]",children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Choose value"}),c.map((w,T)=>t.jsx(ue,{value:`${w.value}`,children:w.text},`option_${T}_${w.value}`))]})})]})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},zi=({element:e})=>{const{dispatch:a,state:s}=H(),{handleFormContextChange:r}=he(),o=s.editor.liveMode?W():s.editor.device,i=e.styles[o],n=e.content.dateInput,[d,l]=h.useState(""),c=h.useCallback(()=>{const p=n.value||"";if(s.editor.liveMode&&p==="")return l(new Date().toISOString().split("T")[0]),m(new Date().toISOString().split("T")[0]),r({id:n.id,key:n.name,value:n.value}),()=>{};l(p)},[]);h.useEffect(()=>{c()},[c]),h.useEffect(()=>{n.fireChange&&f({target:{value:n.value}})},[n.fireChange]);const g=(p,x)=>{p.dataTransfer.setData("componentType",x)},u=p=>{p.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function f(p){l(p.target.value),m(p.target.value),r({id:n.id,key:n.name,value:p.target.value})}function m(p){a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,dateInput:{...n,value:p,fireChange:!1}}}}})}return t.jsxs("div",{style:i,draggable:"false",onDragStart:p=>g(p,"inputDate"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:u,className:_(`m-[5px] relative text-[16px] transition-all ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"w-full p-1",children:[t.jsx("label",{htmlFor:n.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:n.label.hidden}),children:n.label.value}),t.jsx(Q,{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",type:n.hidden?"hidden":"date",id:n.id,name:n.name,placeholder:n.placeholder?n.placeholder:"select date...",disabled:n.disabled||!1,value:d,onChange:p=>f(p),readOnly:n.readOnly||!1})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},Bi=({element:e})=>{const{dispatch:a,state:s}=H(),{handleFormContextChange:r}=he(),o=s.editor.liveMode?W():s.editor.device,i=e.styles[o],n=e.content.numberInput,[d,l]=h.useState((n==null?void 0:n.value)||0);h.useEffect(()=>{n.fireChange&&u({target:{value:n.value}})},[n.fireChange]);const c=(f,m)=>{f.dataTransfer.setData("componentType",m)},g=f=>{f.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function u(f){l(Number(f.target.value)),r({id:n.id,key:n.name,value:Number(f.target.value)}),a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,numberInput:{...n,value:+f.target.value,fireChange:!1}}}}})}return t.jsxs("div",{style:i,draggable:"false",onDragStart:f=>c(f,"inputNumber"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:g,className:_(`m-[5px] relative text-[16px] transition-all ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"w-full p-1",children:[t.jsx("label",{htmlFor:n.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:n.label.hidden}),children:n.label.value}),t.jsx(Q,{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",type:n.hidden?"hidden":"number",id:n.id,name:n.name,placeholder:n.placeholder?n.placeholder:"Enter value...",disabled:n.disabled||!1,value:Number(d),onChange:f=>u(f),readOnly:n.readOnly||!1,step:n.step,min:n.min,max:n.max})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},Hi=({prefixText:e})=>t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-8 h-8 mb-3 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:t.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),t.jsxs("p",{className:"mb-1 text-sm text-gray-500 dark:text-gray-400",children:[t.jsx("span",{className:"font-semibold",children:"Click to upload"}),"  or drag and drop"]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e})]}),Vi=h.forwardRef(({files:e,formRef:a,name:s,id:r,reqIdAndTargetValue:o},i)=>{const{handleFormFileRef:n}=he();h.useEffect(()=>{a.current&&n(a.current)},[]);const d=()=>e.map((l,c)=>{const g=l.name.replace(/\s+/g,"_").toLowerCase(),u=new DataTransfer;return u.items.add(l),t.jsx("input",{type:"file",name:g,id:g,ref:f=>{f&&(f.files=u.files)},style:{display:"none"}},c)});return t.jsx("div",{children:t.jsxs("form",{name:s,id:r,method:"post",encType:"multipart/form-data",style:{display:"none"},ref:l=>{a.current=l,i&&(i.current=l)},children:[o&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",name:"target",value:o.target}),t.jsx("input",{type:"hidden",name:"uploadId",id:"uploadId",value:o.reqId})]}),d()]})})}),Wi=({element:e})=>{const{dispatch:a,state:s}=H(),r=h.useRef(null),{uploadPercentage:o,onUploadProgress:i,handleFormContextChange:n}=he(),d=s.editor.liveMode?W():s.editor.device,l=e.styles[d],c=e.content.fileInput,[g,u]=h.useState(null),f={maxFiles:c.selectionType==="MULTIPLE"&&c.maxFiles||1,maxSize:1024*1024*c.maxSize,multiple:c.selectionType==="MULTIPLE"};h.useEffect(()=>{n({id:c.id,key:c.name,value:""})},[]);const m=(x,v)=>{x.dataTransfer.setData("componentType",v)},p=x=>{x.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return t.jsxs("div",{draggable:"false",onDragStart:x=>m(x,"inputFile"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:p,className:_(`w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"w-full p-1",style:l,children:[t.jsx(Vi,{formRef:r,files:g||[],id:c.compilerUploadId,name:c.compilerUploadId}),t.jsx("label",{htmlFor:c.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:c.label.hidden}),children:c.label.value}),t.jsxs($t,{value:g,onValueChange:x=>{i(0),u(x)},dropzoneOptions:f,className:"relative bg-background rounded-lg p-2",children:[t.jsx(zt,{className:"outline-dashed outline-1 outline-primary",inputName:c.name||"",inputId:c.id,children:t.jsx("div",{className:"flex items-center justify-center flex-col pt-3 pb-4 w-full",children:t.jsx(Hi,{prefixText:c.prefixText||""})})}),t.jsx(Ft,{children:g&&g.length>0&&g.map((x,v)=>t.jsxs(Gt,{index:v,children:[t.jsx(Ps,{className:"h-4 w-4 stroke-current"}),t.jsx("span",{children:x.name})]},v))})]}),t.jsx("div",{className:_("w-full space-y-2 px-10",{}),children:t.jsx(Bt,{value:o,position:"follow"},"follow")})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},Ki=({files:e,formRef:a,name:s,id:r,reqIdAndTargetValue:o})=>{const i=()=>e.map((n,d)=>{const l=n.name.replace(/\s+/g,"_").replace(/\.[^/.]+$/,"").toLowerCase(),c=new DataTransfer;return c.items.add(n),t.jsx("input",{type:"file",name:l,id:l,ref:g=>{g&&(g.files=c.files)},style:{display:"none"}},d)});return t.jsx("div",{children:t.jsxs("form",{name:s,id:r,method:"post",encType:"multipart/form-data",style:{display:"none"},ref:a,children:[o&&t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"hidden",name:"target",value:o.target}),t.jsx("input",{type:"hidden",name:"uploadId",id:"uploadId",value:o.reqId})]}),i()]})})},Ji={message:"",send:"",logState:"START"},Yi=h.createContext({consoleState:Ji,consoleDispatch:()=>{}}),qi=()=>{const e=h.useContext(Yi);if(!e)throw new Error("useConsole Hook must be used within the console Provider");return e},Xi=({element:e})=>{const{pageId:a}=te(),[s]=qo(),{dispatch:r,state:o}=H(),{compilerState:i,compilerDispatch:n}=J(),{consoleState:d}=qi(),{toast:l}=q(),[c,g]=h.useState(!0),u=o.editor.liveMode?W():o.editor.device,f=e.styles[u],m=e.content.iframe,[p,x]=h.useState(""),v=h.useRef(null),w=h.useRef(null),[T,N]=h.useState(null),b=h.useCallback(async()=>{const R=s.get("template"),$=R||m.source;if(!$.toLowerCase().endsWith("html")){g(!1);return}const K=await fe({assetOutputType:"html",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent($)}`});K.statusCode===200?x(K.data):x(`<h2 style="color:red; text-align:center; font-size:20px; padding:5px; font-weight:bold">${K.error}</h2>`),g(!1)},[m.source,m.sourceType]);h.useEffect(()=>{if(m.sourceType==="URL"){x(m.source),g(!1);return}b()},[m.sourceType,m.source,b]),h.useEffect(()=>{var K,xe;const R=i.outputAssetPage[a||""];if(!R||!R.outputAsset)return;const $=R.outputAsset.statusCode;if(g(!1),$===400){l({title:"Error",description:((xe=(K=R.outputAsset)==null?void 0:K.error)==null?void 0:xe.message)||"An unexpected error has occurred",variant:"destructive",className:S("z-[1000]"),duration:3e3});return}$===200&&O({response:{apiPayload:R.outputAsset,statusCode:$}})},[i.contextService,i.outputAssetPage,a,l]),h.useEffect(()=>{const R=$=>{$.origin===window.__BROWXY__SYS.origin&&A($.data)};return window.addEventListener("message",R),()=>window.removeEventListener("message",R)},[]),h.useEffect(()=>{O({response:{message:d.message}})},[d.message]),h.useEffect(()=>{O({response:{logState:d.logState}})},[d.logState]);const j=(R,$)=>{R.dataTransfer.setData("componentType",$)},M=R=>{R.stopPropagation(),r({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},E=(R,$)=>{const K=$[R.action];return K||(R={action:"DEFAULT",message:"invalid action"}),K(R)},A=R=>{E(R,{UPLOAD:async({message:$})=>{await U($)},DEFAULT:({message:$})=>{console.log(`Received Default message: ${$}`)}})},U=async R=>{try{const{isShared:$,alias:K}=window.__BUILDER__PAGE,{executionParam:xe,formParams:Fe}=R,le={},re=[];for(const ne of Fe)if(ne.type==="file"){const je=await(await fetch(ne.value.data)).blob(),Ce=ne.value.fileName.replace(/\s+/g,"_").toLowerCase();le[ne.value.paramName]=$?`${K}/${Ce}`:Ce,re.push(new File([je],Ce,{type:je.type}))}else le[ne.value.paramName]=ne.value.data;$&&(le[Ee]=K),N(re),G(re,{args:le,executionParam:xe})}catch($){console.error($)}},G=async(R,{args:$,executionParam:K})=>{if(!R.length){I({args:$,executionParam:K});return}if(await Ue(1e3),!w.current)throw new Error("formRef is not defined");ua({form:w.current,url:Y.UPLOAD_FILE_URL,onProgress:D,onUploadError:k,onUploadSuccess:z,props:{args:$,executionParam:K}})},z=({data:R})=>{I(R)},k=R=>{console.error(R),O({response:{message:R}})},D=R=>{O({response:{uploadStatus:R}})},I=({args:R,executionParam:$})=>{const K=ve(JSON.stringify(R));window.__CANCEL__LOAD__ASSET=!0,n({type:"SET_CURRENT_RUNNING",payload:{currentRunning:`POST_MSG_${m.id}`,manualLoader:!1,outputAssetRecord:{pageId:a}}}),De.execute({contextService:i.contextService,dispatch:n,payloadService:{projectCompositeId:i.projectCompositeId,method:$.functionName,args:K,socketProjectExecProps:i.socketProjectExecProps,typeMessage:`${a}_${$.functionName}`}})},O=R=>{var $,K;(K=($=v.current)==null?void 0:$.contentWindow)==null||K.postMessage(R,"*")};return t.jsxs("div",{draggable:"false",onDragStart:R=>j(R,"iframe"),onMouseEnter:()=>r({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:M,className:_(`h-fit relative transition-all flex items-center justify-center ${f.width?f.width:"w-fit"}`,{"p-[20px] m-[5px] overflow-auto":!o.editor.liveMode,"!border-2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode,"p-0 m-0":o.editor.liveMode}),children:[c?t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-background z-[110]",children:t.jsx(Ae,{size:"large",className:"stroke-primary"})}):!Array.isArray(e.content)&&m.sourceType==="URL"?t.jsx("iframe",{ref:v,src:p,style:f,className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)})}):t.jsx("iframe",{ref:v,srcDoc:p,style:f,className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)})}),t.jsx(Ki,{formRef:w,files:T||[],id:`iframe_files_${m.id}`,name:`iframe_files_${m.id}`})]})},Zi=({element:e,customData:a})=>{const{dispatch:s,state:r}=H(),o=r.editor.liveMode?W():r.editor.device,i=e.styles[o],n=e.specialContent.grid,d=(m,p)=>{m.dataTransfer.setData("componentType",p)},l=m=>{m.stopPropagation(),s({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},c=m=>{let p=(n==null?void 0:n.columns[o].cols)||1;m==="add"?p<12&&p++:p>1&&p--;const x=u(p);s({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,specialContent:{grid:{...n,columns:{...n==null?void 0:n.columns,[o]:{...n==null?void 0:n.columns[o],cols:p}}}},styles:{...e.styles,[o]:{...e.styles[o],gridTemplateColumns:x}}}}})},g=()=>{const m=r.editor.index+1,p={containerId:r.editor.selectedElement.id,elementDetails:{content:[{canDelete:!0,id:C(),name:`Text ${m}.${m}`,styles:{Desktop:{textAlign:"center",color:"#000000"},Tablet:{textAlign:"center",color:"#000000"},Mobile:{textAlign:"center",color:"#000000"}},type:"text",content:{textPlain:{as:"p",disabled:!1,id:C(),innerText:"add your text here",key:""}}}],id:C(),name:`Container ${m}`,styles:Array.isArray(e.content)?e.content[0].styles:{Desktop:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Tablet:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"},Mobile:{...y,width:"100%",gridColumn:"auto / span 1",gridRow:"auto / span 1"}},animation:Array.isArray(e.content)&&e.content[0].animation||"",type:"container",canDelete:!0,customProps:{gridArea:!0,parentId:r.editor.selectedElement.id}}};s({type:"ADD_ELEMENT",payload:p})},u=m=>{if((n==null?void 0:n.columns[o].widthType)==="repeat")return`repeat(${m}, 1fr)`;const p=n.columns[o].widths.length;if(p===m)return n==null?void 0:n.columns[o].widths.join(" ");if(p>m){const w=p-m;return n.columns[o].widths.splice(-w,w).join(" ")}const x=m-p,v=[...n.columns[o].widths];if(x>0)for(let w=0;w<x;w++)v.push("1fr");return v.join(" ")};return t.jsxs("div",{id:e.id,style:{...i},draggable:"false",onDragStart:m=>d(m,"grid"),onMouseEnter:()=>s({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:l,className:_("w-full m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-4":!r.editor.liveMode,"!border-[2px] !border-blue-500 z-[300] !w-full":r.editor.selectedElement.id===e.id&&!r.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!r.editor.liveMode&&r.editor.hoveredElement.id===e.id,"!border-solid":r.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!r.editor.liveMode,[`${e==null?void 0:e.animation}`]:r.editor.liveMode&&(e==null?void 0:e.animation)}),children:[Array.isArray(e.content)&&e.content.map(m=>t.jsx(ee,{element:m,customData:a},m.id)),r.editor.selectedElement.id===e.id&&!r.editor.liveMode&&r.editor.selectedElement.canDelete&&t.jsx("div",{className:"absolute bg-primary px-2.5 py-1 text-xs font-bold  left-[45%] -top-[25px] rounded-none rounded-t-lg !text-white",children:t.jsxs("div",{className:"flex gap-8 items-center justify-between",children:[t.jsx(Le,{children:t.jsx(Xo,{size:16,className:"stroke-emerald-300 cursor-pointer",onClick:()=>c("add")}),title:"Add Column"}),t.jsx(Le,{children:t.jsx(Zo,{size:16,className:"stroke-red-300 cursor-pointer",onClick:()=>c("del")}),title:"Remove Column"}),t.jsx(Le,{children:t.jsx(Qo,{size:16,className:"stroke-white cursor-pointer",onClick:g}),title:"Add Cell"})]})})]})},Qi=({element:e,customData:a})=>{const{pageId:s}=te(),{compilerState:r}=J(),{dispatch:o,state:i}=H(),{toast:n}=q(),[d,l]=h.useState("#"),c=i.editor.liveMode?W():i.editor.device,g=e.styles[c],u=e.content.downloadLink;h.useEffect(()=>{var N,b;if(a){u.key&&typeof u.key=="string"?l(a[u.key]):l(u.href);return}const w=r.outputAssetPage[s||""];if(!w||!w.outputAsset)return;const T=w.outputAsset.statusCode;if(T===400){n({title:"Error",description:((b=(N=w.outputAsset)==null?void 0:N.error)==null?void 0:b.message)||"An unexpected error has occurred",variant:"destructive",duration:4e3});return}if(T===200){let j="";u.key&&typeof u.key=="string"&&(u.key in w.outputAsset?j=w.outputAsset[u.key]:u.key.split(".").reduce((M,E)=>M&&M[E],w.outputAsset)&&(j=u.key.split(".").reduce((M,E)=>M&&M[E],w.outputAsset))),j!==""&&l(`${Y.DOWNLOAD_ASSET_FILE_URL}${encodeURIComponent(j)}`)}},[r.outputAssetPage,r.projectCompositeId,u.key,s,n,a]);const f=(w,T)=>{w.dataTransfer.setData("componentType",T)},m=w=>{w.stopPropagation(),o({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},p=w=>{switch(w){case"file-down":return t.jsx(zs,{});case"image-down":return t.jsx(ar,{});case"cloud-down":return t.jsx(sr,{});case"hard-drive-down":return t.jsx(tr,{});default:return t.jsx(er,{})}},x=()=>t.jsx(V,{variant:u.variant,style:g,disabled:d==="#",className:_("",{"cursor-not-allowed line-through":d==="#",[`${e==null?void 0:e.animation}`]:i.editor.liveMode&&(e==null?void 0:e.animation)}),children:t.jsxs("a",{className:"flex items-center justify-center gap-2",href:d,target:"_blank",children:[u.showIcon&&p(u.iconVariant),u.innerText.trim()!==""&&t.jsx("span",{children:u.innerText})]})});return i.editor.liveMode?x():t.jsx("div",{draggable:!1,onDragStart:w=>f(w,"downloadLink"),onMouseEnter:()=>o({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:m,className:_("w-fit h-fit  m-[5px] relative text-[16px] transition-all",{"p-[2px]":!i.editor.liveMode,"!border-2px] !border-blue-500 z-[300]":i.editor.selectedElement.id===e.id&&!i.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!i.editor.liveMode&&i.editor.hoveredElement.id===e.id,"!border-solid":i.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!i.editor.liveMode}),children:!Array.isArray(e.content)&&x()})},ed=({element:e})=>{const{dispatch:a,state:s}=H(),r=s.editor.liveMode?W():s.editor.device,o=e.styles[r],i=e.content.separator,n=(c,g)=>{c.dataTransfer.setData("componentType",g)},d=c=>{c.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return s.editor.liveMode?t.jsx(We,{orientation:i.orientation,style:o,className:_({[`${e==null?void 0:e.animation}`]:s.editor.liveMode&&(e==null?void 0:e.animation)})}):t.jsx("div",{style:{...o,backgroundColor:"transparent"},draggable:!1,onDragStart:c=>n(c,"separator"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:d,className:_("m-[5px] relative text-[16px] transition-all",{"p-[2px]":!s.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":s.editor.selectedElement.id===e.id&&!s.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!s.editor.liveMode&&s.editor.hoveredElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!s.editor.liveMode}),children:!Array.isArray(e.content)&&t.jsx(We,{orientation:i.orientation,style:o,className:_({[`${e==null?void 0:e.animation}`]:s.editor.liveMode&&(e==null?void 0:e.animation)})})})},td=({element:e})=>{const{projectId:a,pageId:s}=te(),{dispatch:r,state:o}=H(),{userState:i}=de(),{compilerState:n}=J(),{setOpen:d,setClose:l}=me(),[c,g]=h.useState(!1),u=o.editor.liveMode?W():o.editor.device,f=e.styles[u],m=e.specialContent.navbar,p=k=>k==="login"?`/${X.LOGIN}`:k==="logout"?`/${X.LOGOUT}`:`/${k}`,x=(k,D)=>{k.dataTransfer.setData("componentType",D)},v=k=>{k.stopPropagation(),r({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},w=(k,D)=>k.goToUrl==="login"&&i||k.goToUrl==="logout"&&!i?null:m.hashNavigation?k.goToUrl==="login"||k.goToUrl==="logout"?T(k):N(k):T(k),T=(k,D)=>o.editor.liveMode?j(k):b(k,!1),N=(k,D)=>o.editor.liveMode?M(k):b(k,!0),b=(k,D,I)=>t.jsx("div",{className:"relative group w-fit h-fit",children:D?M(k):j(k)}),j=k=>t.jsxs(Oe,{to:p(k.goToUrl),className:_("flex gap-2 items-center font-bold hover:underline",{"border p-2":k.goToUrl===s&&!m.hashNavigation}),state:k.goToUrl==="login"?{lastLocation:location.pathname}:null,children:[k.icon.trim()!==""&&t.jsx("img",{src:k.icon,alt:"icon not found"}),t.jsx("span",{children:k.label})]}),M=k=>t.jsxs("a",{href:k.goToUrl,className:"flex gap-2 items-center font-bold hover:underline",children:[k.icon.trim()!==""&&t.jsx("img",{src:k.icon,alt:"icon not found"}),t.jsx("span",{children:k.label})]}),E=(k,D)=>{if(!o.editor.liveMode||o.editor.previewMode||k.access==="public")return w(k);const I=o.pages.find(O=>O.page.name===s);if(!I)return null;if(i&&n.projectOwner&&i.email===n.projectOwner.email)return w(k);if(I.page.allowed.length>0&&i){const O=I.page.allowed.find(B=>B.user.email===i.email);if(O&&!O.readonly)return w(k)}return null},A=()=>!o.editor.liveMode&&f.position&&f.position==="fixed"?{...f,position:"absolute",overflow:"visible"}:f,U=()=>!o.editor.liveMode&&f.position&&f.position==="fixed"?{overflow:"hidden",height:f!=null&&f.height?`${parseInt(f.height)+10}px`:"70px"}:{},G=()=>t.jsxs("div",{className:"w-[100%]",children:[t.jsxs("nav",{style:A(),className:_({[`${e==null?void 0:e.animation}`]:o.editor.liveMode&&(e==null?void 0:e.animation)}),children:[t.jsxs("div",{className:"flex gap-1 items-center px-1",children:[Array.isArray(e.content)&&m.logo&&t.jsx(ee,{element:e.content[0]}),Array.isArray(e.content)&&m.title&&t.jsx(ee,{element:e.content[1]})]}),t.jsx("div",{className:_("hidden md:flex gap-3 items-center px-1",{"ml-auto":m.position==="right","m-auto":m.position==="center","mr-auto":m.position==="left","!hidden":u==="Mobile"}),children:m.menuItems.map((k,D)=>E(k))}),t.jsx(V,{variant:"ghost",size:"icon",className:_("md:hidden text-accent-foreground focus:outline-none",{"ml-auto":m.position==="right","m-auto":m.position==="center","mr-auto":m.position==="left","!flex":u==="Mobile"}),onClick:()=>g(!c),children:c?t.jsx(at,{size:24}):t.jsx(or,{size:24})})]}),c&&t.jsx("div",{className:_("px-1 shadow-md border-muted-foreground",{"ml-auto":m.position==="right","m-auto":m.position==="center","mr-auto":m.position==="left"}),children:m.menuItems.map((k,D)=>t.jsx("button",{className:_("block w-full border-0 outline-none focus:outline-none"),onClick:()=>g(!c),children:m.hashNavigation?k.goToUrl==="login"||k.goToUrl==="logout"?T(k):N(k):T(k)}))})]});return o.editor.liveMode?G():t.jsx("div",{draggable:!1,onDragStart:k=>x(k,"navbar"),onMouseEnter:()=>r({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:v,className:_("m-[5px] relative text-[16px] transition-all",{"!p-[8px]":!o.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":o.editor.selectedElement.id===e.id&&!o.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!o.editor.liveMode&&o.editor.hoveredElement.id===e.id,"!border-solid":o.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!o.editor.liveMode}),style:U(),children:G()})},sd=({element:e})=>{const{pageId:a}=te(),{dispatch:s,state:r}=H(),{userState:o}=de(),{compilerState:i}=J(),n=(x,v)=>{x.dataTransfer.setData("componentType",v)},d=x=>{x.stopPropagation(),s({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},l=r.editor.liveMode?W():r.editor.device,c=e.styles[l],g=e.content,u=e.specialContent.tabs,f=x=>{if(!r.editor.liveMode||r.editor.previewMode)return!1;if(x.disabled)return!0;if(x.access==="public")return!1;const v=r.pages.find(w=>w.page.name===a);if(!v)return!0;if(o&&i.projectOwner&&o.email===i.projectOwner.email)return!1;if(v.page.allowed.length>0&&o){const w=v.page.allowed.find(T=>T.user.email===o.email);if(w&&!w.readonly)return!1}return!0},m=()=>t.jsxs(Na,{defaultValue:u.default,style:c,children:[t.jsx(Ot,{className:`grid w-full grid-cols-${u.items.length}`,children:u.items.map(x=>t.jsx(tt,{value:x.label,disabled:f(x),children:x.label}))}),u.items.map((x,v)=>t.jsx(st,{value:x.label,children:Array.isArray(g)&&t.jsx(ee,{element:g[v]})}))]});return r.editor.liveMode?t.jsx("div",{className:_("w-full h-fit",{[`${e==null?void 0:e.animation}`]:r.editor.liveMode&&(e==null?void 0:e.animation)}),children:m()}):t.jsx("div",{draggable:!1,onDragStart:x=>n(x,"tabs"),onMouseEnter:()=>s({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:d,className:_("w-full h-fit m-[5px] relative text-[16px] transition-all",{"p-[2px]":!r.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":r.editor.selectedElement.id===e.id&&!r.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!r.editor.liveMode&&r.editor.hoveredElement.id===e.id,"!border-solid":r.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!r.editor.liveMode}),children:m()})},ad=({element:e})=>{const{dispatch:a,state:s}=H(),{handleFormContextChange:r}=he(),o=s.editor.liveMode?W():s.editor.device,i=e.styles[o],n=e.content.colorInput,[d,l]=h.useState(n.value||"");h.useEffect(()=>{n.fireChange&&u({target:{value:n.value}})},[n.fireChange]);const c=(f,m)=>{f.dataTransfer.setData("componentType",m)},g=f=>{f.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function u(f){l(f.target.value),r({id:n.id,key:n.name,value:f.target.value}),a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,colorInput:{...n,value:f.target.value,fireChange:!1}}}}})}return t.jsxs("div",{style:i,draggable:"false",onDragStart:f=>c(f,"inputColor"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:g,className:_(`m-[5px] relative text-[16px] transition-all ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"p-1",children:[t.jsx("label",{htmlFor:n.id,className:_("px-2 text-sm py-2 text-muted-foreground",{hidden:n.label.hidden}),children:n.label.value}),t.jsx(Q,{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",type:n.hidden?"hidden":"color",id:n.id,name:n.name,placeholder:n.placeholder?n.placeholder:"Enter value...",disabled:n.disabled||!1,value:d,onChange:f=>u(f),readOnly:n.readOnly||!1})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},od=({element:e,customData:a})=>{const{pageId:s}=te(),{toast:r}=q(),o=e.content.video,{compilerState:i}=J(),{state:n,dispatch:d}=H(),l=n.editor.liveMode?W():n.editor.device,c=e.styles[l],[g,u]=h.useState("");h.useEffect(()=>{if(o.sourceType==="ASSETS"){if(o.src.trim()==="")return;(()=>{(async()=>{const v=await fe({assetOutputType:"video",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(`data/assets/${o.src}`)}`});u(v.data)})()})()}},[o.sourceType,o.src]),h.useEffect(()=>{var v,w;if(o.sourceType==="ASSETS"||!o.fromBrowxy)return;const p=i.outputAssetPage[s||""];if(!p||!p.outputAsset)return;const x=p.outputAsset.statusCode;if(x===400){r({title:"Error",description:((w=(v=p.outputAsset)==null?void 0:v.error)==null?void 0:w.message)||"An unexpected error has occurred",variant:"destructive",duration:4e3});return}if(x===200){let T="";o.key&&typeof o.key=="string"&&(o.key in p.outputAsset?T=p.outputAsset[o.key]:o.key.split(".").reduce((N,b)=>N&&N[b],p.outputAsset)&&(T=o.key.split(".").reduce((N,b)=>N&&N[b],p.outputAsset))),T!==""&&(async()=>{const j=await fe({assetOutputType:"video",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(T)}`});u(j.data)})()}},[i.outputAssetPage,i.projectCompositeId,o.key,s,r,o.fromBrowxy,o.sourceType]),h.useEffect(()=>{var v,w;if(o.sourceType==="ASSETS"||o.fromBrowxy)return;if(a){o.key&&typeof o.key=="string"?u(a[o.key]):u(o.src);return}u(o.src);const p=i.outputAssetPage[s||""];if(!p||!p.outputAsset)return;const x=p.outputAsset.statusCode;if(x===400){r({title:"Error",description:((w=(v=p.outputAsset)==null?void 0:v.error)==null?void 0:w.message)||"An unexpected error has occurred",variant:"destructive"});return}if(x===200&&o.key&&typeof o.key=="string"){if(o.key in p.outputAsset)u(p.outputAsset[o.key]);else if(o.key.split(".").reduce((T,N)=>T&&T[N],p.outputAsset)){const T=o.key.split(".").reduce((N,b)=>N&&N[b],p.outputAsset);u((T==null?void 0:T.toString())||"")}}},[u,i.outputAssetPage,o.key,o.src,s,r,a,o.fromBrowxy,o.sourceType]);const f=(p,x)=>{p.dataTransfer.setData("componentType",x)},m=p=>{p.stopPropagation(),d({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return t.jsxs("div",{draggable:!1,onDragStart:p=>f(p,"video"),onMouseEnter:()=>d({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:m,className:_(`m-[5px] w-fit h-fit relative text-[16px] transition-all flex items-center justify-center ${!n.editor.liveMode&&n.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!n.editor.liveMode,"!border-blue-500":n.editor.selectedElement.id===e.id,"!border-solid":n.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!n.editor.liveMode}),children:[n.editor.selectedElement.id===e.id&&!n.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:n.editor.selectedElement.name}),i.isLoading?t.jsx(t.Fragment,{}):!Array.isArray(e.content)&&t.jsx("video",{controls:!0,loop:o.loop?!0:void 0,autoPlay:o.autoplay?!0:void 0,muted:o.muted?!0:void 0,preload:"auto",style:c,src:g,children:t.jsx("p",{children:"Your browser does not support the video tag."})}),n.editor.selectedElement.id===e.id&&!n.editor.liveMode&&t.jsx(we,{element:e})]})},rd=({element:e,customData:a})=>{const{pageId:s,projectId:r}=te(),{setOpen:o,setClose:i}=me(),{toast:n}=q(),d=e.content.audio,{compilerState:l}=J(),{state:c,dispatch:g}=H(),u=c.editor.liveMode?W():c.editor.device,f=e.styles[u],[m,p]=h.useState("");return h.useEffect(()=>{if(d.sourceType==="ASSETS"){if(d.src.trim()==="")return;(()=>{(async()=>{const T=await fe({assetOutputType:"audio",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(`data/assets/${d.src}`)}`});p(T.data)})()})()}},[d.sourceType,d.src]),h.useEffect(()=>{var T,N;if(d.sourceType==="ASSETS"||!d.fromBrowxy)return;const v=l.outputAssetPage[s||""];if(!v||!v.outputAsset)return;const w=v.outputAsset.statusCode;if(w===400){n({title:"Error",description:((N=(T=v.outputAsset)==null?void 0:T.error)==null?void 0:N.message)||"An unexpected error has occurred",variant:"destructive",duration:4e3});return}if(w===200){let b="";d.key&&typeof d.key=="string"&&(d.key in v.outputAsset?b=v.outputAsset[d.key]:d.key.split(".").reduce((j,M)=>j&&j[M],v.outputAsset)&&(b=d.key.split(".").reduce((j,M)=>j&&j[M],v.outputAsset))),b!==""&&(async()=>{const E=await fe({assetOutputType:"audio",assetUrl:`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(b)}`});p(E.data)})()}},[l.outputAssetPage,l.projectCompositeId,d.key,s,n,d.fromBrowxy,d.sourceType]),h.useEffect(()=>{var T,N;if(d.sourceType==="ASSETS"||d.fromBrowxy)return;if(a){d.key&&typeof d.key=="string"?p(a[d.key]):p(d.src);return}p(d.src);const v=l.outputAssetPage[s||""];if(!v||!v.outputAsset)return;const w=v.outputAsset.statusCode;if(w===400){n({title:"Error",description:((N=(T=v.outputAsset)==null?void 0:T.error)==null?void 0:N.message)||"An unexpected error has occurred",variant:"destructive"});return}if(w===200&&d.key&&typeof d.key=="string"){if(d.key in v.outputAsset)p(v.outputAsset[d.key]);else if(d.key.split(".").reduce((b,j)=>b&&b[j],v.outputAsset)){const b=d.key.split(".").reduce((j,M)=>j&&j[M],v.outputAsset);p((b==null?void 0:b.toString())||"")}}},[p,l.outputAssetPage,d.key,d.src,s,n,a,d.fromBrowxy,d.sourceType]),l.isLoading?t.jsx(t.Fragment,{}):t.jsx("audio",{controls:!0,loop:d.loop?!0:void 0,autoPlay:d.autoplay?!0:void 0,muted:d.muted?!0:void 0,preload:"auto",style:f,src:m,className:_({[`${e==null?void 0:e.animation}`]:c.editor.liveMode&&(e==null?void 0:e.animation)}),children:t.jsx("p",{children:"Your browser does not support the audio tag."})})},Ia=L.forwardRef(({className:e,...a},s)=>t.jsx(Bs,{className:S("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:s,children:t.jsx(rr,{className:S("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ia.displayName=Bs.displayName;const nd=({element:e})=>{const{dispatch:a,state:s}=H(),{handleFormContextChange:r}=he(),o=s.editor.liveMode?W():s.editor.device,i=e.styles[o],n=e.content.checkbox,[d,l]=h.useState(n.value);h.useEffect(()=>{n.fireChange&&u(n.value)},[n.fireChange]);const c=(f,m)=>{f.dataTransfer.setData("componentType",m)},g=f=>{f.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};function u(f){l(f),r({id:n.id,key:n.name,value:f}),a({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{...e.content,checkbox:{...n,value:f,fireChange:!1}}}}})}return t.jsxs("div",{style:i,draggable:"false",onDragStart:f=>c(f,"checkbox"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:g,className:_(`m-[5px] relative text-[16px] transition-all ${!s.editor.liveMode&&s.editor.hoveredElement.id===e.id&&"hover:border-[3px] hover:border-emerald-600"}`,{"p-[2px]":!s.editor.liveMode,"!border-blue-500":s.editor.selectedElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-slate-300":!s.editor.liveMode}),children:[s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(ge,{className:"absolute -top-[23px] -left-[1px] rounded-none rounded-t-lg ",children:s.editor.selectedElement.name}),!Array.isArray(e.content)&&t.jsxs("div",{className:"p-1 flex gap-2 items-center",style:i,children:[n.variant==="switch"&&t.jsx(Ia,{checked:d,onCheckedChange:f=>u(f),disabled:n.hidden}),t.jsx(Q,{className:_("peer h-5 w-5 shrink-0 rounded-md border border-primary bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"accent-primary":d}),type:n.variant==="switch"||n.hidden?"hidden":"checkbox",id:n.id,name:n.name,disabled:n.disabled||!1,value:d===!0?"true":"false",onChange:f=>u(f.target.checked)}),t.jsx("label",{htmlFor:n.id,className:_("text-sm  text-muted-foreground",{hidden:n.label.hidden}),children:n.label.value})]}),s.editor.selectedElement.id===e.id&&!s.editor.liveMode&&t.jsx(we,{element:e})]})},id=({element:e})=>{const{toast:a}=q(),{setOpen:s,setClose:r}=me(),{dispatch:o,state:i}=H(),n=i.editor.liveMode?W():i.editor.device,d=e.styles[n],l=e.content.whatsappButton,c={...d,borderRadius:l.variant==="rounded"?"50%":"0"},g=(v,w)=>{v.dataTransfer.setData("componentType",w)},u=v=>{v.stopPropagation(),o({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},f=()=>{if(!i.editor.liveMode)return;if(l.phoneNumber===""){a({title:"Error",description:"The owner of the page did not provide a valid phone number",variant:"destructive"});return}const v=document.createElement("a");v.href=`https://api.whatsapp.com/send?phone=+${l==null?void 0:l.phoneNumber}&text=${encodeURIComponent(l.message+" ")}`,v.setAttribute("target","_blank"),v.click()},m=()=>!i.editor.liveMode&&c.position&&c.position==="fixed"?{...c,position:"unset"}:c,p=()=>t.jsx("button",{onClick:f,style:m(),className:_({[`${e==null?void 0:e.animation}`]:i.editor.liveMode&&(e==null?void 0:e.animation)}),children:t.jsx("svg",{className:"h-full w-full",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#ffffff",stroke:"current",children:t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.403 5.633A8.919 8.919 0 0 0 12.053 3c-4.948 0-8.976 4.027-8.978 8.977 0 1.582.413 3.126 1.198 4.488L3 21.116l4.759-1.249a8.981 8.981 0 0 0 4.29 1.093h.004c4.947 0 8.975-4.027 8.977-8.977a8.926 8.926 0 0 0-2.627-6.35m-6.35 13.812h-.003a7.446 7.446 0 0 1-3.798-1.041l-.272-.162-2.824.741.753-2.753-.177-.282a7.448 7.448 0 0 1-1.141-3.971c.002-4.114 3.349-7.461 7.465-7.461a7.413 7.413 0 0 1 5.275 2.188 7.42 7.42 0 0 1 2.183 5.279c-.002 4.114-3.349 7.462-7.461 7.462m4.093-5.589c-.225-.113-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.112s-.58.729-.711.879-.262.168-.486.056-.947-.349-1.804-1.113c-.667-.595-1.117-1.329-1.248-1.554s-.014-.346.099-.458c.101-.1.224-.262.336-.393.112-.131.149-.224.224-.374s.038-.281-.019-.393c-.056-.113-.505-1.217-.692-1.666-.181-.435-.366-.377-.504-.383a9.65 9.65 0 0 0-.429-.008.826.826 0 0 0-.599.28c-.206.225-.785.767-.785 1.871s.804 2.171.916 2.321c.112.15 1.582 2.415 3.832 3.387.536.231.954.369 1.279.473.537.171 1.026.146 1.413.089.431-.064 1.327-.542 1.514-1.066.187-.524.187-.973.131-1.067-.056-.094-.207-.151-.43-.263"})})});return i.editor.liveMode?p():t.jsx("div",{draggable:!1,onDragStart:v=>g(v,"whatsappButton"),onMouseEnter:()=>o({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:u,className:_("w-fit m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-[2px]":!i.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":i.editor.selectedElement.id===e.id&&!i.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!i.editor.liveMode&&i.editor.hoveredElement.id===e.id,"!border-solid":i.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!i.editor.liveMode}),children:!Array.isArray(e.content)&&t.jsx("div",{className:"relative group w-fit h-fit",children:p()})})},dd=({element:e})=>{const{dispatch:a,state:s}=H(),{toast:r}=q(),{setOpen:o,setClose:i}=me(),n=s.editor.liveMode?W():s.editor.device,d=e.styles[n],l=e.content.emailButton,c={...d,borderRadius:l.variant==="rounded"?"50%":"0"},g=(v,w)=>{v.dataTransfer.setData("componentType",w)},u=v=>{v.stopPropagation(),a({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})},f=()=>!s.editor.liveMode&&c.position&&c.position==="fixed"?{...c,position:"unset"}:c,m=()=>{if(!s.editor.liveMode)return;if(!kt((l==null?void 0:l.email)||"")){r({title:"Error",description:"The owner of the page did not provide a valid email",variant:"destructive"});return}let v=`mailto:${l.email}?subject=${encodeURIComponent(l.subject+" ")}&body=${encodeURIComponent(l.body+" ")}`;Vs()||(v=`https://mail.google.com/mail/?ui=2&view=cm&fs=1&tf=1&to=${l.email}&su=${encodeURIComponent(l.subject+" ")}&body=${encodeURIComponent(l.body+" ")} `);const w=document.createElement("a");w.href=v,w.setAttribute("target","_blank"),w.click()},p=()=>t.jsx("button",{onClick:m,style:f(),className:_({[`${e==null?void 0:e.animation}`]:s.editor.liveMode&&(e==null?void 0:e.animation)}),children:t.jsx(Gs,{className:"h-[80%] w-[80%] m-auto stroke-white"})});return s.editor.liveMode?p():t.jsx("div",{draggable:!1,onDragStart:v=>g(v,"emailButton"),onMouseEnter:()=>a({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:u,className:_("w-fit m-[5px] relative text-[16px] transition-all flex items-center justify-center",{"p-[2px]":!s.editor.liveMode,"!border-[2px] !border-blue-500 z-[300]":s.editor.selectedElement.id===e.id&&!s.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!s.editor.liveMode&&s.editor.hoveredElement.id===e.id,"!border-solid":s.editor.selectedElement.id===e.id,"border-dashed border-[1px] border-muted-foreground":!s.editor.liveMode}),children:!Array.isArray(e.content)&&t.jsx("div",{className:"relative group w-fit h-fit",children:p()})})},es=({images:e,styles:a,enableExpand:s})=>{const[r,o]=h.useState(0);return t.jsxs("div",{className:_("relative w-full mx-auto overflow-hidden rounded-2xl bg-inherit"),children:[e.length>0&&t.jsx(Ma,{src:e[r],alt:`Slide ${r}`,styles:{width:"100%",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"50ms",...a||{}},enableExpand:s}),t.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex gap-2 bg-white p-1 rounded-[21px]",children:e.map((i,n)=>t.jsx("button",{onClick:()=>o(n),className:`w-3 h-3 rounded-full ${n===r?"bg-black":"bg-gray-400"}`},n))})]})},ld=({element:e})=>{const{pageId:a,projectId:s}=te(),{setOpen:r,setClose:o}=me(),{toast:i}=q(),n=e.content.gallery,{compilerState:d}=J(),{state:l,dispatch:c}=H(),g=l.editor.liveMode?W():l.editor.device,u=e.styles[g],[f,m]=h.useState(!1),[p,x]=h.useState([]),v=h.useCallback(async()=>{if(!n.images.length)return;if(!l.editor.liveMode&&n.cachedImage.urls&&n.cachedImage.urls.length>0&&n.cachedImage.updated&&w(n.cachedImage.updated)){x(n.cachedImage.urls);return}m(!0);const j=[];for(const M of n.images){const E=`${Y.GET_ASSET_FILE_URL}${encodeURIComponent(`data/assets/${M}`)}`,A=await fe({assetOutputType:"image",assetUrl:E});j.push(A.data),await Ue(500)}c({type:"UPDATE_ELEMENT",payload:{elementDetails:{...e,content:{gallery:{...e.content.gallery,cachedImage:{urls:j,updated:Date.now()}}}}}}),x(j),await Ue(500),m(!1)},[n.images,s,n.cachedImage,l.editor.liveMode,e,c]);h.useEffect(()=>{n.sourceType!=="CUSTOM"&&v()},[v,n.sourceType]),h.useEffect(()=>{n.sourceType!=="ASSETS"&&x(n.images)},[d.projectCompositeId,a,i,n.images,n.sourceType]);const w=j=>!(Date.now()-(j||1)>36e5),T=(j,M)=>{j.dataTransfer.setData("componentType",M)},N=j=>{j.stopPropagation(),c({type:"CHANGE_CLICKED_ELEMENT",payload:{elementDetails:e}})};return l.editor.liveMode?t.jsx("div",{className:"relative overflow-hidden mx-auto h-fit w-fit p-1 shadow-lg rounded-2xl bg-inherit",style:u,children:f?t.jsx("div",{className:"flex items-center justify-center h-full w-full",children:t.jsx(Ae,{className:"w-6 h-6 text-white"})}):t.jsx(es,{images:p,styles:{width:"100%",height:"auto",margin:"auto",objectFit:"cover"},enableExpand:n.enableExpand})}):t.jsx("div",{draggable:!1,onDragStart:j=>T(j,"gallery"),onMouseEnter:()=>c({type:"CHANGE_HOVERED_ELEMENT",payload:{elementDetails:e}}),onClick:N,className:_(`m-[5px] ${!l.editor.liveMode&&p.length===0?"w-full h-[300px]":"w-fit h-fit"} relative text-[16px] transition-all flex items-center justify-center`,{"!border-2px] !border-blue-500 z-[300]":l.editor.selectedElement.id===e.id&&!l.editor.liveMode,"hover:!border-[3px] hover:!border-emerald-600":!l.editor.liveMode&&l.editor.hoveredElement.id===e.id,"!border-solid":l.editor.selectedElement.id===e.id,"p-[2px] border-dashed border-[1px] border-muted-foreground":!l.editor.liveMode,"p-[10px] w-full":!l.editor.liveMode&&n.images.length===0&&n.sourceType==="CUSTOM"}),children:d.isLoading?t.jsx(t.Fragment,{}):!Array.isArray(e.content)&&t.jsx("div",{className:"relative group w-fit h-fit",children:t.jsx("div",{className:"relative overflow-hidden mx-auto h-fit w-fit p-1 shadow-lg rounded-2xl bg-inherit",style:u,children:f?t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:t.jsx(Ae,{className:"w-8 h-8 text-white"})}):t.jsx(es,{images:p,styles:{width:"100%",height:"auto",margin:"auto",objectFit:"cover"},enableExpand:!1})})})})},ee=({element:e,extraProps:a,customData:s})=>{switch(e.type){case"__body":case"container":case"2Col":case"3Col":case"parallax":return t.jsx(ti,{element:e,customData:s,extraProps:a});case"grid":return t.jsx(Zi,{element:e,customData:s});case"text":return t.jsx(_i,{element:e,customData:s});case"inputText":return t.jsx(ii,{element:e});case"inputDate":return t.jsx(zi,{element:e});case"inputTextarea":return t.jsx(Oi,{element:e,customData:s});case"combobox":return t.jsx(Gi,{element:e});case"inputNumber":return t.jsx(Bi,{element:e});case"inputFile":return t.jsx(Wi,{element:e});case"inputColor":return t.jsx(ad,{element:e});case"checkbox":return t.jsx(nd,{element:e});case"table":return t.jsx(Ii,{element:e});case"customSourceContent":return t.jsx(Li,{element:e});case"json":return t.jsx(di,{element:e});case"link":return t.jsx(li,{element:e,customData:s});case"button":return t.jsx(pn,{element:e,extraProps:a});case"downloadLink":return t.jsx(Qi,{element:e,customData:s});case"formGroup":return t.jsx(ri,{element:e,extraProps:a});case"image":return t.jsx(Pi,{element:e,customData:s});case"gallery":return t.jsx(ld,{element:e,customData:s});case"video":return t.jsx(od,{element:e,customData:s});case"audio":return t.jsx(rd,{element:e,customData:s});case"email":return t.jsx(Ui,{element:e,customData:s});case"whatsapp":return t.jsx($i,{element:e,customData:s});case"iframe":return t.jsx(Xi,{element:e});case"separator":return t.jsx(ed,{element:e});case"navbar":return t.jsx(td,{element:e});case"tabs":return t.jsx(sd,{element:e});case"whatsappButton":return t.jsx(id,{element:e});case"emailButton":return t.jsx(dd,{element:e});default:return null}},cd=({pageId:e,liveMode:a})=>{const{dispatch:s,state:r}=H(),{userState:o}=de(),{compilerState:i}=J(),[n,d]=h.useState(!0),[l,c]=h.useState(null),g=$e();h.useEffect(()=>{a&&s({type:"TOGGLE_LIVE_MODE",payload:{value:!0}})},[a,s]);const u=h.useCallback(async()=>{if(i.projectCompositeId!==null)try{const N=await oa({file:`${e}.json`,path:Qr});if(!N||N.statusCode>=400){c(N.message);return}s({type:"LOAD_DATA",payload:{elements:JSON.parse(N.content),withLive:!!a,pages:window.__config.pages}})}catch(N){console.error(N),c("Internal error")}finally{d(!1)}},[e]);h.useEffect(()=>{u()},[u]);const f=()=>{s({type:"CHANGE_CLICKED_ELEMENT",payload:{}})},m=()=>{s({type:"TOGGLE_PREVIEW_MODE"}),s({type:"TOGGLE_LIVE_MODE"})},p=()=>t.jsxs("div",{className:_("use-automation-zoom-in h-full overflow-scroll no-scrollbar mr-[385px] bg-background transition-all",{"!p-0 !mr-0":r.editor.previewMode===!0||r.editor.liveMode===!0,"!w-[850px]":r.editor.device==="Tablet","!w-[420px]":r.editor.device==="Mobile","w-[100dvw]":r.editor.device==="Desktop","pb-[120px]":!r.editor.liveMode}),onClick:f,children:[r.editor.previewMode&&r.editor.liveMode&&t.jsx(V,{size:"icon",className:"w-6 h-6 p-[2px] fixed top-0 left-0 z-[100]",onClick:m,children:t.jsx(nr,{})}),Array.isArray(r.editor.elements)&&r.editor.elements.map(N=>t.jsx(ee,{element:N},N.id))]}),x=()=>t.jsx(pe,{to:"/error",state:{message:l}}),v=()=>t.jsx(pe,{to:"/unauthorized"}),w=()=>{const N=`/${X.LOGIN}`;return t.jsx(pe,{to:N,state:{lastLocation:g.pathname}})},T=()=>{const N=r.pages.find(b=>b.page.name===e);if(!N){c("Page not found");return}return(N==null?void 0:N.page.accessType)==="private"?o?o&&i.projectOwner&&o.email===i.projectOwner.email||N.page.allowed.length>0&&o&&N.page.allowed.find(j=>j.user.email===o.email)?p():v():w():p()};return!e||e===""?t.jsx(pe,{to:"/not-found"}):n?t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-background z-[110]",children:t.jsx(Ae,{size:"large",className:"stroke-primary"})}):l?x():T()},ud=()=>{const{compilerState:e,compilerDispatch:a}=J(),{pageId:s}=te(),[r,o]=h.useState(!0);$s(),h.useEffect(()=>{if(e.projectCompositeId===null){const{projectId:n,owner:d}=window.__config;a({type:"SET_PROJECT_ID_AND_OWNER",payload:{projectCompositeId:`USER_${n}`,projectOwner:d}})}},[a,e.projectCompositeId]);const i=h.useCallback(async()=>{if(e.projectCompositeId!==null){const n=await oa({file:"config.json",path:Zr});if(!n||n.statusCode>=400){console.error("[ READ PUBLIC FILE CONFIG ]"),a({type:"SET_PROJECT_CONFIG",payload:{projectConfig:null}}),o(!1);return}a({type:"SET_PROJECT_CONFIG",payload:{projectConfig:JSON.parse(n.content)}}),o(!1);return}},[a,e.projectCompositeId]);return h.useEffect(()=>{i()},[i]),h.useEffect(()=>{s&&(document.title=s)},[s]),r?t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-background z-[110]",children:t.jsx(Ae,{size:"large",className:"stroke-primary"})}):t.jsx("div",{className:"fixed top-0 bottom-0 left-0 right-0 z-[20] bg-background overflow-hidden",children:t.jsx(si,{children:t.jsx(sn,{pageId:s||"",children:t.jsx(cd,{pageId:s||"",liveMode:!0})})})})},pd=({children:e,requireAdmin:a=!1})=>{const{userState:s}=de(),r=$e(),o=`/${X.LOGIN}`,i=`/${X.UNAUTHORIZED}`;return s?a&&!s.isAdmin?t.jsx(pe,{to:i,replace:!0}):e||t.jsx(Tt,{}):t.jsx(pe,{to:o,relative:"route",state:{lastLocation:r.pathname}})},fd=Us,md=Os,Ra=L.forwardRef(({className:e,...a},s)=>t.jsx(ot,{className:S("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));Ra.displayName=ot.displayName;const hd=ke("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_a=L.forwardRef(({side:e="right",className:a,showX:s,children:r,...o},i)=>t.jsxs(md,{children:[t.jsx(Ra,{}),t.jsxs(rt,{ref:i,className:S(hd({side:e}),a),...o,children:[r,t.jsxs(Dt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s&&t.jsx(at,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_a.displayName=rt.displayName;const La=({className:e,...a})=>t.jsx("div",{className:S("flex flex-col space-y-2 text-center sm:text-left",e),...a});La.displayName="SheetHeader";const Pa=L.forwardRef(({className:e,...a},s)=>t.jsx(nt,{ref:s,className:S("text-lg font-semibold text-foreground",e),...a}));Pa.displayName=nt.displayName;const Oa=L.forwardRef(({className:e,...a},s)=>t.jsx(it,{ref:s,className:S("text-sm text-muted-foreground",e),...a}));Oa.displayName=it.displayName;function ts({className:e,...a}){return t.jsx("div",{className:S("animate-pulse rounded-md bg-primary/10",e),...a})}function gd(e){const[a,s]=h.useState(!1);return h.useEffect(()=>{function r(i){s(i.matches)}const o=matchMedia(e);return o.addEventListener("change",r),s(o.matches),()=>o.removeEventListener("change",r)},[e]),a}const xd="sidebar_state",yd=60*60*24*7,bd="16rem",vd="3rem",Ed="b",Ua=h.createContext(null),$a=h.forwardRef(({defaultOpen:e=!0,open:a,onOpenChange:s,className:r,style:o,children:i,...n},d)=>{const l=gd("(max-width: 768px)"),[c,g]=h.useState(!1),[u,f]=h.useState(e),m=a??u,p=h.useCallback(T=>{const N=typeof T=="function"?T(m):T;s?s(N):f(N),document.cookie=`${xd}=${N}; path=/; max-age=${yd}`},[s,m]),x=h.useCallback(()=>l?g(T=>!T):p(T=>!T),[l,p,g]);h.useEffect(()=>{const T=N=>{N.key===Ed&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),x())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[x]);const v=m?"expanded":"collapsed",w=h.useMemo(()=>({state:v,open:m,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:g,toggleSidebar:x}),[v,m,p,l,c,g,x]);return t.jsx(Ua.Provider,{value:w,children:t.jsx(pa,{delayDuration:0,children:t.jsx("div",{style:{"--sidebar-width":bd,"--sidebar-width-icon":vd,...o},className:S("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:d,...n,children:i})})})});$a.displayName="SidebarProvider";const pt=()=>{const e=h.useContext(Ua);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e},wd="18rem",Fa=L.forwardRef(({side:e="left",variant:a="sidebar",collapsible:s="offcanvas",className:r,children:o,...i},n)=>{const{isMobile:d,state:l,openMobile:c,setOpenMobile:g}=pt();return s==="none"?t.jsx("div",{className:S("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:n,...i,children:o}):d?t.jsx(fd,{open:c,onOpenChange:g,...i,children:t.jsxs(_a,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":wd},side:e,children:[t.jsxs(La,{className:"sr-only",children:[t.jsx(Pa,{children:"Sidebar"}),t.jsx(Oa,{children:"Displays the mobile sidebar."})]}),t.jsx("div",{className:"flex h-full w-full flex-col",children:o})]})}):t.jsxs("div",{ref:n,className:"group peer hidden text-sidebar-foreground md:block","data-state":l,"data-collapsible":l==="collapsed"?s:"","data-variant":a,"data-side":e,children:[t.jsx("div",{className:S("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",a==="floating"||a==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),t.jsx("div",{className:S("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",a==="floating"||a==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:t.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:o})})]})});Fa.displayName="Sidebar";const Ga=L.forwardRef(({className:e,onClick:a,...s},r)=>{const{toggleSidebar:o}=pt();return t.jsxs(V,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:S("h-7 w-7",e),onClick:i=>{a==null||a(i),o()},...s,children:[t.jsx(ir,{}),t.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Ga.displayName="SidebarTrigger";const jd=L.forwardRef(({className:e,...a},s)=>{const{toggleSidebar:r}=pt();return t.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:S("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...a})});jd.displayName="SidebarRail";const Cd=L.forwardRef(({className:e,...a},s)=>t.jsx("main",{ref:s,className:S("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...a}));Cd.displayName="SidebarInset";const Nd=L.forwardRef(({className:e,...a},s)=>t.jsx(Q,{ref:s,"data-sidebar":"input",className:S("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...a}));Nd.displayName="SidebarInput";const Sd=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"header",className:S("flex flex-col gap-2 p-2",e),...a}));Sd.displayName="SidebarHeader";const za=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"footer",className:S("flex flex-col gap-2 p-2",e),...a}));za.displayName="SidebarFooter";const Td=L.forwardRef(({className:e,...a},s)=>t.jsx(dr,{ref:s,"data-sidebar":"separator",className:S("mx-2 w-auto bg-sidebar-border",e),...a}));Td.displayName="SidebarSeparator";const Ba=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"content",className:S("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...a}));Ba.displayName="SidebarContent";const Ha=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"group",className:S("relative flex w-full min-w-0 flex-col p-2",e),...a}));Ha.displayName="SidebarGroup";const Va=L.forwardRef(({className:e,asChild:a=!1,...s},r)=>{const o=a?ze:"div";return t.jsx(o,{ref:r,"data-sidebar":"group-label",className:S("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...s})});Va.displayName="SidebarGroupLabel";const Ad=L.forwardRef(({className:e,asChild:a=!1,...s},r)=>{const o=a?ze:"button";return t.jsx(o,{ref:r,"data-sidebar":"group-action",className:S("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...s})});Ad.displayName="SidebarGroupAction";const Wa=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"group-content",className:S("w-full text-sm",e),...a}));Wa.displayName="SidebarGroupContent";const Ct=L.forwardRef(({className:e,...a},s)=>t.jsx("ul",{ref:s,"data-sidebar":"menu",className:S("flex w-full min-w-0 flex-col gap-1",e),...a}));Ct.displayName="SidebarMenu";const Nt=L.forwardRef(({className:e,...a},s)=>t.jsx("li",{ref:s,"data-sidebar":"menu-item",className:S("group/menu-item relative",e),...a}));Nt.displayName="SidebarMenuItem";const Dd=ke("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),St=L.forwardRef(({asChild:e=!1,isActive:a=!1,variant:s="default",size:r="default",tooltip:o,className:i,...n},d)=>{const l=e?ze:"button",{isMobile:c,state:g}=pt(),u=t.jsx(l,{ref:d,"data-sidebar":"menu-button","data-size":r,"data-active":a,className:S(Dd({variant:s,size:r}),i),...n});return o?(typeof o=="string"&&(o={children:o}),t.jsxs(fa,{children:[t.jsx(ma,{asChild:!0,children:u}),t.jsx(Lt,{side:"right",align:"center",hidden:g!=="collapsed"||c,...o})]})):u});St.displayName="SidebarMenuButton";const kd=L.forwardRef(({className:e,asChild:a=!1,showOnHover:s=!1,...r},o)=>{const i=a?ze:"button";return t.jsx(i,{ref:o,"data-sidebar":"menu-action",className:S("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});kd.displayName="SidebarMenuAction";const Md=L.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:S("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...a}));Md.displayName="SidebarMenuBadge";const Id=L.forwardRef(({className:e,showIcon:a=!1,...s},r)=>{const o=L.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return t.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:S("flex h-8 items-center gap-2 rounded-md px-2",e),...s,children:[a&&t.jsx(ts,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),t.jsx(ts,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})});Id.displayName="SidebarMenuSkeleton";const Rd=L.forwardRef(({className:e,...a},s)=>t.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:S("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...a}));Rd.displayName="SidebarMenuSub";const _d=L.forwardRef(({...e},a)=>t.jsx("li",{ref:a,...e}));_d.displayName="SidebarMenuSubItem";const Ld=L.forwardRef(({asChild:e=!1,size:a="md",isActive:s,className:r,...o},i)=>{const n=e?ze:"a";return t.jsx(n,{ref:i,"data-sidebar":"menu-sub-button","data-size":a,"data-active":s,className:S("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",a==="sm"&&"text-xs",a==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...o})});Ld.displayName="SidebarMenuSubButton";const Pd=()=>{const{userState:e}=de();return t.jsxs("div",{className:"mt-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),t.jsxs("h2",{className:"my-2 font-semibold",children:["Welcome ",e&&e.email]}),t.jsx("p",{children:"Administrate your project here."})]})};function Od({...e}){const{userState:a}=de(),s=$e(),r=[{title:"Home",url:"/",icon:lr},{title:"GDrive",url:`/${X.ADMIN}/${X.GDRIVE}`,icon:cr},{title:"Database Manager",url:`/${X.ADMIN}/${X.DATABASE}`,icon:ur}];return t.jsxs(Fa,{...e,children:[t.jsx(Ba,{children:t.jsxs(Ha,{children:[t.jsx(Va,{children:"Administration Panel"}),t.jsx(Wa,{children:t.jsx(Ct,{children:r.map(o=>t.jsx(Nt,{children:t.jsx(St,{asChild:!0,isActive:o.url===s.pathname,className:_("",{"bg-card":o.url===s.pathname}),children:t.jsxs(Oe,{to:o.url,children:[t.jsx(o.icon,{}),t.jsx("span",{children:o.title})]})})},o.title))})})]})}),t.jsx(za,{className:"border-t-2",children:t.jsx(Ct,{children:t.jsx(Nt,{children:t.jsxs(Ea,{children:[t.jsx(wa,{asChild:!0,children:t.jsxs(St,{children:[t.jsx(pr,{})," ",a&&a.email,t.jsx(xs,{className:"ml-auto"})]})}),t.jsx(Pt,{side:"top",className:"w-[--radix-popper-anchor-width]",children:t.jsx(ja,{children:t.jsx(Oe,{to:`/${X.LOGOUT}`,children:t.jsx("span",{children:"Sign out"})})})})]})})})})]})}const Ud=()=>{const e=$e();return h.useEffect(()=>{document.title="Admin Dashboard"},[]),t.jsxs($a,{children:[t.jsx(Od,{collapsible:"icon"}),t.jsxs("main",{children:[t.jsx(Ga,{}),e.pathname===`/${X.ADMIN}`?t.jsx(Pd,{}):t.jsx(Tt,{})]})]})},$d=()=>{const{toast:e}=q(),[a,s]=h.useState({sharedFolderId:"",sharedFileId:""}),[r,o]=h.useState({url:"",fileId:""}),[i,n]=h.useState(!1),[d,l]=h.useState(!1),c=async(f,m)=>{f.preventDefault();const{success:p,message:x}=g(m);if(!p){e({title:"Error",description:x,variant:"destructive"});return}try{n(!0);const v=await fetch(Y.GDRIVE_SERVICE_URL,{method:m,body:JSON.stringify(a),headers:{"Content-type":"application/json; charset=UTF-8"}});if(v.status!==200){const{message:j}=await v.json();e({title:"Error",description:j,variant:"destructive"});return}const{statusCode:w,message:T,url:N,fileId:b}=await v.json();if(w>=300){e({title:"Error",description:T,variant:"destructive"});return}e({title:"Success",description:T,variant:"default"}),o({url:N,fileId:b})}catch(v){console.error(v),e({title:"Error",description:"An error occurred when trying to make the request. Please try again later. Thank you.",variant:"destructive"})}finally{n(!1)}},g=f=>({POST:()=>a.sharedFolderId.trim()===""?{success:!1,message:"Folder ID is required"}:{success:!0,message:""},PUT:()=>a.sharedFileId.trim()===""?{success:!1,message:"File ID is required"}:{success:!0,message:""}})[f](),u=async f=>{try{await navigator.clipboard.writeText(f),l(!0),setTimeout(()=>l(!1),2e3)}catch(m){console.error("Failed to copy code",m)}};return t.jsxs("div",{className:"overflow-x-auto",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("h2",{className:"text-lg font-bold mb-2 text-center",children:"Upload/Download files to/from Google Drive"}),t.jsxs("div",{className:"flex flex-col gap-3 items-start w-full p-3 border border-muted rounded-xl",children:[t.jsx("p",{className:"p-1",children:'Create a new folder in your Google Drive and share it with the email address provided below. Make sure to copy the folder ID and paste it in the input field. Once you have shared the folder, you can upload files to it using the "Upload" button. Once you have uploaded files, you can download them using the "Download" button.'}),t.jsxs("p",{children:["Email with share:"," ",t.jsxs("span",{className:"font-bold relative group",children:[t.jsx("button",{onClick:()=>u(Zt),className:"absolute -top-6 right-2 p-1.5 bg-gray-800 rounded-md opacity-0 text-white  group-hover:opacity-100 transition-opacity",children:d?t.jsx(Ye,{size:16}):t.jsx(qe,{size:16})}),Zt]})]})]})]}),t.jsx(We,{className:"bg-muted h-[2px] mt-3"}),t.jsx("h3",{className:"mt-5 mb-2 text-lg text-ring",children:"Share Assets files"}),t.jsxs("div",{className:"grid grid-cols-2 gap-5 items-start justify-items-start",children:[t.jsxs("div",{className:"flex flex-col gap-3 items-start w-full p-3 border border-muted rounded-md",children:[t.jsxs(se,{className:"text-muted-foreground mb-1 flex items-center justify-between w-full",children:[t.jsx("p",{children:"Share Folder ID"}),t.jsx(fr,{className:"stroke-muted-foreground"})]}),t.jsx(Q,{type:"text",placeholder:"folder ID",value:a.sharedFolderId,onChange:f=>s(m=>({...m,sharedFolderId:f.target.value}))}),t.jsx(V,{className:"",disabled:i,onClick:f=>c(f,"POST"),children:"Upload to Drive"})]}),t.jsxs("div",{className:"flex flex-col gap-3 items-start w-full p-3 border border-muted rounded-md",children:[t.jsxs(se,{className:"text-muted-foreground mb-1 flex items-center justify-between w-full",children:[t.jsx("p",{children:"Share File ID"}),t.jsx(zs,{className:"stroke-muted-foreground"})]}),t.jsx(Q,{type:"text",placeholder:"file ID",value:a.sharedFileId,onChange:f=>s(m=>({...m,sharedFileId:f.target.value}))}),t.jsx(V,{disabled:i,onClick:f=>c(f,"PUT"),children:"Download from Drive"})]})]}),t.jsx("h3",{className:"mt-5 mb-2 text-lg text-ring",children:"Shared keys"}),t.jsxs("div",{className:"border border-muted rounded-md w-full flex flex-col gap-3  justify-start p-4",children:[t.jsxs("p",{children:[t.jsx("span",{className:"italic font-semibold text-muted-foreground",children:"Folder ID:"})," ",t.jsxs("span",{className:"font-bold relative group",children:[a.sharedFolderId!==""&&t.jsx("button",{onClick:()=>u(a.sharedFolderId),className:"absolute -top-8 right-2 p-1.5 bg-gray-800 rounded-md opacity-0 text-white  group-hover:opacity-100 transition-opacity",children:d?t.jsx(Ye,{size:16}):t.jsx(qe,{size:16})}),a.sharedFolderId]})]}),t.jsxs("p",{children:[t.jsx("span",{className:"italic font-semibold text-muted-foreground",children:"File ID:"})," ",t.jsxs("span",{className:"font-bold relative group",children:[r.fileId!==""&&t.jsx("button",{onClick:()=>u(r.fileId),className:"absolute -top-8 right-2 p-1.5 bg-gray-800 rounded-md opacity-0 text-white  group-hover:opacity-100 transition-opacity",children:d?t.jsx(Ye,{size:16}):t.jsx(qe,{size:16})}),r.fileId]})]}),t.jsxs("p",{children:[t.jsx("span",{className:"italic font-semibold text-muted-foreground",children:"Download Link:"})," ",t.jsxs("span",{className:"font-bold relative group",children:[r.url!==""&&t.jsx("button",{onClick:()=>u(r.url),className:"absolute -top-8 right-2 p-1.5 bg-gray-800 rounded-md opacity-0 text-white  group-hover:opacity-100 transition-opacity",children:d?t.jsx(Ye,{size:16}):t.jsx(qe,{size:16})}),r.url]})]})]})]})},Fd=()=>{const{setOpen:e,setClose:a}=me(),{toast:s}=q(),[r,o]=h.useState(!1),[i,n]=h.useState(["bxy_users"]),[d,l]=h.useState({dropDb:"",dropTable:"",truncateTable:""}),c=h.useCallback(async()=>{o(!0);try{const m=await fetch(Y.DATABASE_MANAGEMENT_SERVICE_URL);m.ok||s({title:"Error",description:"Failed to fetch table names",variant:"destructive",duration:5e3});const p=await m.json();if(p.statusCode!==200){s({title:"Error",description:"Failed to fetch table names",variant:"destructive",duration:5e3});return}n(p.tableNames)}catch(m){console.error("Error fetching table names:",m),s({title:"Error",description:"Failed to fetch table names",variant:"destructive",duration:5e3})}finally{o(!1)}},[]);h.useEffect(()=>{c()},[c]);const g=async({table:m,executionTask:p})=>{if(m===""){s({title:"Error",description:"Table name cannot be empty",variant:"destructive",duration:3e3});return}try{o(!0);const x=await fetch(Y.DATABASE_MANAGEMENT_SERVICE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:m,executionTask:p})}),v=await x.json();if(!x.ok){s({title:"Error",description:v.message,variant:"destructive",duration:5e3});return}if(s({title:"Success",description:v.message,variant:"default",duration:3e3}),p==="DROP_DATABASE")n([]);else if(p==="DROP_TABLE"){const w=i.filter(T=>T!==m);n(w)}}catch(x){console.error("Error executing table task:",x),s({title:"Error",description:"Failed to execute table task",variant:"destructive",duration:5e3})}finally{o(!1),a()}},u=m=>t.jsxs("div",{className:"flex self-end flex-col gap-2",children:[t.jsx(se,{className:"text-xs text-muted-foregroun",children:"Table"}),t.jsxs(Ne,{value:d[m],onValueChange:p=>l(x=>({...x,[m]:p})),children:[t.jsx(ye,{className:"w-full m-auto text-black",children:t.jsx(Se,{placeholder:"Pick table"})}),t.jsx(be,{children:t.jsxs(Pe,{children:[t.jsx(Te,{children:"Select table..."}),i.map(p=>t.jsx(ue,{value:p,children:p},C()))]})})]})]}),f=({table:m,executionTask:p,msg:x})=>t.jsx(V,{onClick:()=>{e(t.jsx(ka,{title:"Truncate Table?",subheading:"Be careful, this action is irreversible.",children:t.jsxs("div",{className:"my-2 flex flex-col",children:[t.jsxs("p",{className:"p-2",children:[x," ",t.jsxs("span",{className:"text-red-600 font-bold italic",children:["'",m,"'"]})," ","?"]}),t.jsx(V,{className:"my-1 ml-auto",variant:"destructive",onClick:()=>g({table:m,executionTask:p}),disabled:r,children:"Accept"})]})}))},variant:"destructive",className:"mt-5 flex justify-self-end",disabled:r,children:p==="TRUNCATE_TABLE"?"Truncate":p==="DROP_TABLE"?"Drop":"Drop DB"});return t.jsxs("div",{className:"overflow-x-auto my-3 flex flex-col gap-3 items-start justify-center w-[800px]",children:[t.jsx("h1",{className:"font-bold text-xl self-start",children:"Database Management"}),i.length?t.jsxs("section",{className:"grid grid-cols-3 items-start justify-items-center gap-4  w-[800px]",children:[t.jsxs("div",{className:"aspect-video rounded-xl bg-sky-600/10 p-2 w-full",children:[t.jsx("h4",{className:"text-center font-bold mb-2",children:"Drop Table"}),u("dropTable"),f({table:d.dropTable,executionTask:"DROP_TABLE",msg:" Are you sure you want to drop the table"})]}),t.jsxs("div",{className:"aspect-video rounded-xl  bg-sky-600/10 p-2 w-full",children:[t.jsx("h4",{className:"text-center font-bold mb-2",children:"Truncate Table"}),u("truncateTable"),f({table:d.truncateTable,executionTask:"TRUNCATE_TABLE",msg:" Are you sure you want to truncate the table"})]}),t.jsxs("div",{className:"aspect-video rounded-xl  bg-sky-600/10 p-2 w-full",children:[t.jsx("h4",{className:"text-center font-bold mb-2",children:"Drop Database"}),u("dropDb"),f({table:d.dropDb,executionTask:"DROP_DATABASE",msg:" Are you sure you want to drop the database"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-center",children:"No databases found"}),t.jsx("p",{className:"text-center",children:"No tables found"})]})]})},X={BASE:"/",LOGIN:"login",LOGOUT:"logout",ADMIN:"admin",GDRIVE:"gdrive",DATABASE:"database-management",UNAUTHORIZED:"unauthorized",ERROR:"error",NOT_FOUND:"not-found",WILDCARD:":pageId"},Gd=mr(hr(t.jsxs(ie,{path:X.BASE,element:t.jsx(Or,{}),children:[t.jsx(ie,{path:X.NOT_FOUND,element:t.jsx($r,{})}),t.jsx(ie,{path:X.UNAUTHORIZED,element:t.jsx(Xr,{})}),t.jsx(ie,{path:X.ERROR,element:t.jsx(Ur,{})}),t.jsx(ie,{path:X.LOGOUT,element:t.jsx(qr,{})}),t.jsx(ie,{path:X.LOGIN,element:t.jsx(Yr,{})}),t.jsx(ie,{element:t.jsx(pd,{requireAdmin:!0}),children:t.jsxs(ie,{path:X.ADMIN,element:t.jsx(Ud,{}),children:[t.jsx(ie,{path:X.GDRIVE,element:t.jsx($d,{})}),t.jsx(ie,{path:X.DATABASE,element:t.jsx(Fd,{})})]})}),t.jsx(ie,{path:X.WILDCARD,element:t.jsx(ud,{})})]})));function zd(){const{compilerDispatch:e}=J(),{userDispatch:a}=de(),[s,r]=h.useState(!1),o=h.useCallback(async()=>{try{const d=await(await fetch(Y.GET_SESSION)).json();if(!d||d.statusCode!==200){console.error(d);return}a({type:"SET_USER_LOGGED_IN",payload:d.user})}catch(n){console.error("auth ",n)}},[]);h.useEffect(()=>{o()},[o]),h.useEffect(()=>{if(r(!0),window.__config.compilerContextService==="websocket"){const n=new URL(window.location.href),d=window.__config.secure?`wss://${n.hostname}:${window.__config.socketPort}`:`ws://${n.hostname}:${window.__config.socketPort}`;et.connect(d).then(()=>{et.onMessage("open",l=>{console.info("WebSocket open "),e({type:"SET_CONTEXT_SERVICE",payload:{contextService:"websocket",socketProjectExecProps:window.__config.properties,dockerContainerStatus:"RUNNING"}}),(async()=>{await i(),await new Promise(g=>setTimeout(g,500)),r(!1)})().then(()=>r(!1))})}).catch(()=>{r(!1)})}else(async()=>{e({type:"SET_CONTEXT_SERVICE",payload:{contextService:"http",socketProjectExecProps:window.__config.properties,dockerContainerStatus:"RUNNING"}}),await i(),r(!1)})()},[]);const i=async()=>{try{const d=await(await fetch(Y.GET_ALIAS)).json(),l=!d||d.statusCode!==200;l&&console.error("error fetching alias"),window.__BUILDER__PAGE={alias:l?"":d.alias,isShared:!l,interactiveConsole:!1},Object.freeze(window.__BUILDER__PAGE)}catch(n){console.error("auth ",n)}};return s?t.jsx("div",{className:"h-full w-full flex items-center justify-center bg-background z-[110]",children:t.jsx(Ae,{size:"large",className:"stroke-primary"})}):t.jsx(gr,{router:Gd})}window.readAssetFile=fe;window.logoutIframe=Dr;xr.createRoot(document.getElementById("root")).render(t.jsx(vr,{defaultTheme:"light",storageKey:"browxy-slim-ui-theme",children:t.jsx(L.StrictMode,{children:t.jsx(ei,{children:t.jsx(Vr,{children:t.jsx(Lr,{children:t.jsx(zd,{})})})})})}));
